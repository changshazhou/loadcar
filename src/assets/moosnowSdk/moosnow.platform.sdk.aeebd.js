var mx=function(){"use strict";var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};function o(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var e=function(){return(e=Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++)for(var i in o=arguments[e])Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);return t}).apply(this,arguments)};function n(){for(var t=0,o=0,e=arguments.length;o<e;o++)t+=arguments[o].length;var n=Array(t),i=0;for(o=0;o<e;o++)for(var r=arguments[o],a=0,s=r.length;a<s;a++,i++)n[i]=r[a];return n}var i,r=function(){function t(){}return t.randomNumBoth=function(t,o){var e=o-t,n=Math.random();return t+Math.round(n*e)},t.probabilitys=function(t){for(var o=0,e=n(t),i=0,r=0;r<e.length;r++)i+=e[r];if(100!=i)throw"\u6240\u6709\u6982\u7387\u503c\u603b\u548c\u4e0d\u7b49\u4e8e100%";var a=new Array;for(r=0;r<e.length;r++){for(var s=e[r],c=0;c<s;c++)a.push(o);o++}return a[this.randomNumBoth(0,99)]},t}();(function(t){t[t.WX=0]="WX",t[t.BYTEDANCE=1]="BYTEDANCE",t[t.OPPO=2]="OPPO",t[t.OPPO_ZS=3]="OPPO_ZS",t[t.BAIDU=4]="BAIDU",t[t.QQ=5]="QQ",t[t.PC=6]="PC",t[t.VIVO=7]="VIVO",t[t.UC=8]="UC",t[t.HW=9]="HW"})(i||(i={}));var a="cc",s="Laya",c="",l=function(){function t(){}return t.titleCase=function(t){var o,e=t.toLowerCase().split(/\s+/);for(o=0;o<e.length;o++)e[o]=e[o].slice(0,1).toUpperCase()+e[o].slice(1);return e.join(" ")},t.numFixed=function(t,o){return parseFloat(parseFloat(t).toFixed(o))},t.parseMoney=function(t){return isNaN(t)?0:parseFloat(parseFloat(t).toFixed(2))},t.objKeySort=function(t){for(var o=Object.keys(t).sort(),e={},n=0;n<o.length;n++)e[o[n]]=t[o[n]];return e},t.isObject=function(t){var o=typeof t;return null!==t&&("object"===o||"function"===o)},t.object2Query=function(t){var o=[];for(var e in t)o.push(e+"="+t[e]);return o.join("&")},t.isFunction=function(t){return"function"==typeof t},t.isEmpty=function(t){if("object"==typeof t){var o;for(o in t)return!1;return!0}return null===t||void 0===t||"null"===t||"undefined"===t||""===t},t.formatTime=function(t){return[t.getHours(),t.getMinutes()].map(this.formatNumber).join(":")},t.formatNumber=function(t){return(t=t.toString())[1]?t:"0"+t},t.copy=function(t,o){for(var e in t)o[e]=t[e]},t.randomNumBoth=function(t,o){var e=o-t,n=Math.random();return t+Math.round(n*e)},t.randomFloat=function(t,o){return t+Math.random()*o},t.randomToRatio=function(t,o,e){return this.randomNumBoth(t,o)<=e},t.generateUUID=function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==o?e:3&e|8).toString(16)})},t.isNumber=function(t){return"number"==typeof t||"[object Number]"==Object.prototype.toString.call(t)},t.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)},t.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},Object.defineProperty(t,"platform",{get:function(){if(this.mPlatform)return this.mPlatform;var t=window.moosnowConfig;if(window.tt)this.mPlatform=i.BYTEDANCE;else if(window.swan)this.mPlatform=i.BAIDU;else if(window.qq)this.mPlatform=i.QQ;else if(window.qg)if(window.qg&&window.qg.getSystemInfoSync){var o=window.qg.getSystemInfoSync();console.log("\u5e73\u53f0\u5224\u65ad",JSON.stringify(o)),o&&o.brand&&-1!=o.brand.toLocaleLowerCase().indexOf("vivo")?this.mPlatform=i.VIVO:t.oppo&&t.oppo.url&&-1!=t.oppo.url.indexOf("platform.qwpo2018.com")?this.mPlatform=i.OPPO_ZS:this.mPlatform=i.OPPO}else t.oppo&&t.oppo.url&&-1!=t.oppo.url.indexOf("platform.qwpo2018.com")?this.mPlatform=i.OPPO_ZS:this.mPlatform=i.OPPO;else window.uc?this.mPlatform=i.UC:window.hbs?this.mPlatform=i.HW:window.wx?this.mPlatform=i.WX:t.debug&&t[t.debug]?"wx"==t.debug?this.mPlatform=i.WX:"oppo"==t.debug?t.oppo&&t.oppo.url&&-1!=t.oppo.url.indexOf("platform.qwpo2018.com")?this.mPlatform=i.OPPO_ZS:this.mPlatform=i.OPPO:"bd"==t.debug?this.mPlatform=i.BAIDU:"byte"==t.debug?this.mPlatform=i.BYTEDANCE:"qq"==t.debug?this.mPlatform=i.QQ:"vivo"==t.debug?this.mPlatform=i.VIVO:"uc"==t.debug?this.mPlatform=i.UC:"hw"==t.debug?this.mPlatform=i.HW:this.mPlatform=i.PC:this.mPlatform=i.PC;return this.mPlatform},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isOnlyUI",{get:function(){return 1==window.onlyUI},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isPC",{get:function(){return cc.sys.browserType===cc.sys.BROWSER_TYPE_CHROME},enumerable:!0,configurable:!0}),Object.defineProperty(t,"config",{get:function(){var o=window.moosnowConfig;return t.platform==i.WX?o.wx:t.platform==i.OPPO||t.platform==i.OPPO_ZS?o.oppo:t.platform==i.VIVO?o.vivo:t.platform==i.QQ?o.qq:t.platform==i.BAIDU?o.bd:t.platform==i.BYTEDANCE?o.byte:t.platform==i.HW?o.hw:o.wx},enumerable:!0,configurable:!0}),t.colorRGB2Hex=function(t){var o=t.split(",");return"#"+((1<<24)+(parseInt(o[0].split("(")[1])<<16)+(parseInt(o[1])<<8)+parseInt(o[2].split(")")[0])).toString(16).slice(1)},t.deepCopy=function(t){var o=Array.isArray(t)?[]:{};if(t&&"object"==typeof t)for(var e in t)t.hasOwnProperty(e)&&(t[e]&&"object"==typeof t[e]?o[e]=this.deepCopy(t[e]):o[e]=t[e]);return o},t.getEngine=function(){return window[a]?a:window[s]?s:c},t.popOpenAnim=function(t,o){if(this.getEngine()==a)return t.scale=.8,void t.runAction(cc.sequence(cc.scaleTo(.1,1.2,1.2),cc.scaleTo(.1,1,1),cc.callFunc(function(){o&&o()},this)));o()},t.popCloseAnim=function(t,o){if(this.getEngine()==a)return t.scale=1,void t.runAction(cc.sequence(cc.scaleTo(.1,0,0),cc.callFunc(function(){o&&o()},this)));o()},t.format=function(t){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];if(void 0===t||null==t||""==t||"undefined"==t)return t;for(var n=0;n<o.length;n++){var i=new RegExp("\\{"+n+"\\}","gm");t=t.replace(i,o[n])}return t},t.formatMoney=function(t){return isNaN(t)&&(t=0),t<9999?parseInt(""+t):t<9999999?parseFloat(""+t/1e3).toFixed(2)+"K":t<9999999999?parseFloat(""+t/1e6).toFixed(2)+"M":t<9999999999999?parseFloat(""+t/1e9).toFixed(2)+"G":t<1e16?parseFloat(""+t/1e12).toFixed(2)+"T":t<1e19?parseFloat(""+t/1e15).toFixed(2)+"P":t<1e22?parseFloat(""+t/1e18).toFixed(2)+"E":parseFloat(""+t/1e21).toFixed(2)+"B"},t}(),h=function(){function t(){this.moduleName="",this.mIntervalArr={},this.mTimeoutArr={},this.mScheduleIndex=0,this.mMaping={}}return t.prototype.schedule=function(t,o){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];var r=this,a=setInterval(function(){t&&t.apply.apply(t,n([r],e))},1e3*o,r);this.mIntervalArr[this.mScheduleIndex]={handle:a,callback:t},this.mScheduleIndex++},t.prototype.unschedule=function(t){for(var o in this.mIntervalArr)this.mIntervalArr[o].callback==t&&clearInterval(parseInt(this.mIntervalArr[o].handle))},t.prototype.scheduleOnce=function(t,o){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];var r=this,a=setTimeout(function(){clearTimeout(a),t&&t.apply.apply(t,n([r],e))},1e3*o);this.mTimeoutArr[this.mScheduleIndex]={handle:a,callback:t},this.mScheduleIndex++},t.prototype.unscheduleOnce=function(t){for(var o in this.mTimeoutArr)this.mTimeoutArr[o].callback==t&&clearInterval(parseInt(this.mTimeoutArr[o].handle))},t.schedule=function(t,o){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];var r=this,a=setInterval(function(){t&&t.apply.apply(t,n([r],e))},1e3*o,r);this.mIntervalArr[this.mScheduleIndex]={handle:a,callback:t},this.mScheduleIndex++},t.unschedule=function(t){for(var o in this.mIntervalArr)this.mIntervalArr[o].callback==t&&clearInterval(parseInt(this.mIntervalArr[o].handle))},t.scheduleOnce=function(t,o){var e=this,n=setTimeout(function(){clearTimeout(n),t&&t.apply(e)},1e3*o);this.mTimeoutArr[this.mScheduleIndex]={handle:n,callback:t},this.mScheduleIndex++},t.unscheduleOnce=function(t){for(var o in this.mTimeoutArr)this.mTimeoutArr[o].callback==t&&clearInterval(parseInt(this.mTimeoutArr[o].handle))},t.prototype.initProperty=function(t){for(var o in t)this.hasOwnProperty(o)&&(this[o]=t[o])},t.prototype.preload=function(t,o){o&&o()},t.prototype._findComponent=function(t,o){for(var e=null,n=0;n<t._components.length;n++){var i=t._components[n];if(i.willHide&&i.willShow){e=i;break}}return e},t.prototype._findComponentByName=function(t,o){return!!t&&(t.name==o||this._findComponentByName(t.$super,o))},t.mIntervalArr={},t.mTimeoutArr={},t.mScheduleIndex=0,t}(),d=function(){function t(){}return t.NONE=0,t.LEFT=1,t.RIGHT=2,t.CENTER=8,t}(),p=function(){function t(){}return t.NONE=16,t.TOP=32,t.CENTER=64,t.BOTTOM=128,t}(),u={END:"__video_end",NOTEND:"__video_not_end",ERR:"__video_error"},m=function(){function t(){}return t.VIBRATESWITCH_CHANGED="VIBRATESWITCH_CHANGED",t.SOUNDSWITCH_CHANGED="SOUNDSWITCH_CHANGED",t.MUSICSWITCH_CHANGED="MUSICSWITCH_CHANGED",t.ON_PLATFORM_SHOW="ON_PLATFORM_SHOW",t.ON_PLATFORM_HIDE="ON_PLATFORM_HIDE",t.ON_BANNER_ERROR="ON_BANNER_ERROR",t.ON_BANNER_HIDE="ON_BANNER_HIDE",t.ON_AD_SHOW="ON_AD_SHOW",t.AD_VIEW_CHANGE="AD_VIEW_CHANGE",t.AD_VIEW_REFRESH="AD_VIEW_REFRESH",t.COIN_CHANGED="COIN_CHANGED",t.RANDOWM_NAVIGATE="RANDOWM_NAVIGATE",t.COMPONENT_CHECKBOX_TOGGLE="COMPONENT_CHECKBOX_TOGGLE",t.PRIZE_BOX_UNLOCAK="PRIZE_BOX_UNLOCAK",t}(),f="\u9690\u85cfbanner",w="banner id \u6ca1\u6709\u914d\u7f6e",g="\u663e\u793aBANNER",v="banner\u4f4d\u7f6e\u6216\u5927\u5c0f\u88ab\u91cd\u65b0\u8bbe\u7f6e",y="\u8df3\u8f6c\u592a\u9891\u7e41 >>>>>>>>>>>>>>>>>>>>>",b="\u8df3\u8f6c\u6570\u636e",C="\u8bbe\u5907\u4fe1\u606f",N="video id \u6ca1\u6709\u914d\u7f6e",A="\u52a0\u8f7dvideo\u6210\u529f\u56de\u8c03",I="video\u5173\u95ed\u56de\u8c03",S="video\u52a0\u8f7d\u9519\u8bef",T="\u52a0\u8f7d\u539f\u751f\u5e7f\u544a\u6210\u529f",_="\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u51fa\u9519,\u4f7f\u7528\u65b0ID\u52a0\u8f7d\u539f\u751f\u5e7f\u544a",E="\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u51fa\u9519\uff0c\u672c\u6b21\u6ca1\u6709\u5e7f\u544a",k="\u539f\u751f\u5e7f\u544aID\u5df2\u7ecf\u7528\u5b8c\uff0c\u672c\u6b21\u6ca1\u6709\u5e7f\u544a",O="\u70b9\u51fb\u4e86\u539f\u751f\u5e7f\u544a",B="\u4e0a\u62a5\u539f\u751f\u5e7f\u544a",L="\u539f\u751f\u5e7f\u544a\u6570\u636e\u6ca1\u6709\uff0c\u56de\u8c03Null",F="\u539f\u751f\u5e7f\u544a\u9500\u6bc1",x="\u63d2\u5c4f\u5e7f\u544aID\u4e3a\u7a7a\uff0c\u7cfb\u7edf\u4e0d\u52a0\u8f7d",R="\u963f\u62c9\u4e01\u6587\u4ef6\u672a\u5f15\u5165",D="\u7248\u672c\u8fc7\u4f4e \u5e73\u53f0\u4e0d\u652f\u6301",P=function(){function t(){}return t.NONE=0,t.LEFT=1,t.RIGHT=2,t.CENTER=8,t}(),M=function(){function t(){}return t.NONE=16,t.TOP=32,t.CENTER=64,t.BOTTOM=128,t}(),V=function(t){function e(){var o=t.call(this)||this;return o.baseUrl="https://api.liteplay.com.cn/",o.currentShortCall=null,o.shareFail=null,o.vibrateOn=!1,o.systemInfo=null,o.block=null,o.banner={},o.video={},o.inter=null,o.native=null,o.box=null,o.platformName="wx",o.nativeIdIndex=0,o.mBannerWidth=300,o.bannerHeigth=96,o.bannerHorizontal=d.NONE,o.bannerVertical=p.NONE,o.bannerShowCount=0,o.bannerShowCountLimit=3,o.bannerShowTime=0,o.bannerShowTimeLimit=15,o.bannerLimitType=0,o.bannerCb=null,o.bannerStyle=null,o.isBannerShow=!1,o.blockWidth=300,o.blockHeigth=96,o.blockHorizontal=P.NONE,o.blockVertical=M.NONE,o.videoCb=null,o.videoLoading=!1,o.videoPlaying=!1,o.interShowCount=0,o.interShowCountLimit=3,o.isInterLoaded=!1,o.nativeAdResult=null,o.nativeCb=null,o.nativeLoading=!1,o.recordObj=null,o.shareInfoArr=[],o.versionRet=null,o.prevNavigate=Date.now(),o.navigateEnd=!0,o.preloadBannerId="",o.isLoaded=!1,o.initShare(!0),o.share_clickTime=null,o.currentShareCallback=null,o.shareFail=!1,o.updateProgram(),o.initRecord(),o}return o(e,t),e.prototype.getAdId=function(t,o){return void 0===o&&(o=0),t instanceof Array?t.length>0?o<0?t[l.randomNumBoth(0,t.length-1)]:t.length-1<o?(console.warn("id\u6570\u7ec4\u5c0f\u4e8e\u4f20\u5165\u7d22\u5f15\u503c\uff0c\u672c\u6b21\u4f7f\u7528"+t[0]+"\uff0c\u8bf7\u68c0\u67e5\u4ee3\u7801",t,o),t[0]):t[o]:(console.warn("Id \u914d\u7f6e\u4e3a\u7a7a"),null):t},e.prototype.getBannerId=function(t){return void 0===t&&(t=0),this.getAdId(l.config.bannerId,t)},e.prototype.getBlockId=function(t){return void 0===t&&(t=0),this.getAdId(l.config.blockId,t)},e.prototype.getVideoId=function(t){return void 0===t&&(t=0),this.getAdId(l.config.videoId,t)},Object.defineProperty(e.prototype,"interId",{get:function(){return this.getAdId(l.config.interId,-1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxId",{get:function(){return this.getAdId(l.config.boxId,-1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nativeId",{get:function(){return this.getAdId(l.config.nativeId,-1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bannerWidth",{get:function(){var t=this.getSystemInfoSync(),o=t.windowWidth;return t.windowHeight<t.windowWidth?this.mBannerWidth=o<300?o:300:this.mBannerWidth=o,this.mBannerWidth},set:function(t){this.mBannerWidth=t},enumerable:!0,configurable:!0}),e.prototype.onEnable=function(){},e.prototype.vibrateSwitch=function(t){this.vibrateOn=t},e.prototype.isIphoneXModel=function(){if(window[this.platformName]){var t=this.getSystemInfoSync();return!!/iphone x/.test(t.model.toLowerCase())}},e.prototype.isIphone=function(){if(window[this.platformName]){var t=this.getSystemInfoSync();return!!/iphone/.test(t.model.toLowerCase())}},e.prototype.isIphoneX=function(){if(window[this.platformName]){var t=this.getSystemInfoSync(),o=t.screenHeight,e=t.screenWidth/o;return e<=.5||e>=2}},e.prototype.compareVersion=function(t,o){t=t.split("."),o=o.split(".");for(var e=Math.max(t.length,o.length);t.length<e;)t.push("0");for(;o.length<e;)o.push("0");for(var n=0;n<e;n++){var i=parseInt(t[n]),r=parseInt(o[n]);if(i>r)return 1;if(i<r)return-1}return 0},e.prototype.supportVersion=function(t){var o=this.getSystemInfoSync().SDKVersion;return this.compareVersion(o,t)>=0},e.prototype.supportFunction=function(t){return!!window[this.platformName]&&!!window[this.platformName][t]},e.prototype.checkVersion=function(t,o){null==this.versionRet?this._checkConfigVersion(o):o(this.versionRet)},e.prototype._checkRemoteVersion=function(t){var o=this,e=this.baseUrl+"admin/wx_list/getAppConfig",n={appid:l.config.moosnowAppId};moosnow.http.request(e,n,"POST",function(e){o.versionRet=o.checkLog(e.data.version),t(o.versionRet)},function(){console.log("checkVersion fail")},function(){console.log("checkVersion complete")})},e.prototype._checkConfigVersion=function(t){var o=this;moosnow.http.getAllConfig(function(e){e&&e.version?(o.versionRet=o.checkLog(e.version),t(o.versionRet)):o._checkRemoteVersion(t)})},e.prototype.checkLog=function(t){var o=l.config.version,e=t!=o;return console.log("\u7248\u672c\u68c0\u67e5 \u540e\u53f0\u7248\u672c"+t+" \u914d\u7f6e\u6587\u4ef6\u7248\u672c"+o),console.log("\u83b7\u53d6\u5e7f\u544a\u5f00\u5173\uff1a",e),e},e.prototype.isSmallWidth=function(){if(window[this.platformName]){var t=this.getSystemInfoSync(),o=t.screenHeight;t.screenWidth;return o<667&&(console.log("\u9ad8\u5ea6\u4e0d\u591f",o),!0)}},e.prototype.login=function(t,o){if(l.isFunction(t)){var e=moosnow.data.getToken();""==e&&(e=(e=l.generateUUID()).replace(/-/g,""),moosnow.data.setToken(e)),t(e)}},e.prototype.postMessage=function(t){window[this.platformName]&&window[this.platformName].getOpenDataContext&&window[this.platformName].getOpenDataContext().postMessage(t)},e.prototype.navigate2Video=function(t){},e.prototype.getClipboardData=function(t,o){window[this.platformName]&&window[this.platformName].getClipboardData&&window[this.platformName].getClipboardData({success:function(o){t&&t(o.data),console.log(""+o.data)},fail:function(t){o&&o(t),console.log("getClipboardData\u8c03\u7528\u5931\u8d25")}})},e.prototype.setClipboardData=function(t,o,e){window[this.platformName]&&window[this.platformName].setClipboardData&&window[this.platformName].setClipboardData({data:t,success:function(t){o&&o(t),console.log("setClipboardData\u8c03\u7528\u6210\u529f")},fail:function(t){e&&e(t),console.log("setClipboardData\u8c03\u7528\u5931\u8d25")}})},e.prototype.navigate2Mini=function(t,o,e,n){var i=this;if(console.log(b,t),Date.now()-this.prevNavigate<500)console.log(y);else if(this.prevNavigate=Date.now(),this.navigateEnd){if(this.navigateEnd=!1,!window[this.platformName])return this.scheduleOnce(function(){i.navigateEnd=!0},2),void(e&&e());var r=this.getLaunchOption(),a=t.appid,s=t.path,c=t.extraData;c=c||{};var l={position:t.position,appid:a,img:t.atlas||t.img,scene:r.scene,wxgamecid:r.query.wxgamecid};moosnow.http.point("\u6253\u5f00\u8df3\u8f6c",l),moosnow.http.navigate(t,function(t){}),window[this.platformName].navigateToMiniProgram({appId:a,path:s,extraData:c,success:function(){console.log("\u8df3\u8f6c\u53c2\u6570",l),moosnow.http.point("\u8df3\u8f6c",l),moosnow.http.navigateEnd(moosnow.data.getNavigateToken(a)),o&&o()},fail:function(t){moosnow.data.resetNavigateToken(),console.log("\u8df3\u8f6c\u5931\u8d25 ",t," fail callback ",!!e),e&&e()},complete:function(){i.navigateEnd=!0,moosnow.data.resetNavigateToken(),n&&n()}})}else console.log("\u8df3\u8f6c\u672a\u7ed3\u675f")},e.prototype.updateProgram=function(){var t=this;if(window[this.platformName]&&"function"==typeof window[this.platformName].getUpdateManager){var o=window[this.platformName].getUpdateManager();o.onCheckForUpdate(function(t){}),o.onUpdateReady(function(e){t.showModal("\u53d1\u73b0\u65b0\u7248\u672c","\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u662f\u5426\u66f4\u65b0\uff1f","\u53d6\u6d88","\u66f4\u65b0",function(t){t&&o.applyUpdate()})}),o.onUpdateFailed(function(){})}},e.prototype.vibrateShort=function(){window[this.platformName]&&(window[this.platformName]&&!window[this.platformName].vibrateShort||window[this.platformName].vibrateShort())},e.prototype.vibrateLong=function(){window[this.platformName]&&(window[this.platformName]&&!window[this.platformName].vibrateLong||window[this.platformName].vibrateLong())},e.prototype.showLoading=function(t){window[this.platformName]?window[this.platformName].showLoading({title:t,mask:!1,success:null,fail:null,complete:null}):console.log("showLoading",t)},e.prototype.hideLoading=function(){window[this.platformName]&&window[this.platformName].hideLoading()},e.prototype.showModal=function(t,o,e,n,i){window[this.platformName]&&window[this.platformName].showModal({title:t,content:o,cancelText:e,confirmText:n,showCancel:!0,cancelColor:"#000000",confirmColor:"#3CC51F",fail:null,complete:null,success:function(t){t.confirm?i&&i(!0):t.cancel&&i&&i(!1)}})},e.prototype.showModalWithoutCancel=function(t,o,e,n){window[this.platformName]&&window[this.platformName].showModal({title:t,content:o,showCancel:!1,confirmText:e,cancelColor:"#000000",confirmColor:"#3CC51F",cancelText:"",fail:null,complete:null,success:function(t){t.confirm?n&&n(!0):t.cancel&&n&&n(!1)}})},e.prototype.showToast=function(t,o,e){void 0===o&&(o="none"),void 0===e&&(e=!1),window[this.platformName]&&window[this.platformName].showToast({title:t,icon:o,duration:2e3,mask:e,image:null,success:null,fail:null,complete:null})},e.prototype.authOrGetUserInfo=function(t){if(window[this.platformName]){var o=this;this.getSetting(function(e){console.log("\u6388\u6743\u4fe1\u606f",e),e["scope.userInfo"]?o.getUserInfo(function(o){console.log("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff1a",o),t(o,!1)},function(t){}):o.showUserInfoButton(function(o){t(o,!0),console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff1a",o)})},function(e){o.showUserInfoButton(function(o){t(o,!0),console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff1a",o)})})}},e.prototype.showUserInfoButton=function(t){var o={type:"text",text:"",style:this._initLoginButton()},e=window[this.platformName].createUserInfoButton(o);e.onTap(function(o){o.userInfo&&o.userInfo.nickName?(t(o.userInfo),e.hide()):t(null)}),e.show()},e.prototype.getSetting=function(t,o){window[this.platformName].getSetting({success:function(o){t(o.authSetting)},fail:function(){o()},complete:null})},e.prototype.getUserInfo=function(t,o){window[this.platformName].getUserInfo({success:function(o){t(o.userInfo)},fail:function(){o()},withCredentials:!1,complete:null,lang:"en"})},e.prototype.getLaunchOption=function(){return this.mLaunchOption||(window[this.platformName]?(window[this.platformName].getEnterOptionsSync&&(this.mLaunchOption=window[this.platformName].getEnterOptionsSync()),window[this.platformName].getLaunchOptionsSync&&(this.mLaunchOption=window[this.platformName].getLaunchOptionsSync())):this.mLaunchOption={}),this.mLaunchOption},e.prototype.getSystemInfoSync=function(){return null==this.systemInfo&&(window[this.platformName]&&window[this.platformName].getSystemInfoSync?this.systemInfo=window[this.platformName].getSystemInfoSync():this.systemInfo={},console.log(C,this.systemInfo)),this.systemInfo},e.prototype.isLandscape=function(t,o){return t<o},e.prototype.initShare=function(t){var o=this;window[this.platformName]&&window[this.platformName].showShareMenu&&(this.shareInfoArr=t,window[this.platformName].showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"],success:null,fail:null,complete:null}),window[this.platformName].onShareAppMessage&&window[this.platformName].onShareAppMessage(function(){return o._buildShareInfo()}),window[this.platformName].onShareTimeline&&window[this.platformName].onShareTimeline(function(){return o._buildShareInfo()}))},e.prototype.getShareInfo=function(t,o,e){void 0===e&&(e=null),window[this.platformName]&&window[this.platformName].getShareInfo({shareTicket:t,success:function(t){o(t.encryptedData,t.iv)},fail:function(){e&&e()},complete:null})},e.prototype.share=function(t,o,e){void 0===t&&(t={}),window[this.platformName]?(this.currentShareCallback=o,this.currentShortCall=e,this.share_clickTime=Date.now(),this.shareFail=!1,this._share(t)):o&&o(!0)},e.prototype.shareWithoutCheck=function(t,o){void 0===t&&(t={}),window[this.platformName]||o&&o(!0),this.currentShareCallback=o,this.share_clickTime=1,this.shareFail=!1,this._share(t)},e.prototype._share=function(t){if(void 0===t&&(t=null),window[this.platformName])if(window[this.platformName].shareAppMessage){var o=this._buildShareInfo(t);console.log("\u5206\u4eab\u6570\u636e\uff1a",o),window[this.platformName].shareAppMessage(o)}else this.currentShareCallback(!0);else this.currentShareCallback(!0)},e.prototype._buildShareInfo=function(t){void 0===t&&(t=null);var o="",e="";if(this.shareInfoArr.length>0){var n=this.shareInfoArr[r.randomNumBoth(0,this.shareInfoArr.length-1)];o=n.title,e=n.img}return{title:o,imageUrl:e,query:t}},e.prototype._onShareback=function(){var t=this;setTimeout(function(){t.share_clickTime&&t.currentShareCallback&&(t.shareFail?t.currentShareCallback(!1):1==t.share_clickTime||Date.now()-t.share_clickTime>=3e3?t.currentShareCallback(!0):t.currentShareCallback(!1)),t.shareFail=!1,t.currentShareCallback=null,t.share_clickTime=null},100)},e.prototype._initLoginButton=function(){if(window[this.platformName]){var t=window[this.platformName].getSystemInfoSync();return{left:0,top:0,width:t.screenWidth,height:t.screenHeight,lineHeight:40,color:"#ffffff",type:"text",text:"\u83b7\u53d6\u7528\u6237\u4fe1\u606f",textAlign:"center",fontSize:28}}},e.prototype.initRecord=function(){},e.prototype.clipRecord=function(t,o){void 0===t&&(t=[2,2])},e.prototype.startRecord=function(t,o){void 0===t&&(t=300),void 0===o&&(o=null),this.recordObj||o&&o(!1)},e.prototype.stopRecord=function(t){void 0===t&&(t=null),this.recordObj||t&&t(!1)},e.prototype.pauseRecord=function(){},e.prototype.resumeRecord=function(){},e.prototype.showShareButton=function(t,o,e){},e.prototype.hideShareButton=function(){},e.prototype._regisiterWXCallback=function(){window[this.platformName]&&(this._regisiterOnShow(),this._regisiterOnHide())},e.prototype._regisiterOnShow=function(){if(window[this.platformName].onShow){var t=this;window[this.platformName].onShow(function(o){t._onShowCallback(o)})}},e.prototype._onShowCallback=function(t){this._onShareback(),console.log("on show ",t),moosnow.event.sendEventImmediately(m.ON_PLATFORM_SHOW,t)},e.prototype._regisiterOnHide=function(){if(window[this.platformName].onHide){var t=this;window[this.platformName].onHide(function(o){t._onHideCallback(o)})}},e.prototype._onHideCallback=function(t){console.log("on show ",t),moosnow.event.sendEventImmediately(m.ON_PLATFORM_HIDE,t),console.log("on hide ",t);var o=t&&(8==t.targetAction||9==t.targetAction||10==t.targetAction)&&t.targetPagePath.length>50;o&&moosnow.http.clickBanner(),this.bannerCb?this.bannerCb(o):console.log("banner callback is null ")},e.prototype.initBanner=function(){window[this.platformName]},e.prototype._prepareBanner=function(t){if(window[this.platformName].createBannerAd){var o=this._getBannerPosition();console.log("PlatformModule ~ _createBannerAd ~ style",o),l.isEmpty(this.banner[t])||this.destroyBanner(t),this.banner[t]=window[this.platformName].createBannerAd({adUnitId:t,adIntervals:30,style:{top:o.top,left:o.left,width:this.bannerWidth}}),this.banner[t].isLoaded=!1,this.banner[t].bannerShowCount=0,this.banner[t].bannerShowTime=Date.now(),this.banner[t]&&(this.banner[t].onResize(this._onBannerResize.bind(this,t)),this.banner[t].onError(this._onBannerError.bind(this,t)),this.banner[t].onLoad(this._onBannerLoad.bind(this,t)))}},e.prototype._createBannerAd=function(t){if(window[this.platformName]&&window[this.platformName].createBannerAd){var o=this.getBannerId(t);if(!l.isEmpty(o))return l.isEmpty(this.banner[o])?(this._prepareBanner(o),o):o;console.warn(w)}},e.prototype._onBannerLoad=function(t){console.log("PlatformModule ~ _onBannerLoad ~ bannerId",t),this.bannerShowCount=0},e.prototype._onBannerError=function(t,o){console.warn("banner___error:",o.errCode,o.errMsg),this.banner[t]=null,this.isBannerShow=!1,moosnow.event.sendEventImmediately(m.ON_BANNER_HIDE,null),moosnow.event.sendEventImmediately(m.ON_BANNER_ERROR,null)},e.prototype._onBannerResize=function(t,o){console.log("_bottomCenterBanner -> size",o);var e=this.getSystemInfoSync().windowWidth;this.banner[t]&&(isNaN(this.banner[t].style.realWidth)||(this.bannerWidth=this.banner[t].style.realWidth),isNaN(this.banner[t].style.realHeight)||(this.bannerHeigth=this.banner[t].style.realHeight)),console.log("_bottomCenterBanner -> this.banner.style",this.banner[t].style),this.bannerStyle?this.applyCustomStyle({banner:this.banner[t]}):this.banner[t]&&(this.banner[t].style.left=(e-o.width)/2)},e.prototype._resetBanenrStyle=function(t){if(console.log("PlatformModule ~ _resetBanenrStyle ~ size",t),this.bannerStyle)this.applyCustomStyle(t);else{var o=this._getBannerPosition();t.banner&&(t.banner.style.top=o.top,t.banner.style.left=o.left,console.log(v,t.banner.style,"set top ",top))}},e.prototype.applyCustomStyle=function(t){for(var o in this.bannerStyle)t.banner&&(t.banner.style[o]=this.bannerStyle[o])},e.prototype._getBannerPosition=function(){var t=this.bannerHorizontal,o=this.bannerVertical,e=this.getSystemInfoSync(),n=e.windowWidth,i=e.windowHeight,r=0,a=0;return o==p.TOP?r=0:o==p.CENTER?r=(i-this.bannerHeigth)/2:o==p.BOTTOM&&(r=i-this.bannerHeigth),t==d.LEFT?a=0:t==d.RIGHT?a=n-this.bannerWidth:t==d.CENTER&&(a=(n-this.bannerWidth)/2),console.log("PlatformModule ~ _getBannerPosition ~ left",a,r),{left:a,top:r}},e.prototype.preloadBanner=function(t){void 0===t&&(t=-1),this.preloadBannerId=this._createBannerAd(t)},e.prototype.showBanner=function(t,o,e,n,i,r){var a=this;void 0===t&&(t=!0),void 0===e&&(e=d.CENTER),void 0===n&&(n=p.BOTTOM),void 0===i&&(i=-1),console.log(g),this.bannerCb=o,window[this.platformName]&&(this.bannerHorizontal=e,this.bannerVertical=n,this.bannerStyle=r,this._hideBanner(),this.currentBannerId=this._createBannerAd(i),this.mTimeoutId&&(clearTimeout(this.mTimeoutId),this.mTimeoutId=null),t?moosnow.http.getAllConfig(function(t){0!=t.mistouchNum?(console.log("\u540e\u53f0\u5f00\u542f\u4e86banner\uff0c\u6267\u884c\u663e\u793a"),a._showBanner()):console.log("\u540e\u53f0\u5173\u95ed\u4e86banner\uff0c\u4e0d\u6267\u884c\u663e\u793a")}):this._showBanner())},e.prototype.showScreenOutBanner=function(){if(window[this.platformName]&&window[this.platformName].createBannerAd){this.hideScreenOutBanner();var t=this.getBannerId(-1);this.mScreenOutBanner=window[this.platformName].createBannerAd({adUnitId:t,adIntervals:30,style:{top:-300,left:-300,width:this.bannerWidth}}),this.mScreenOutBanner.onResize(function(t){console.log("\u5916\u90e8banner onResize",t)}),this.mScreenOutBanner.onError(function(t){console.log("\u5916\u90e8banner onError",t)}),this.mScreenOutBanner.onLoad(function(t){console.log("\u5916\u90e8banner onLoad",t)}),this.mScreenOutBanner.show()}},e.prototype.hideScreenOutBanner=function(){this.mScreenOutBanner&&(this.mScreenOutBanner.hide(),this.mScreenOutBanner.destroy(),this.mScreenOutBanner=null)},e.prototype._showBanner=function(){var t=this,o=this.banner[this.currentBannerId];if(o){o.hide(),this._resetBanenrStyle({banner:o,width:o.style.width,height:o.style.realHeight});var e=o.show();e&&e.then(function(){t._resetBanenrStyle({banner:o,width:o.style.width,height:o.style.realHeight})})}},e.prototype.showAutoBanner=function(t,o,e){var n=this;void 0===t&&(t=d.CENTER),void 0===o&&(o=p.BOTTOM),void 0===e&&(e=-1),console.log("\u6267\u884c\u81ea\u52a8\u663e\u793a\u548c\u9690\u85cfBanner\u529f\u80fd"),moosnow.http.getAllConfig(function(i){if(i&&1==i.gameBanner){n.showBanner(!0,function(){},t,o,e);var r=isNaN(i.gameBanenrHideTime)?1.5:parseFloat(i.gameBanenrHideTime);n.mTimeoutId=setTimeout(function(){console.log("\u81ea\u52a8\u9690\u85cf\u65f6\u95f4\u5df2\u5230\uff0c\u5f00\u59cb\u9690\u85cfBanner"),n.hideBanner()},1e3*r)}else console.log("\u540e\u53f0\u5173\u95ed\u4e86auto banner")})},e.prototype.showFlashBanner=function(t,o,e){var n=this;void 0===t&&(t=d.CENTER),void 0===o&&(o=p.BOTTOM),void 0===e&&(e=-1),moosnow.http.getAllConfig(function(i){if(i){var r=isNaN(i.FlashBannerDelayTime)?0:i.FlashBannerDelayTime,a=isNaN(i.FlashBannerContinueTime)?1.5:parseFloat(i.FlashBannerContinueTime);n.unscheduleOnce(n.showFlashBannerCallback),n.scheduleOnce(n.showFlashBannerCallback,r,[a,t,o,e])}})},e.prototype.showFlashBannerCallback=function(t,o,e,n){void 0===o&&(o=d.CENTER),void 0===e&&(e=p.BOTTOM),void 0===n&&(n=-1),this.showBanner(!0,function(){},o,e,n),this.unscheduleOnce(this.hideFlashBannerCallback),this.scheduleOnce(this.hideFlashBannerCallback,t)},e.prototype.hideFlashBannerCallback=function(){this.hideBanner()},e.prototype.exitApplication=function(){},e.prototype.showIntervalBanner=function(t,o){var e=this;void 0===t&&(t=P.NONE),void 0===o&&(o=M.NONE),console.log("\u6267\u884c showIntervalBanner"),moosnow.http.getAllConfig(function(n){var i=n&&!isNaN(n.gameBannerInterval)?parseFloat(n.gameBannerInterval):20;e.schedule(e.showAutoBanner,i,[t,o])})},e.prototype.clearIntervalBanner=function(){console.log("\u6267\u884c clearIntervalBanner"),this.unschedule(this.showAutoBanner)},e.prototype.hideBanner=function(){console.log("hideBanner ~ this.banner",this.banner),this.banner&&(this._hideBanner(),this.banner[this.currentBannerId]&&(this.banner[this.currentBannerId].bannerShowCount++,0==this.bannerLimitType?this.banner[this.currentBannerId].bannerShowCount>=this.bannerShowCountLimit&&(console.log("\u6b21\u6570\u6ee1\u8db3,\u9500\u6bc1banner"),this.destroyBanner(this.currentBannerId),this._prepareBanner(this.currentBannerId)):Date.now()-this.banner[this.currentBannerId].bannerShowTime>1e3*this.bannerShowTimeLimit&&(console.log("\u65f6\u95f4\u6ee1\u8db3\uff0c\u9500\u6bc1banner"),this.destroyBanner(this.currentBannerId),this._prepareBanner(this.currentBannerId))))},e.prototype._hideBanner=function(){for(var t in this.banner)this.banner[t]&&this.banner[t].hide&&this.banner[t].hide()},e.prototype.destroyBanner=function(t){this.banner[t].offResize(this._onBannerResize),this.banner[t].offError(this._onBannerError),this.banner[t].offLoad(this._onBannerLoad),this.banner[t].destroy(),this.banner[t]=null},e.prototype.initVideo=function(){this.createRewardAD(!1)},e.prototype.createRewardAD=function(t,o){var e=this;if(void 0===o&&(o=0),!this.videoLoading)if(window[this.platformName])if(window[this.platformName].createRewardedVideoAd){var n=this.getVideoId(o);if(l.isEmpty(n))return console.warn(N),void(moosnow.platform.videoCb&&moosnow.platform.videoCb(u.END));if(!this.video[n]){if(this.video[n]=window[this.platformName].createRewardedVideoAd({adUnitId:n}),!this.video[n])return void console.warn("\u521b\u5efa\u89c6\u9891\u5e7f\u544a\u5931\u8d25");this.video[n].onError(this._onVideoError),this.video[n].onClose(this._onVideoClose),this.video[n].onLoad(this._onVideoLoad)}moosnow.platform.videoLoading=!0,moosnow.platform.videoPlaying=!1,this.video[n].load().then(function(){t&&(moosnow.platform.videoPlaying=!0,e.video[n].show().then(function(){}).catch(function(t){e._onVideoError(t.errMsg,t.errCode),console.log(t.errMsg)}))}).catch(function(t){e._onVideoError(t.errMsg,t.errCode),console.log(t.errMsg)})}else moosnow.platform.videoCb&&moosnow.platform.videoCb(u.END);else moosnow.platform.videoCb&&moosnow.platform.videoCb(u.END)},e.prototype._onVideoError=function(t,o){console.log(S,t,o),moosnow.platform.videoLoading=!1,moosnow.platform.videoPlaying=!1,moosnow.platform.videoCb&&(moosnow.platform.videoCb(u.ERR),moosnow.platform.videoCb=null)},e.prototype._onVideoClose=function(t){if(console.log(I,t.isEnded),moosnow.platform.videoLoading=!1,moosnow.platform.videoPlaying=!1,moosnow.event.sendEventImmediately(m.ON_PLATFORM_SHOW,null),t.isEnded&&moosnow.http.clickVideo(),moosnow.platform.videoCb){var o=t.isEnded?u.END:u.NOTEND;setTimeout(function(){moosnow.platform.videoCb(o)},50)}},e.prototype._onVideoLoad=function(){console.log(A),moosnow.platform.videoLoading=!1},e.prototype.showVideo=function(t,o){void 0===t&&(t=null),void 0===o&&(o=0),console.log("\u663e\u793avideo"),moosnow.platform.videoCb=t,this.createRewardAD(!0,o)},e.prototype.initInter=function(){this.prepareInter()},e.prototype.prepareInter=function(){window[this.platformName]&&window[this.platformName].createInterstitialAd&&this.supportVersion("2.8.0")&&(l.isEmpty(this.interId)?console.warn(x):(this.inter=window[this.platformName].createInterstitialAd({adUnitId:this.interId}),this.inter.onLoad(this._onInterLoad.bind(this)),this.inter.onClose(this._onInterClose.bind(this))))},e.prototype.showInter=function(){this.inter&&this.isInterLoaded&&this.inter.show()},e.prototype._onInterLoad=function(){this.interShowCount=0,this.isInterLoaded=!0,console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5b8c\u6210")},e.prototype._onInterClose=function(){this.interShowCount++,this.interShowCount>=this.interShowCountLimit&&(this.isInterLoaded=!1,this.inter.load())},e.prototype._onInterError=function(t){console.log("\u63d2\u5c4f\u5e7f\u544a\u51fa\u9519\uff1a",t)},e.prototype._prepareNative=function(){},e.prototype._onNativeLoad=function(t){},e.prototype._onNativeError=function(t){},e.prototype._destroyNative=function(){},e.prototype.showNativeAd=function(t){l.isFunction(t)&&t()},e.prototype.clickNative=function(t){},e.prototype.showAppBox=function(t,o){void 0===o&&(o=!0),l.isFunction(t)&&t()},e.prototype.hideAppBox=function(t){l.isFunction(t)&&t()},e.prototype.reportMonitor=function(t,o){},e.prototype.showMoreGameButton=function(t,o,e){void 0===e&&(e=null),o&&o()},e.prototype.initRank=function(){this.postMessage({action:1})},e.prototype.showRank=function(){this.postMessage({action:10})},e.prototype.updateUserScore=function(t){var o={action:13,data:t};this.postMessage(o)},e.prototype.hideRank=function(){this.postMessage({action:20})},e.prototype.checkFollowAwemeSate=function(t,o){t&&t(!0)},e.prototype.openAwemeUserProile=function(t,o){t&&t(!0)},e.prototype.hasShortcutInstalled=function(t,o){t(!1)},e.prototype.installShortcut=function(t,o,e){void 0===o&&(o="\u65b9\u4fbf\u4e0b\u6b21\u5feb\u901f\u542f\u52a8")},e.prototype.showBlock=function(t,o,e,n){void 0===t&&(t=P.NONE),void 0===o&&(o=M.NONE),void 0===e&&(e=1),void 0===n&&(n=5)},e.prototype.hideBlock=function(){},e.prototype.hideExitButton=function(){var t=this;window[this.platformName]&&window[this.platformName].createVideo&&this.isIphone()&&(this.isLoaded||(this.isLoaded=!0,moosnow.http.getAllConfig(function(o){if(o&&1==o.isBlockClose){var e=t.getSystemInfoSync(),n=e.screenWidth,i=e.screenHeight,r=window.wx.createVideo({x:0,y:0,width:n,height:i,src:"https://liteplay-1253992229.cos.ap-guangzhou.myqcloud.com/video/1.mp4",objectFit:"contain",controls:!1,autoplay:!0,showCenterPlayBtn:!1,enableProgressGesture:!1});-1!=e.model.indexOf("iPhone")&&(console.log("\u82f9\u679c\u624b\u673a \u64ad\u653e\u89c6\u9891"),r.requestFullScreen()),r.onEnded(function(t){r.destroy(),console.log("video.destroy")})}})))},e.prototype.onDisable=function(){},e}(h),H=function(t){function n(){var o=t.call(this)||this;return o.platformName="wx",o.writeTime=0,o.recordCb=null,o._regisiterWXCallback(),o.initBanner(),o.initInter(),o}return o(n,t),n.prototype.login=function(o,e){moosnow.http.getAllConfig(function(t){});var n=this,i=moosnow.data.getToken();i?n.getUserToken("",i,o):window[this.platformName]&&window[this.platformName].login?window[this.platformName].login({success:function(t){t.code?n.getUserToken(t.code,"",o):l.isFunction(o)&&o()},fail:function(){}}):t.prototype.login.call(this,o,e)},n.prototype.getUserToken=function(t,o,e){var n=this.getLaunchOption(),i=n.scene,r=n.query&&n.query.channel_id?n.query.channel_id:"0",a=n.referrerInfo&&n.referrerInfo.appId?n.referrerInfo.appId:"0";moosnow.data.setChannelAppId(a),moosnow.data.setChannelId(r);var s=n.referrerInfo?n.referrerInfo.appId:"\u672a\u77e5";window[this.platformName]&&window[this.platformName].aldSendEvent&&window[this.platformName].aldSendEvent("\u6765\u6e90",{origin:s,path:n.query.from||0}),moosnow.http.request(this.baseUrl+"api/channel/login.html",{appid:l.config.moosnowAppId,code:t,user_id:o,channel_id:r,channel_appid:a,scene:i,fromApp:s},"POST",function(t){console.log("WXModule -> getUserToken -> respone",t),0==t.code&&t.data&&t.data.user_id&&moosnow.data.setToken(t.data.user_id),l.isFunction(e)&&e(t)},function(){l.isFunction(e)&&e({})})},n.prototype.initRecord=function(){window[this.platformName]&&window[this.platformName].getGameRecorder&&(this.recordObj=window[this.platformName].getGameRecorder())},n.prototype.startRecord=function(t,o){var e=this;void 0===t&&(t=300),void 0===o&&(o=null),console.log("record startRecord"),this.recordObj?this.recordObj.start().then(function(t){e.recordObj.on("timeUpdate",function(t){console.log("\u89c6\u9891\u65f6\u957f: "+t.currentTime),e.writeTime=Math.min(t.currentTime,6e4)}),e.recordObj.on("start",function(){o&&o()}),e.recordObj.on("stop",function(t){console.log("\u5bf9\u5c40\u56de\u653e\u65f6\u957f: ",t),e.recordCb&&e.recordCb(t)})}):o&&o(!1)},n.prototype.stopRecord=function(t){var o=this;if(void 0===t&&(t=null),console.log(" stop Record  callback  ",!!t),this.recordObj){this.recordCb=t;var e=this.recordObj.stop();e&&e.then(function(t){t.error.code||o.recordObj.off("timeUpdate"),console.log(" stop Record  then  ",t)}).catch(function(t){console.log(" stop Record  catch  ",t)})}else t&&t(!1)},n.prototype.pauseRecord=function(){this.recordObj&&this.recordObj.pause()},n.prototype.resumeRecord=function(){this.recordObj&&this.recordObj.resume()},n.prototype.showShareButton=function(t,o,n){var i=this;window[this.platformName]&&window[this.platformName].createGameRecorderShareButton&&(o||(o=[[0,this.writeTime]]),moosnow.http.getAllConfig(function(r){i.mShareButton=window[i.platformName].createGameRecorderShareButton({style:e(e({left:10,top:150,height:50},t),{color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4,iconMarginRight:16,paddingLeft:1,paddingRight:30}),text:r.shareButtonText||"",image:r.shareBgImage||"",icon:r.shareIconImage||"",share:{query:"a=1&b=2",bgm:"",timeRange:o}}),i.mShareButton.show(),i.mShareButton.onTap(function(t){console.log("\u9519\u8bef\u7801\uff1a"+t.error.code+"\uff0c\u9519\u8bef\u4fe1\u606f\uff1a"+t.error.message),n&&n(t)})}))},n.prototype.hideShareButton=function(){this.mShareButton&&this.mShareButton.hide()},n}(V),U=function(t){function i(){var o=t.call(this)||this;return o.baseUrl="https://api.liteplay.com.cn/admin/",o.cacheImage=null,o.cacheKey="cacheUrl",o.getResUrl=function(t){for(var o in this.this.cacheImage)if(this.this.cacheImage[o]==t)return o;return""},o.convertToCacheUrl=function(t,o){this.cacheImage[t]?o(this.cacheImage[t]):this.downloadImage(t,function(t){o(t)})},o.saveCacheUrl=function(t){var o=[],e=window.wx.getFileSystemManager();for(var n in this.cacheImage){var i=!0;for(var r in t)for(var a=0;a<t[r].length;a++)t[r][a].atlas!=this.cacheImage[n]&&t[r][a].img!=this.cacheImage[n]||(i=!1);i&&o.push(n)}for(a=0;a<o.length;a++){if(o[a]){console.log("clear file ",o[a]);try{e.removeSavedFile(o[a])}catch(t){console.log("clear file error ",o[a])}}delete this.cacheImage[o[a]]}window.wx&&window.wx.setStorage({key:this.cacheKey,data:this.cacheImage,success:function(){},fail:function(){},complete:function(){}})},o.mMemory={},o.getCache=function(){return this.mMemory},o.setCache=function(t){this.mMemory=t},o}return o(i,t),i.prototype.getDistinctAd=function(t){for(var o=[],e=[],i=t.sort(function(t,o){return Math.random()>.5?1:-1}),r=0;r<i.length;r++){for(var a=i[r],s=!0,c=0;c<o.length;c++){if(o[c].appid==a.appid){s=!1;break}}s?o.push(a):e.push(a)}return n(o,e)},i.prototype.getAd=function(t){var o=this,n=this.getCache();if(l.isEmpty(n.indexLeft))this.getRemoteAd(function(i){var r=o.initRetValue();i.forEach(function(t){r=o.formatRow(r,t)}),o.setCache(r);var a=o.getDistinctAd(r.indexLeft),s=e(e({},n),{indexLeft:a});t(s)});else{var i=this.getDistinctAd(n.indexLeft),r=e(e({},n),{indexLeft:i});t(r)}},i.prototype.getRemoteAd=function(t){t([])},i.prototype.loadCacheImage=function(t){var o=this;this.cacheImage?t(this.cacheImage):wx.getStorage({key:this.cacheKey,success:function(t){this.cacheImage=t.data,console.log("cacheKey data  ",t.data)},fail:function(){o.cacheImage={},console.log("cacheKey error ")},complete:function(){t(this.this.cacheImage)}})},i.prototype.initRetValue=function(){return{indexBanner:[],indexFloat:[],indexLeft:[],gameEndPage:[],gameRespawnPage:[],exportPage:[]}},i.prototype.formatRow=function(t,o){switch(o.position){case"1":t.indexLeft.push(o);break;case"2":t.indexFloat.push(o);break;case"3":t.indexBanner.push(o);break;case"4":t.gameEndPage.push(o);break;case"5":t.gameRespawnPage.push(o);break;case"6":t.exportPage.push(o);break;default:t.indexLeft.push(o)}return t},i.prototype.downloadImage=function(t,o){window.wx?wx.downloadFile({header:{},url:t,success:function(e){var n=this;200===e.statusCode&&wx.saveFile({tempFilePath:e.tempFilePath,success:function(e){n.cacheImage[""+t]=e.savedFilePath,o(e.savedFilePath)},fail:function(){o(t)},complete:function(){}})},fail:function(){o(t)},complete:function(){}}):o(t)},i}(h),W={UI_ROOT:"moosnow/prefab/ui/",ENTITY_ROOT:"moosnow/prefab/entity/",HTTP_ROOT:"https://liteplay-1253992229.cos.ap-guangzhou.myqcloud.com"},z=function(t){function n(){var o=t.call(this)||this;o.appid="",o.secret="",o.versionNumber="",o.version="2.1.0",o.baseUrl="https://api.liteplay.com.cn/",o.instanceTime=0,o.mLaunchOptions={},o.cfgData=null,o.areaData=null,o._cfgQuene=[],o._localQuene=[],o.instanceTime=Date.now();var e=W.HTTP_ROOT+"/SDK/version.json?t="+Date.now();return l.platform==i.PC?o.request(e,{},"GET",function(t){o.version<t.version&&(console.warn("\u60a8\u7684SDK\u7248\u672c\u53f7["+o.version+"]\u4e0d\u662f\u6700\u65b0\u7248\u672c\uff0c\u8bf7\u5c3d\u5feb\u5347\u7ea7\uff0c\u6700\u65b0\u7248\u672c["+t.version+"]  \u4e0b\u8f7d\u5730\u5740\uff1a"+t.download),l.isEmpty(t.memo)||console.warn(""+t.memo))}):l.platform==i.WX&&window.wx&&o.request(e,{},"GET",function(t){var o=window.wx.aldVersion;(!o||o&&o<t.aldVersion)&&console.warn("\u963f\u62c9\u4e01\u6587\u4ef6\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u4e0b\u8f7d"+t.aldUrl)}),o.getShareInfo(function(t){moosnow.platform.initShare(t)}),o.loadCfg(function(t){console.log("remote config ",t)}),o}return o(n,t),Object.defineProperty(n.prototype,"appLaunchOptions",{get:function(){return l.isEmpty(this.mLaunchOptions)&&moosnow.platform&&moosnow.platform.getLaunchOption&&(this.mLaunchOptions=moosnow.platform.getLaunchOption()),this.mLaunchOptions},enumerable:!0,configurable:!0}),n.prototype.request=function(t,o,e,n,i,r){var a;a=t;var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState){var t=s.responseText;if(s.status>=200&&s.status<400){var o={};try{o=JSON.parse(t)}catch(o){console.error("json parse error ",t),i&&i(o)}n&&n(o)}else console.warn("error ",t),i&&i(t)}},s.timeout=1e4,s.ontimeout=function(t){console.error("error ",t),i&&i(t)},"POST"==e?(s.open("POST",a),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(this._object2Query(o))):(s.open(e,a,!0),s.send())},n.prototype._object2Query=function(t){var o=[];for(var e in t)o.push(e+"="+t[e]);return o.join("&")},n.prototype.isDisableArea=function(t){},n.prototype.finishLoading=function(){this.point("\u52a0\u8f7d\u5b8c\u6210",{time:Date.now()-this.instanceTime})},n.prototype.clickBanner=function(){},n.prototype.clickVideo=function(){},n.prototype.exportUser=function(){},n.prototype.navigate=function(t,o){var e=moosnow.data.getToken(),n=moosnow.platform.getLaunchOption(),i=n.referrerInfo?n.referrerInfo.appId:"\u672a\u77e5",r=l.isEmpty(n.query.wxgamecid)?"":n.query.wxgamecid,a=n.query,s=l.config.moosnowAppId,c=moosnow.data.getNavigateToken(s),h={scene_no:l.isEmpty(n.scene)?"":n.scene,source_appid:l.isEmpty(i)?"":i,query:a,wechat_channel:r,title:t.title,position:t.position,jump_app_icon:t.atlas||t.img,appid:s,uid:e,jump_appid:t.appid,jump_app_name:t.title,tag:c};console.log("navigate navigateData",h),this.request(this.baseUrl+"api/jump/record",h,"POST",function(t){console.log("navigate success ",t),o&&o(t.data)})},n.prototype.navigateEnd=function(t){this.request(this.baseUrl+"api/jump/success",{tag:t},"POST",function(o){console.log("navigateEnd code ",t,o)})},n.prototype.point=function(t,o){void 0===o&&(o=null),this.getAllConfig(function(e){e&&1==e.aldMonitorOn&&(l.platform==i.WX?window.wx&&window.wx.aldSendEvent&&window.wx.aldSendEvent(t,o):l.platform==i.BYTEDANCE&&window.tt&&window.tt.reportAnalytics&&window.tt.reportAnalytics(t,o))})},n.prototype.startGame=function(t){var o={stageId:""+t,stageName:""+t,userId:moosnow.data.getToken()};l.platform==i.WX?window.wx&&window.wx.aldStage?window.wx.aldStage.onStart(o):console.warn(R):l.platform==i.BYTEDANCE?this.point("startgame",o):console.log("startGame -> e",o)},n.prototype.endGame=function(t,o){var e=o?"complete":"fail",n=o?"\u5173\u5361\u5b8c\u6210":"\u5173\u5361\u5931\u8d25",r={stageId:""+t,stageName:""+t,userId:moosnow.data.getToken(),event:e,params:{desc:n}};l.platform==i.WX?window.wx&&window.wx.aldStage?window.wx.aldStage.onEnd(r):console.warn(R):l.platform==i.BYTEDANCE?this.point(o?"gameEnd":"gameFail",{stageId:""+t,stageName:""+t,userId:moosnow.data.getToken()}):console.log("startGame -> e",r)},n.prototype.videoPoint=function(t,o,e){var n=0==t?"\u70b9\u51fb\u89c6\u9891":"\u89c2\u770b\u5b8c\u6210\u89c6\u9891",r={info:o,level:e+""};l.platform==i.WX?this.point(n,r):l.platform==i.BYTEDANCE?this.point(0==t?"clickVideo":"endVideo",r):console.log("startGame -> e",r)},n.prototype.getAllConfig=function(t){var o=this;this.loadCfg(function(n){n.inWhite?t(e(e({},n),{exportAutoNavigate:1,isLimitArea:0})):o.loadArea(function(i){o.disableAd(n,i,function(i){var r=0;i?(1==n.exportAutoNavigate&&(r=0),2==n.exportAutoNavigate&&(r=1),t(e(e({isLimitArea:1},n),o.getCfg(!1)))):(1==n.exportAutoNavigate&&(r=1),2==n.exportAutoNavigate&&(r=1),t(e(e({},n),{exportAutoNavigate:r,isLimitArea:0})))})})})},n.prototype.getCfg=function(t){var o={checkBoxMistouch:0,checkBoxProbabilitys:[100,0,0,0,0],mistouchNum:0,mistouchPosNum:0,bannerShowCountLimit:1,exportBtnNavigate:0,exportAutoNavigate:0,delayShow:0,showAppBox:0,zs_native_click_switch:0,zs_jump_switch:0,mx_native_click_switch:0,mx_jump_switch:0,mistouchInterval:0,nativeErrorShowInter:0,bannerErrorShowInter:0,isStartMistouch:0,isStartVideo:0,loadingAdOn:0,isBlockClose:0};if(t)for(var e in o)isNaN(o[e])||(o[e]=1);return o},n.prototype.defaultCfg=function(t,o){var n=this.getCfg(!1);if(t){if(console.warn("defaultCfg -> moosnow.data.getToken()",moosnow.data.getToken()),console.warn("defaultCfg -> res.whitelist",t.whitelist),t.whitelist){var i=moosnow.data.getToken(),r=!1;if(""!=i)for(var a=0;a<t.whitelist.length;a++)if(i==t.whitelist[a]){r=!0;break}r&&(console.warn("\u767d\u540d\u5355\u524d -> cfg",n),n=e(e({inWhite:r},n),this.getCfg(!0)),console.warn("\u767d\u540d\u5355\u540e -> cfg",n))}o?(console.warn("\u4f7f\u7528\u540e\u53f0\u6570\u636e\u524d -> cfg",n),n=e(e({},n),t),console.warn("\u4f7f\u7528\u540e\u53f0\u6570\u636e\u540e -> cfg",n)):(console.warn("\u4e0d\u4f7f\u7528\u540e\u53f0\u6570\u636e\u524d -> cfg",n),n=e(e({},t),n),console.warn("\u4e0d\u4f7f\u7528\u540e\u53f0\u6570\u636e\u540e -> cfg",n))}return moosnow.platform&&t&&(isNaN(t.bannerShowCountLimit)||(moosnow.platform.bannerShowCountLimit=parseInt(t.bannerShowCountLimit)),isNaN(t.bannerLimitType)||(moosnow.platform.bannerLimitType=parseInt(t.bannerLimitType)),isNaN(t.bannerShowTimeLimit)||(moosnow.platform.bannerShowTimeLimit=parseInt(t.bannerShowTimeLimit))),n},n.prototype.loadCfg=function(t){var o=this;if(l.isEmpty(this.cfgData)){if(this._cfgQuene.push(t),this._cfgQuene.length>1)return;var e="";e=l.config.url?l.config.url+"?t="+Date.now():W.HTTP_ROOT+"/config/"+l.config.moosnowAppId+".json?t="+Date.now(),this.request(e,{},"GET",function(t){if(t.bannerId&&(l.config.bannerId=t.bannerId),t.interId&&(l.config.interId=t.interId),t.blockId&&(l.config.blockId=t.blockId),t.boxId&&(l.config.boxId=t.boxId),t.nativeId&&(l.config.nativeId=t.nativeId),t.videoId&&(l.config.videoId=t.videoId),moosnow.platform.checkLog(t.version)){var e=!(!t||1!=t.mistouchOn);e||console.log("\u603b\u5f00\u5173\u5df2\u5173\u95ed----------------",o.cfgData),o.cfgData=o.defaultCfg(t,e)}else o.cfgData=o.defaultCfg(t,!1),console.log("\u7248\u672c\u5173\u95ed----------------",o.cfgData);o._cfgQuene.forEach(function(t){t(o.cfgData)}),o._cfgQuene=[]},function(){var t=o.defaultCfg(null,!1);o._cfgQuene.forEach(function(o){o(t)}),o._cfgQuene=[],console.log("load config json fail")})}else t(this.cfgData)},n.prototype.loadArea=function(t){var o=this;if(this.areaData)t(this.areaData);else{if(this._localQuene.push(t),this._localQuene.length>1)return;var e=this.baseUrl+"admin/wx_config/getLocation";this.request(e,{},"GET",function(t){o.areaData=t,o._localQuene.forEach(function(t){t(o.areaData)}),o._localQuene=[]},function(){o._localQuene.forEach(function(t){t(o.areaData)}),o._localQuene=[]})}},n.prototype.getForceExport=function(t){var o=this;this.loadCfg(function(e){o.loadArea(function(n){o.disabledForceExport(e,n,function(o){t(o)})})})},n.prototype.disabledForceExport=function(t,o,e){var n=l.formatTime(new Date),i=!1;if(t.disabledForceExport)for(var r=0;r<t.disabledForceExport.length;r++){var a=t.disabledForceExport[r];if(-1!=o.data.city.indexOf(a)||-1!=o.data.province.indexOf(a)||-1!=o.data.area.indexOf(a)){i=!0;break}}i?t.forceExportTime&&2==t.forceExportTime.length?n>t.forceExportTime[0]&&n<t.forceExportTime[1]?e(!0):e(!1):e(!0):e(!1)},n.prototype.getMisTouchNum=function(t){var o=this;this.loadCfg(function(e){o.loadArea(function(n){o.disableAd(e,n,function(o){o?(t(0),console.log("getMisTouchNum",0,"disableAd",o)):(t(parseInt(e.mistouchNum)),console.log("getMisTouchNum",e.mistouchNum,"disableAd",o))})})})},n.prototype.getMistouchPosNum=function(t){var o=this;this.loadCfg(function(e){o.loadArea(function(n){o.disableAd(e,n,function(o){o?(t(0),console.log("getMistouchPosNum",0,"disableAd",o)):(t(parseInt(e.mistouchPosNum)),console.log("getMistouchPosNum",e.mistouchPosNum,"disableAd",o))})})})},n.prototype.getBannerShowCountLimit=function(t){this.loadCfg(function(o){isNaN(o.bannerShowCountLimit)?t(5):t(parseInt(o.bannerShowCountLimit))})},n.prototype.disableAd=function(t,o,e){var n=l.formatTime(new Date),i=!1;if(t&&t.disabledRegion)for(var r=0;r<t.disabledRegion.length;r++){var a=t.disabledRegion[r];if(o&&o.data&&(-1!=o.data.city.indexOf(a)||-1!=o.data.province.indexOf(a)||-1!=o.data.area.indexOf(a))){i=!0;break}}if(this.appLaunchOptions&&t&&(console.log("\u540e\u53f0\u7981\u6b62\u573a\u666f 1 ",t.seachEntryScene),console.log("\u540e\u53f0\u7981\u6b62\u573a\u666f 2 ",t.shareEntryScene),console.log("\u8fdb\u5165\u65f6\u7684\u573a\u666f ",this.appLaunchOptions.scene),1==t.seachEntryOn&&t.seachEntryScene&&-1!=t.seachEntryScene.indexOf(this.appLaunchOptions.scene)||1==t.shareEntryOn&&t.shareEntryScene&&-1!=t.shareEntryScene.indexOf(this.appLaunchOptions.scene)))return e(!0),void console.log("\u540e\u53f0\u7981\u6b62\u573a\u666f ",this.appLaunchOptions.scene);i?t.disabledTime&&2==t.disabledTime.length?n>t.disabledTime[0]&&n<t.disabledTime[1]?e(!0):e(!1):e(!0):e(!1)},n.prototype.getShareInfo=function(t){var o=this;this.request(W.HTTP_ROOT+"/share/"+l.config.moosnowAppId+".json",{appid:l.config.moosnowAppId},"GET",function(o){t(o),moosnow.platform.initShare(o)},function(){o.request(o.baseUrl+"admin/wx_share/getShare",{appid:l.config.moosnowAppId},"POST",function(o){console.log("\u5206\u4eab\u6570\u636e",o.data),t(o.data),moosnow.platform.initShare(o.data)})})},n}(h),Q=function(t){function n(){var o=t.call(this)||this;return o.platformName="qg",o.appSid="",o.bannerHeight=96,o.mBannerWidth=760,o.interLoadedShow=!1,o.prevNavigate=Date.now(),o.mIsClickedNative=!1,o._regisiterWXCallback(),o.initAdService(),o}return o(n,t),Object.defineProperty(n.prototype,"bannerWidth",{get:function(){var t=this.getSystemInfoSync(),o=t.windowWidth;return this.isLandscape(t.screenHeight,t.screenWidth)?this.mBannerWidth=o<760?o:760:this.mBannerWidth=o,this.mBannerWidth},set:function(t){this.mBannerWidth=t},enumerable:!0,configurable:!0}),n.prototype.initAdService=function(){if(window[this.platformName]){var t=this;window[this.platformName].initAdService?window[this.platformName].initAdService({isDebug:!0,appId:l.config.moosnowAppId,success:function(o){console.log("\u521d\u59cb\u5316\u5e7f\u544a"),t._prepareNative()},fail:function(t){console.warn("\u521d\u59cb\u5316\u5e7f\u544a\u9519\u8bef "+t.code+"  "+t.msg)},complete:function(t){console.log("initAdService  complete")}}):(console.log("\u521d\u59cb\u5316\u5e7f\u544a"),t._prepareNative()),moosnow.event.addListener(m.ON_PLATFORM_SHOW,this,this.onAppShow)}},n.prototype.navigate2Mini=function(t,o,e,n){var i=this;if(console.log(b,t),Date.now()-this.prevNavigate<300)console.log(y);else if(this.prevNavigate=Date.now(),window[this.platformName]){var r=t.appid,a=t.path,s=t.extraData,c=t.pkgName;s=s||{},this.supportVersion(1044)?window[this.platformName].navigateToMiniGame({appId:r,path:a,pkgName:c||r,extraData:s,success:function(){window[i.platformName]&&window[i.platformName].aldSendEvent&&window[i.platformName].aldSendEvent("\u8df3\u8f6c",{position:t.position,appid:r,img:t.atlas||t.img}),moosnow.http.exportUser(),o&&o()},fail:function(t){console.log("navigateToMiniProgram error ",t),e&&e()},complete:function(){n&&n()}}):console.log(D)}else o&&o()},n.prototype.supportVersion=function(t){return this.getSystemInfoSync().platformVersion>=t},n.prototype._onBannerError=function(t){console.warn("banner___error:",t.errCode," msg ",t.errMsg),this.banner&&(this.banner.hide(),this.banner.offResize(this._onBannerResize),this.banner.offError(this._onBannerError),this.banner.offLoad(this._onBannerLoad),this.banner.offHide(),this.banner.destroy(),this.banner=null)},n.prototype._prepareBanner=function(){window[this.platformName].createBannerAd&&(this.hideBanner(),this.banner=this._createBannerAd(),this.banner.onResize(this._onBannerResize.bind(this)),this.banner.onError(this._onBannerError.bind(this)),this.banner.onLoad(this._onBannerLoad.bind(this)),this.banner.onHide(this._onBannerHide.bind(this)))},n.prototype._createBannerAd=function(){if(window[this.platformName]&&window[this.platformName].createBannerAd){var t={left:0,top:0,width:this.bannerWidth,height:this.bannerHeight},o=this._getBannerPosition(),n=e(e({},t),o),i=window[this.platformName].createBannerAd({adUnitId:this.getBannerId(),style:n});return console.log(" create banner ",i,"param style ",n),i}},n.prototype._onBannerResize=function(t){console.log("_bottomCenterBanner  ",this.banner)},n.prototype._getBannerPosition=function(){var t=this.getSystemInfoSync(),o=t.screenWidth,e=t.screenHeight,n=t.statusBarHeight,i=t.notchHeight||0,r=this.bannerHorizontal,a=this.bannerVertical,s=0,c=0;return a==p.TOP?s=n+i:a==p.CENTER?s=(e-this.bannerHeigth)/2:a==p.BOTTOM&&(s=e-this.bannerHeigth-16),r==d.LEFT?c=0:r==d.RIGHT?c=o-this.bannerWidth:r==d.CENTER&&(c=(o-this.bannerWidth)/2),console.log("OPPOModule -> _getBannerPosition -> left",c,"top",s),{left:c,top:s}},n.prototype._resetBanenrStyle=function(t){var o=this._getBannerPosition();this.banner&&(this.banner.style={top:o.top,left:o.left,width:t.width,height:t.height}),console.log("_resetBanenrStyle this.banner ",this.banner,"set style ",o)},n.prototype._onBannerHide=function(){console.log("banner \u5df2\u9690\u85cf ")},n.prototype.showBanner=function(t,o,e,n,i,r){var a=this;void 0===t&&(t=!0),void 0===e&&(e=d.CENTER),void 0===n&&(n=p.BOTTOM),void 0===i&&(i=0),console.log(g),this.bannerCb=o,window[this.platformName]&&(this.bannerHorizontal=e,this.bannerVertical=n,this.bannerStyle=r,t?moosnow.http.getAllConfig(function(t){0!=t.mistouchNum?(console.log("\u540e\u53f0\u5f00\u542f\u4e86banner\uff0c\u6267\u884c\u663e\u793a"),a._showBanner()):console.log("\u540e\u53f0\u5173\u95ed\u4e86banner\uff0c\u4e0d\u6267\u884c\u663e\u793a")}):this._showBanner())},n.prototype._showBanner=function(){if(this._prepareBanner(),this.banner){this._resetBanenrStyle({width:this.banner.style.width,height:this.banner.style.height});var t=this.banner.show();t&&t.then(function(){console.log("\u663e\u793a\u6210\u529f\u540e")})}},n.prototype.hideBanner=function(){console.log(f),window[this.platformName]&&this.banner&&this.banner.hide&&(this.banner.hide(),this.banner.offResize(null),this.banner.offError(null),this.banner.offLoad(null),this.banner.offHide(null),this.banner.destroy(),this.banner=null)},n.prototype.createRewardAD=function(t){if(!moosnow.platform.videoLoading)if(window[this.platformName]){if(window[this.platformName].createRewardedVideoAd){if(l.isEmpty(this.video)){if(l.isEmpty(this.getVideoId()))return void console.warn(N);this.video=window[this.platformName].createRewardedVideoAd({adUnitId:this.getVideoId()})}else this.video.offClose(moosnow.platform._onVideoClose),this.video.offError(moosnow.platform._onVideoError),this.video.offLoad(moosnow.platform._onVideoLoad);this.video.onError(moosnow.platform._onVideoError),this.video.onClose(moosnow.platform._onVideoClose),this.video.onLoad(moosnow.platform._onVideoLoad),moosnow.platform.videoLoading=!0,this.video.load()}}else moosnow.platform.videoCb(u.END)},n.prototype._onVideoLoad=function(){console.log(A),moosnow.platform.videoLoading=!1,this.video&&this.video.show()},n.prototype.prepareInter=function(){if(l.isEmpty(this.interId))console.warn(x);else if(window[this.platformName])if(this.supportVersion("1061")){if("function"!=typeof window[this.platformName].createInterstitialAd)return;this.inter=window[this.platformName].createInterstitialAd({adUnitId:this.interId}),this.inter.onLoad(this._onInterLoad.bind(this)),this.inter.onClose(this._onInterClose.bind(this)),this.inter.load()}else{if("function"!=typeof window[this.platformName].createInsertAd)return;this.inter=window[this.platformName].createInsertAd({adUnitId:this.interId}),this.inter.onLoad(this._onInterLoad.bind(this)),this.inter.onShow(this._onInterOnShow.bind(this)),this.inter.load()}},n.prototype.showInter=function(){this.inter?this.inter.show():this.interLoadedShow=!0},n.prototype._onInterLoad=function(){this.interLoadedShow&&(this.inter?this.inter.show():this.interLoadedShow=!1)},n.prototype._onInterOnShow=function(){this.inter&&this.inter.load()},n.prototype.showAutoBanner=function(){console.log(" oppo \u4e0d\u652f\u6301\u81ea\u52a8")},n.prototype.reportMonitor=function(t,o){window[this.platformName]&&window[this.platformName].reportMonitor&&window[this.platformName].reportMonitor("game_scene",0)},n.prototype._prepareNative=function(){window[this.platformName]&&"function"==typeof window[this.platformName].createNativeAd&&(this.native=window[this.platformName].createNativeAd({adUnitId:parseInt(""+this.nativeId)}),this.native.onLoad(this._onNativeLoad.bind(this)),this.native.onError(this._onNativeError.bind(this)),this.nativeLoading=!0)},n.prototype._onNativeLoad=function(t){this.nativeLoading=!1,console.log(T,t),t&&t.adList&&t.adList.length>0?(this.nativeAdResult=t.adList[0],l.isEmpty(this.nativeAdResult.adId)||(console.log(B),this.native.reportAdShow({adId:this.nativeAdResult.adId})),l.isFunction(this.nativeCb)&&this.nativeCb(l.deepCopy(this.nativeAdResult))):(console.log(L),l.isFunction(this.nativeCb)&&this.nativeCb(null))},n.prototype._onNativeError=function(t){this.nativeLoading=!1,this.nativeAdResult=null,20003==t.code?this.nativeIdIndex<this.nativeId.length-1?(console.log(_,t),this.nativeIdIndex+=1,this._destroyNative(),this._prepareNative(),this.nativeCb(null)):(console.log(k),this.nativeIdIndex=0,l.isFunction(this.nativeCb)&&this.nativeCb(null)):(console.log(E,t),l.isFunction(this.nativeCb)&&this.nativeCb(null))},n.prototype._destroyNative=function(){this.nativeLoading=!1,this.native.offLoad(),this.native.offError(),this.native.destroy(),console.log(F)},n.prototype.showNativeAd=function(t){this.nativeCb=t,this.native&&this.native.load()},n.prototype.clickNative=function(t){this.nativeAdResult&&!l.isEmpty(this.nativeAdResult.adId)&&(this.mClickedNativeCallback=t,this.mIsClickedNative=!0,console.log(k,this.nativeAdResult.adId),this.native.reportAdClick({adId:this.nativeAdResult.adId}))},n.prototype.onAppShow=function(){this.mIsClickedNative&&(this.mIsClickedNative=!1,l.isFunction(this.mClickedNativeCallback)&&this.mClickedNativeCallback())},n.prototype.hasShortcutInstalled=function(t,o){window[this.platformName]&&window[this.platformName].hasShortcutInstalled&&window[this.platformName].hasShortcutInstalled({success:function(o){t&&t(!!o),o?console.log("\u5df2\u521b\u5efa"):console.log("\u672a\u521b\u5efa")},fail:function(t){o&&o(t)}})},n.prototype.installShortcut=function(t,o,e){void 0===o&&(o="\u65b9\u4fbf\u4e0b\u6b21\u5feb\u901f\u542f\u52a8"),window[this.platformName]&&window[this.platformName].installShortcut&&window[this.platformName].installShortcut({message:o,success:function(o){t&&t(o),console.log("\u521b\u5efa\u6210\u529f")},fail:function(t){e&&e(t)}})},n.prototype.exitApplication=function(){window[this.platformName]&&window[this.platformName].exitApplication&&window[this.platformName].exitApplication()},n}(V),j=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.TOKEN="MOOSNOW_SDK_TOKEN",o.COIN="MOOSNOW_SDK_COIN",o.NAVIGATE_TOKEN="MOOSNOW_SDK_NAVIGATE_TOKEN",o.mUserToken="",o.VIBRATE_SWITCH="MOOSNOW_VIBRATE_SWITCH",o.USER_PRIZE_KEY="MOOSNOW_USER_PRIZE_KEY",o.mCoin=0,o.mCurrentMisTouchCount=0,o.mChannel_id="0",o.mChannel_appid="0",o}return o(e,t),e.prototype.initCoin=function(t){null==moosnow.setting._getValue(this.COIN,null)&&moosnow.setting.setValue(this.COIN,t)},e.prototype.getCoin=function(){return 0==this.mCoin&&(this.mCoin=moosnow.setting.getInt(this.COIN,0)),this.mCoin},e.prototype.subCoin=function(t){this.mCoin-=t,moosnow.event.sendEventImmediately(m.COIN_CHANGED,this.mCoin)},e.prototype.addCoin=function(t){this.mCoin+=t,moosnow.event.sendEventImmediately(m.COIN_CHANGED,this.mCoin)},e.prototype.setCoin=function(t){this.mCoin=t,moosnow.event.sendEventImmediately(m.COIN_CHANGED,this.mCoin)},e.prototype.saveCoin=function(){moosnow.setting.setValue(this.COIN,this.mCoin)},e.prototype.getToken=function(){return l.isEmpty(this.mUserToken)&&(this.mUserToken=moosnow.setting.getString(this.TOKEN,"")),this.mUserToken},e.prototype.setToken=function(t){moosnow.setting.setValue(this.TOKEN,t)},e.prototype.getNavigateToken=function(t){return l.isEmpty(this.mNavigateToken)&&(this.mNavigateToken=Date.now()+"_"+t+"_"+this.getToken()),this.mNavigateToken},e.prototype.resetNavigateToken=function(){this.mNavigateToken=null},e.prototype.getCurrentMisTouchCount=function(){return this.mCurrentMisTouchCount},e.prototype.setCurrentMisTouchCount=function(t){this.mCurrentMisTouchCount=t},e.prototype.getChannelId=function(){return this.mChannel_id},e.prototype.setChannelId=function(t){this.mChannel_id=t},e.prototype.getChannelAppId=function(){return this.mChannel_appid},e.prototype.setChannelAppId=function(t){this.mChannel_appid=t},e.prototype.getVibrateSetting=function(){return moosnow.setting.getBool(this.VIBRATE_SWITCH,!0)},e.prototype.setVibrateSetting=function(t){moosnow.setting.setBool(this.VIBRATE_SWITCH,t),moosnow.event.sendEventImmediately(m.VIBRATESWITCH_CHANGED,t)},e.prototype.getPrizeBox=function(){return this.mPrizeBox||(this.mPrizeBox={}),this.mPrizeBox},e.prototype.clearPrizeBox=function(){this.mPrizeBox={}},e.prototype.lockPrizeBox=function(t,o,e){void 0===e&&(e=0);var n=this.getPrizeBox();n[t]={prizeId:t,type:0==o?0:1,coinNum:e},this.mPrizeBox=n},e.prototype.getUserPrizeBoxById=function(t){return this.getPrizeBox()[t]},e.prototype.getPrizeKey=function(){return null==this.mPrizeKey&&(this.mPrizeKey=3),this.mPrizeKey},e.prototype.addPrizeKey=function(t){this.mPrizeKey+=t},e.prototype.clearPrizeKey=function(){this.mPrizeKey=null,moosnow.setting.setValue(this.USER_PRIZE_KEY,"")},e}(h),G=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onEnable=function(){},e.prototype.getInt=function(t,o){var e=this._getValue(t,o);return parseInt(e)},e.prototype.getFloat=function(t,o){var e=this._getValue(t,o);return parseFloat(e)},e.prototype.getBool=function(t,o){var e;return e=1==o?"true":"false","true"==this.getString(t,e)},e.prototype.getString=function(t,o){return this._getValue(t,o)},e.prototype.getObject=function(t,o){var e=this._getValue(t,o);return e&&""!=e?JSON.parse(e):null},e.prototype.setObject=function(t,o){var e="";o&&(e=JSON.stringify(o)),this.setValue(t,e)},e.prototype.setBool=function(t,o){1==o?this.setValue(t,"true"):this.setValue(t,"false")},e.prototype.setValue=function(t,o){window.localStorage.setItem(t,o)},e.prototype.appendInt=function(t,o){var e=this.getInt(t,0),n=parseInt(o)+e;return this.setValue(t,n),n},e.prototype.appendFloat=function(t,o){var e=this.getFloat(t,0),n=parseFloat(o)+e;this.setValue(t,n)},e.prototype.removeValueOfKey=function(t){window.cc&&window.cc.sys&&window.cc.sys.localStorage?window.cc.sys.localStorage.removeItem(t):window.Laya&&window.Laya.LocalStorage?window.Laya.LocalStorage.removeItem(t):window.localStorage.removeItem(t)},e.prototype.removeAll=function(){window.cc&&window.cc.sys&&window.cc.sys.localStorage||(window.Laya&&window.Laya.LocalStorage?Laya.LocalStorage.clear():window.localStorage.clear())},e.prototype._getValue=function(t,o){var e="";return null!=(e=window.cc&&window.cc.sys&&window.cc.sys.localStorage?window.cc.sys.localStorage.getItem(t):window.Laya&&window.Laya.LocalStorage?window.Laya.LocalStorage.getItem(t):window.localStorage.getItem(t))&&""!=e||(e=o),e},e}(h),q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getRemoteAd=function(o){var e=this,n=W.HTTP_ROOT+"/exportConfig/"+l.config.moosnowAppId+".json?t="+Date.now();moosnow.http.request(n,{},"GET",function(t){o(t),console.log("WXAdModule getRemoteAd",t)},function(){t.prototype.getRemoteAd.call(e,o),console.log("getRemoteAd fail")},function(){console.log("getRemoteAd complete")})},e}(U),K=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.mErrorNum=0,o}return o(e,t),e.prototype.getRemoteAd=function(t){var o=this,e=W.HTTP_ROOT+"/exportConfig/"+l.config.moosnowAppId+".json?t="+Date.now();moosnow.http.request(e,{},"GET",function(o){t(o),console.log("WXAdModule getRemoteAd",o)},function(e){o.mErrorNum++,o.mErrorNum<4?o.getRemoteAd(t):(o.mErrorNum=0,o.repairAd(t)),console.log("getRemoteAd fail")},function(){console.log("getRemoteAd complete")})},e.prototype.repairAd=function(t){var o=this.baseUrl+"wx_export/getExport",e={appid:l.config.moosnowAppId};moosnow.http.request(o,e,"POST",function(o){o.data.sort(function(){return Math.random()>.5?1:-1}),t&&t(o.data)},function(){t([]),console.log("getRemoteAd fail")},function(){console.log("getRemoteAd complete")})},e}(U),X={ARTICLE:"article",VIDEO:"video",TOKEN:"token",LINK:""},Z=function(){return function(){}}(),Y=function(t){function n(){var o=t.call(this)||this;return o.platformName="tt",o.recordRes=null,o.recordCb=null,o.recordNumber=0,o.moreGameCb=null,o._regisiterWXCallback(),o._registerTTCallback(),o.initRecord(),o}return o(n,t),Object.defineProperty(n.prototype,"bannerWidth",{get:function(){return this.mBannerWidth},set:function(t){this.mBannerWidth=t},enumerable:!0,configurable:!0}),n.prototype._registerTTCallback=function(){var t=this;window[this.platformName]&&(window[this.platformName].onMoreGamesModalClose&&window[this.platformName].onMoreGamesModalClose(function(o){console.log("modal closed",o),t.moreGameCb&&t.moreGameCb(0)}),window[this.platformName].onNavigateToMiniGameBox?window[this.platformName].onNavigateToMiniGameBox(function(t){console.log("onNavigateToMiniGameBox",t)}):window[this.platformName].onNavigateToMiniProgram&&window[this.platformName].onNavigateToMiniProgram(function(t){console.log("onNavigateToMiniProgram",t)}))},n.prototype.showInter=function(){var t=this;if(window[this.platformName]&&window[this.platformName].createInterstitialAd)if(l.isEmpty(this.interId))console.warn(x);else{this.inter&&this.inter.destroy(),this.inter=window[this.platformName].createInterstitialAd({adUnitId:this.interId});var o=this.inter.load();o&&o.then(function(){t.inter.show()}).catch(function(t){console.log(t)})}},n.prototype._onBannerResize=function(t,o){var e=this.getSystemInfoSync(),n=(e.windowWidth,e.windowHeight);this.bannerWidth=o.width,this.bannerHeigth=isNaN(o.height)?this.bannerWidth/16*9:o.height;this.bannerHeigth;var i=this._getBannerPosition();this.banner[t]&&(this.banner[t].style.top=i.top,this.banner[t].style.left=i.left)},n.prototype.initRecord=function(){window[this.platformName]&&window[this.platformName].getGameRecorderManager&&(this.recordObj=window[this.platformName].getGameRecorderManager())},n.prototype.clipRecord=function(t,o){void 0===t&&(t=[2,2]),this.recordObj&&(this.recordNumber++,console.log("clipRecord",this.recordNumber),this.recordObj.recordClip({timeRange:t,success:function(t){console.log("clipRecord \u6210\u529f ",t),l.isFunction(o)&&o(t)}}))},n.prototype.startRecord=function(t,o){var e=this;if(void 0===t&&(t=300),void 0===o&&(o=null),console.log("record startRecord"),this.recordObj){this.recordNumber=0,this.recordCb=null,this.recordRes=null,this.recordObj.onStart(function(t){console.log("record onStart"),o&&o(t)});this.recordRes;this.recordObj.onStop(function(t){console.log("on stop ",t),e.recordNumber>=1?e.recordObj.clipVideo({path:t.videoPath,success:function(t){console.log("record clip succes:",t),e.recordRes=t,console.log("record clip recordRes :",e.recordRes),e.recordCb&&e.recordCb(t)},fail:function(){console.log("record clip fail:",t),e.recordRes=t,e.recordCb&&e.recordCb(t)}}):(e.recordRes=t,e.recordCb&&e.recordCb(t))}),this.recordObj.start({duration:t})}else o&&o(!1)},n.prototype.stopRecord=function(t){void 0===t&&(t=null),console.log(" stop Record  callback  ",!!t),this.recordObj?(console.log("record stop recordRes ",this.recordRes),this.recordRes?l.isFunction(t)&&t(this.recordRes):(this.recordCb=t,this.recordObj.stop(),console.log("record stop  ",this.recordRes))):t&&t(!1)},n.prototype.pauseRecord=function(){this.recordObj&&this.recordObj.pause()},n.prototype.resumeRecord=function(){this.recordObj&&this.recordObj.resume()},n.prototype.share=function(t,o,e){void 0===t&&(t={}),this.currentShareCallback=o,this.currentShortCall=e,console.log("\u662f\u5426\u6709\u56de\u8c03\uff1a",e);var n=this._buildShareInfo(t);console.log("shareInfo:",n),window[this.platformName]&&window[this.platformName].shareAppMessage?window[this.platformName].shareAppMessage(n):this.currentShareCallback(!0)},n.prototype._buildShareInfo=function(t){var o=this,e="",n="";if(this.shareInfoArr.length>0){var i=this.shareInfoArr[r.randomNumBoth(0,this.shareInfoArr.length-1)];e=i.title,n=i.img}var a=X.LINK;t&&-1!=[X.LINK,X.ARTICLE,X.TOKEN,X.VIDEO].indexOf(t.channel)&&(a=t.channel);var s=this.recordRes&&this.recordRes.videoPath?this.recordRes.videoPath:"";return console.log("video path ",s),{channel:a,title:e,imageUrl:n,query:moosnow.http._object2Query(t),extra:{videoPath:s,videoTopics:[e],withVideoId:!0},success:function(t){console.log("share video success :",t),o.shareVideoId=t.videoId,o.currentShareCallback&&o.currentShareCallback(!0)},fail:function(t){if(console.log("share video fail ",t),console.log("index of : ",t.errMsg.indexOf("short")),t&&t.errMsg&&-1!=t.errMsg.indexOf("short")&&o.currentShortCall)return console.log("\u65f6\u95f4\u592a\u77ed \u6267\u884c\u56de\u8c03",o.currentShortCall.toString()),void o.currentShortCall(t);o.currentShareCallback&&o.currentShareCallback(!1)}}},n.prototype.navigate2Video=function(t){window[this.platformName]&&window[this.platformName].navigateToVideoView&&(console.log("navigate2Video id ",t||this.shareVideoId,t,this.shareVideoId),(t||this.shareVideoId)&&window[this.platformName].navigateToVideoView({videoId:t||this.shareVideoId,success:function(t){console.log("navigate2Video success ",t)},fail:function(t){console.log("navigate2Video err ",t),t.errCode}}))},n.prototype._onBannerLoad=function(t){this.banner[t]&&!this.banner[t].isLoaded&&(this.banner[t].isLoaded=!0,this.banner[t].show())},n.prototype.showBanner=function(t,o,e,n,i,r){var a=this;void 0===t&&(t=!0),void 0===e&&(e=d.CENTER),void 0===n&&(n=p.BOTTOM),void 0===i&&(i=0),console.log(g),this.bannerCb=o,window[this.platformName]&&(this.bannerHorizontal=e,this.bannerVertical=n,this.bannerStyle=r,this.currentBannerId=this._createBannerAd(i),t?moosnow.http.getAllConfig(function(t){0!=t.mistouchNum?(console.log("\u540e\u53f0\u5f00\u542f\u4e86banner\uff0c\u6267\u884c\u663e\u793a"),a._showBanner()):console.log("\u540e\u53f0\u5173\u95ed\u4e86banner\uff0c\u4e0d\u6267\u884c\u663e\u793a")}):this._showBanner())},n.prototype._showBanner=function(){var t=this,o=this.banner[this.currentBannerId];if(o&&(o.hide(),this._resetBanenrStyle({banner:o,width:o.style.width,height:o.style.realHeight}),o.isLoaded)){var e=o.show();e&&e.then(function(){t._resetBanenrStyle({banner:o,width:o.style.width,height:o.style.realHeight})})}},n.prototype._resetBanenrStyle=function(t){if(console.log("\ud83d\ude80 ~ file: TTModule.ts ~ line 376 ~ TTModule ~ _resetBanenrStyle ~ e",t),this.bannerStyle)this.applyCustomStyle(t);else{var o=this._getBannerPosition();console.log("\ud83d\ude80 ~ file: TTModule.ts ~ line 384 ~ TTModule ~ _resetBanenrStyle ~ style",o),t.banner.style.top=o.top,t.banner.style.left=o.left}},n.prototype.showAppBox=function(t,o){var e=this;void 0===o&&(o=!0),this.moreGameCb=t,window[this.platformName]&&window[this.platformName].showMoreGamesModal&&moosnow.http.getAllConfig(function(t){o?t&&1==t.showAppBox&&e._showMoreGamesModal():e._showMoreGamesModal()})},n.prototype._getAppLaunchOptions=function(t){var o=[];moosnow.ad.getAd(function(e){0!=e.indexLeft.length&&(e.indexLeft.forEach(function(t){var e=new Z;e.appId=t.appid,e.query=t.path||"1=1",e.extraData=t.extraData||{},o.push(e)}),console.log("appLaunchOptions",o),t(o))})},n.prototype._showMoreGamesModal=function(){var t=this;"ios"!=this.getSystemInfoSync().platform&&this._getAppLaunchOptions(function(o){console.log("_showMoreGamesModal appLaunchOption",o);window[t.platformName].showMoreGamesModal({appLaunchOptions:o,success:function(t){console.log("show app box success",t)},fail:function(t){console.log("show app box fail",t)}})})},n.prototype.showMoreGameBanner=function(){if(window[this.platformName]&&window[this.platformName].createMoreGamesBanner){var t=this.getSystemInfoSync();if("ios"!=t.platform&&"ios"!==t.platform){var o=[];moosnow.ad.getAd(function(t){0!=t.indexLeft.length&&t.indexLeft.forEach(function(t){var e=new Z;e.appId=t.appid,e.query=t.path||"1=1",e.extraData=t.extraData||{},o.push(e)})});var e=window[this.platformName].createMoreGamesBanner({style:{left:20,top:0,width:150,height:40},appLaunchOptions:o,success:function(t){console.log("show app box success",t.errMsg)},fail:function(t){console.log("show app box fail",t.errMsg)}});e.show(),e.onTap(function(){console.log("\u70b9\u51fb\u8df3\u8f6c\u6e38\u620f\u76d2\u5b50")})}}},n.prototype.showMoreGameButton=function(t,o,n){var i=this;if(void 0===n&&(n=null),window[this.platformName]&&window[this.platformName].createMoreGamesButton){var r={left:this.getSystemInfoSync().windowWidth-80-30,top:40,width:80,height:80,lineHeight:80,backgroundColor:"#ff0000",textColor:"#ffffff",textAlign:"center",fontSize:16,borderRadius:0,borderWidth:1,borderColor:"#ff0000"},a=e(e({},r),n);this._moreGameBotton?this._moreGameBotton.show():this._getAppLaunchOptions(function(t){cc.loader.loadRes("texture/game/more.png",cc.Texture2D,function(e,n){e||(i._moreGameBotton=window[i.platformName].createMoreGamesButton({type:"image",image:n.url,actionType:"box",style:a,appLaunchOptions:t,onNavigateToMiniGame:function(t){console.log("\u8df3\u8f6c\u5176\u4ed6\u5c0f\u6e38\u620f",t),o&&o(1,t)}}),i._moreGameBotton.show(),i._moreGameBotton.onTap(function(){console.log("\u70b9\u51fb\u66f4\u591a\u6e38\u620f"),o&&o(2,null)}))})})}},n.prototype.hideMoreGameButton=function(){this._moreGameBotton&&this._moreGameBotton.hide()},n.prototype.isIphone=function(){return!!window[this.platformName]&&"ios"==this.getSystemInfoSync().platform},n.prototype.navigate2Mini=function(t,o,e,n){console.log("tt navigate2Mini "),this.showAppBox(function(){console.log("tt showAppBox close ")},!1)},n.prototype.checkFollowAwemeSate=function(t,o){window[this.platformName]&&window[this.platformName].checkFollowAwemeState?window[this.platformName].checkFollowAwemeState({success:function(o){console.log("---- check success, res:",o);var e=o.hasFollowed;t(e)},fail:function(t){o(t)},complete:function(t){}}):t(!0)},n.prototype.openAwemeUserProile=function(t,o){window[this.platformName]&&window[this.platformName].openAwemeUserProfile?window[this.platformName].openAwemeUserProfile({success:function(o){console.log("---- open success, res: ",o);var e=o.hasFollowed;t(e)},fail:function(t){o(t)},complete:function(t){}}):t(!0)},n}(V),J=function(t){function e(){var o=t.call(this)||this;return o.platformName="qq",o.mBannerWidth=320,o.bannerHeigth=Math.round(o.bannerWidth/300*72.8071),o._regisiterWXCallback(),o.initBanner(),o}return o(e,t),Object.defineProperty(e.prototype,"bannerWidth",{get:function(){var t=this.getSystemInfoSync(),o=t.windowWidth;return this.isLandscape(t.screenHeight,t.screenWidth)?this.mBannerWidth=o<320?o:320:this.mBannerWidth=o,this.mBannerWidth},set:function(t){this.mBannerWidth=t},enumerable:!0,configurable:!0}),e.prototype._createBannerAd=function(t,o){if(void 0===o&&(o=!0),window[this.platformName]&&window[this.platformName].createBannerAd){var e=this.getBannerId(t);if(!l.isEmpty(e)){var n=this.bannerHeigth=Math.round(320/300*72.8071),i=this._getBannerPosition(),r={top:i.top,left:i.left,width:320,height:n};return this.hideBanner(),console.log(" QQModule ~ _createBannerAd ~ style",r,e),this.banner[e]=window[this.platformName].createBannerAd({adUnitId:e,style:r}),this.banner[e]&&(this.banner[e].onResize(this._onBannerResize),this.banner[e].onError(this._onBannerError),this.banner[e].onLoad(this._onBannerLoad.bind(this))),e}console.warn(w)}},e.prototype.showBanner=function(t,o,e,n,i,r){var a=this;void 0===t&&(t=!0),void 0===e&&(e=d.CENTER),void 0===n&&(n=p.BOTTOM),void 0===i&&(i=-1),console.log(g),this.bannerCb=o,this.isBannerShow=!0,window[this.platformName]&&(this.bannerHorizontal=e,this.bannerVertical=n,this.bannerStyle=r,this.hideBanner(),t?moosnow.http.getAllConfig(function(t){0!=t.mistouchNum?(console.log("\u540e\u53f0\u5f00\u542f\u4e86banner\uff0c\u6267\u884c\u663e\u793a"),a.currentBannerId=a._createBannerAd(i),a._showBanner()):console.log("\u540e\u53f0\u5173\u95ed\u4e86banner\uff0c\u4e0d\u6267\u884c\u663e\u793a")}):(this.currentBannerId=this._createBannerAd(i),this._showBanner()))},e.prototype._showBanner=function(){var t=this.banner[this.currentBannerId];t?t.show():console.log("banner \u4e0d\u5b58\u5728")},e.prototype._onBannerLoad=function(){console.log("banner \u52a0\u8f7d\u7ed3\u675f bannerId");var t=this.banner[this.currentBannerId];t?t.show():console.log("banner \u4e0d\u5b58\u5728")},e.prototype._onBannerResize=function(t){console.log("Resize\u540e\u6b63\u5f0f\u5bbd\u9ad8:",t)},e.prototype.showAppBox=function(t,o){var e=this;void 0===o&&(o=!0),window[this.platformName]&&window[this.platformName].createAppBox&&(this.mOnBoxCallback=t,console.log("showAppBox"),moosnow.http.getAllConfig(function(t){o?t&&1==t.showAppBox?(e.box||(e.box=window[e.platformName].createAppBox({adUnitId:e.boxId}),e.box.onClose(e.onBoxClose.bind(e))),e.box.load().then(function(){e.box.show()})):(l.isFunction(e.mOnBoxCallback)&&e.mOnBoxCallback(-1),console.log("\u540e\u53f0\u4e0d\u5141\u8bb8\u663e\u793aBox\uff0c\u5982\u6709\u9700\u8981\u8bf7\u8054\u7cfb\u8fd0\u8425")):(e.box||(e.box=window[e.platformName].createAppBox({adUnitId:e.boxId}),e.box.onClose(e.onBoxClose.bind(e))),e.box.load().then(function(){e.box.show()}))}))},e.prototype.hideBanner=function(){if(console.log(" hideBanner ~ this.banner",this.banner),this.banner)for(var t in this.banner)this.banner[t].hide(),this.banner[t].destroy(),delete this.banner[t]},e.prototype.hideAppBox=function(t){var o=this;if(this.box){this.box.offClose(this.onBoxClose);var e=this.box.destroy();console.log("box destroy ",e),e&&e.then(function(){console.log("destroy successfully ",e),o.box=null,l.isFunction(t)&&t(!0)}).catch(function(){console.log("destroy fail ",e),o.box=null,l.isFunction(t)&&t(!1)})}},e.prototype.onBoxClose=function(){l.isFunction(this.mOnBoxCallback)&&this.mOnBoxCallback(0)},e.prototype.showBlock=function(t,o,e,n){if(void 0===t&&(t=P.CENTER),void 0===o&&(o=M.TOP),void 0===e&&(e=1),void 0===n&&(n=5),window[this.platformName]&&window[this.platformName].createBlockAd){this.block&&this.block.destroy(),this.blockHorizontal=t,this.blockVertical=o;var i=this._getBlockPosition();console.log("QQModule -> showBlock -> style",i),this.block=window[this.platformName].createBlockAd({adUnitId:this.getBlockId(),orientation:1==e?"landscape":"vertical",size:n,style:{left:i.left,top:i.top}}),console.log("QQModule -> showBlock ->  this.block",this.block),this.block.onLoad(this._onBlockLoad.bind(this)),this.block.onError(this._onBlockError.bind(this)),this.block.onResize(this._onBlockResize.bind(this))}},e.prototype.hideBlock=function(){this.block&&this.block.hide()},e.prototype._onBlockLoad=function(t){console.log("QQModule -> _onBlockLoad -> res",t),this.block.show().then(function(t){console.log("QQModule -> _onBlockLoad -> showResult",t)})},e.prototype._onBlockError=function(t){console.log("QQModule -> _onBlockError -> res",t)},e.prototype._getBlockPosition=function(){var t=this.blockHorizontal,o=this.blockVertical,e=this.getSystemInfoSync(),n=e.windowWidth,i=e.windowHeight,r=0,a=0;return o==M.TOP?r=16:o==M.CENTER?r=(i-this.blockHeigth)/2:o==M.BOTTOM&&(r=i-this.blockHeigth-16),t==P.LEFT?a=16:t==P.RIGHT?a=n-this.blockWidth-16:t==P.CENTER&&(a=(n-this.blockWidth)/2),console.log("QQModule -> _getBlockPosition -> left",a,"top",r),{left:a,top:r}},e.prototype._onBlockResize=function(t){var o=this._getBlockPosition();console.log("QQModule -> _onBlockResize -> style",o),this.block.style.top=o.top,this.block.style.left=o.left,console.log("\u91cd\u7f6eblock\u4f4d\u7f6e",o)},e}(V),$=function(){return function(){this.appid="",this.boxAppid="",this.desc="",this.img="",this.path="",this.title="",this.atlas="",this.pkgName="",this.extraData="",this.position="",this.onCancel=null,this.index=0,this.refresh=!1,this.showIds=null,this.source=null}}(),tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getRemoteAd=function(t){var o={apk_id:l.config.moosnowAppId};moosnow.http.request("https://platform.qwpo2018.com/api/apk_ad/index",o,"POST",function(o){var e=o.data;if(e.sort(function(){return Math.random()>.5?1:-1}),console.log("\u63a5\u53e3\u6570\u636e",o.data),t){for(var n=[],i=0;i<e.length;i++){var r=e[i],a=new $;a.appid=r.link_appid,a.img=r.link_img,a.path=r.link_path,a.title=r.link_name,a.pkgName=r.link_page,a.desc=r.link_des,n.push(a)}t(n)}},function(){t([]),console.log("getRemoteAd fail")},function(){console.log("getRemoteAd complete")})},e}(U),ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.checkVersion=function(o,e){var n=this;moosnow.http.loadCfg(function(o){var i=t.prototype.checkLog.call(n,o.zs_version);e(i)})},e.prototype.login=function(t,o){window[this.platformName]?window[this.platformName].login({success:function(o){moosnow.http.request("https://platform.qwpo2018.com/api/oppo_login/index",{apk_id:l.config.moosnowAppId,code:o.data.token},"POST",function(o){moosnow.data.setToken(o.data.user_id),t&&t(o.data),console.log("platformLogin success ",o)},function(o){t&&t(null),console.log("platformLogin fail ",o)})},fail:function(t){o&&o(t)}}):t&&t()},e.prototype.navigate2Mini=function(o,e,n,i){var r=this;t.prototype.navigate2Mini.call(this,o,function(){r.navigateCallback(o.appid),l.isFunction(e)&&e()},n,i)},e.prototype.navigateCallback=function(t){var o={user_id:moosnow.data.getToken(),apk_id:l.config.moosnowAppId,appid:t,link_id:t};console.log("\u8df3\u8f6c\u6570\u636e\u4e0a\u62a5",o),moosnow.http.request("https://platform.qwpo2018.com/api/apk_ad/click_log",o,"POST",function(t){console.log("\u8df3\u8f6c\u6570\u636e\u4e0a\u62a5\u6210\u529f",t)},function(t){console.log("\u8df3\u8f6c\u6570\u636e\u4e0a\u62a5\u5931\u8d25",t)},function(){console.log("upload navigate complete")})},e}(Q),et=function(t){function e(){var o=t.call(this)||this;return o.platformName="swan",o.appSid="",o.recordRes=null,o.recordCb=null,o}return o(e,t),e.prototype._createBannerAd=function(){if(window[this.platformName]&&window[this.platformName].createBannerAd){var t=this.getSystemInfoSync(),o=t.screenWidth,e=t.screenHeight;if(!l.isEmpty(this.getBannerId()))return window[this.platformName].createBannerAd({adUnitId:this.getBannerId(),appSid:this.appSid,style:{top:e,width:o}});console.warn(w)}},e.prototype.createRewardAD=function(t){var o=this;this.videoLoading||window[this.platformName].createRewardedVideoAd&&(this.video?(this.video.offClose(this._onVideoClose),this.video.offError(this._onVideoError),this.video.offLoad(this._onVideoLoad)):this.video=window[this.platformName].createRewardedVideoAd({adUnitId:this.getVideoId(),appSid:this.appSid}),this.video.onError(this._onVideoError),this.video.onClose(this._onVideoClose),this.video.onLoad(this._onVideoLoad),this.videoLoading=!0,this.video.load().then(function(){t&&o.video.show().then(function(){}).catch(function(t){o._onVideoError(t.errMsg,t.errCode),console.log(t.errMsg)})}).catch(function(t){o._onVideoError(t.errMsg,t.errCode),console.log(t.errMsg)}))},e.prototype.initRecord=function(){if(window[this.platformName]){var t=this.getSystemInfoSync().brand.toLowerCase();/huawei/.test(t)||/honor/.test(t)||(this.recordObj=window[this.platformName].getVideoRecorderManager())}},e.prototype.startRecord=function(t,o){var e=this;void 0===t&&(t=120),void 0===o&&(o=null),console.log("record startRecord"),this.recordRes=null,this.recordCb=null,this.recordObj?(this.recordObj.onStart(function(t){console.log("record onStart"),o&&o(t)}),this.recordObj.onStop(function(t){e.recordRes=t,e.recordCb&&(console.log("stop 2"),e.recordCb(t))}),this.recordObj.start({duration:t})):o&&o(!1)},e.prototype.stopRecord=function(t){void 0===t&&(t=null),console.log("record stopRecord"),this.recordObj?this.recordRes?(console.log("stop 1"),t(this.recordRes)):(this.recordCb=t,this.recordObj.stop()):t&&t(!1)},e}(V),nt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return o(n,t),n.prototype.getMisTouchNum=function(t){this.loadCfg(function(o){t(parseInt(o.mistouchNum))})},n.prototype.getMistouchPosNum=function(t){this.loadCfg(function(o){t(parseInt(o.mistouchPosNum))})},n.prototype.getBannerShowCountLimit=function(t){this.loadCfg(function(o){isNaN(o.bannerShowCountLimit)?t(5):t(parseInt(o.bannerShowCountLimit))})},n.prototype.getAllConfig=function(t){this.loadCfg(function(o){t(o)})},n.prototype.loadCfg=function(t){var o=this;if(this.cfgData)t(this.cfgData);else{var n=l.config.url+"?t="+Date.now();console.log("appid ",l.config.moosnowAppId),this.request(n,{apk_id:l.config.moosnowAppId},"POST",function(n){var i=n.data.zs_version==l.config.version;o.cfgData=e(e({},l.deepCopy(n.data)),{mistouchNum:n.data.zs_switch,mistouchPosNum:n.data.zs_switch,showNative:i,showInter:i,showExportAd:i,mx_native_click_switch:1==n.zs_native_click_switch,mx_jump_switch:1==n.zs_jump_switch,bannerShowCountLimit:isNaN(n.data.bannerShowCountLimit)?1:n.data.bannerShowCountLimit}),moosnow.platform&&(moosnow.platform.bannerShowCountLimit=parseInt(n.data.bannerShowCountLimit)),t(o.cfgData)},function(){t({}),console.log("load config json fail")})}},n}(z),it={FAIL:"\u8bf7\u5206\u4eab\u5230\u7fa4\uff01"},rt={ERR:"\u89c6\u9891\u6b63\u5728\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u540e",NOTEND:"\u8bf7\u5b8c\u6574\u89c2\u770b\u5b8c\u89c6\u9891\uff01"},at=function(){function t(){}return t.prototype.shuffle=function(t){for(var o,e,n=t.length,i=n;i--;)i!==(e=Math.floor(Math.random()*n))&&(o=t[i],t[i]=t[e],t[e]=o);return t},t.prototype.indexOf=function(t,o){for(var e=-1,n=0,i=t.length;n<i;n++)if(t[n]==o){e=n;break}return e},t.prototype.replace=function(t,o,e){var n=t[o],i=t[e];t[e]=n,t[o]=i},t.prototype.merge=function(t,o){for(var e=0,n=t.length;e<n;e++)o.push(t[e]);return o},t.clone=function(t){new Array;return t.slice(0)},t.remove=function(t,o){for(var e=0;e<t.length;e++)if(t[e]==o)return t.splice(e,1),void e--},t}(),st=function(t){function e(){var o=t.call(this)||this;return o._eventList=[],o._waitingForSendList=[],o._eventList=[],o._waitingForSendList=[],o}return o(e,t),e.prototype.addListener=function(t,o,e){this._addListener(t,o,!1,e)},e.prototype.addToSendQueue=function(t,o){this._addToSendList(t,o)},e.prototype.sendEventImmediately=function(t,o){this._sendEvent(t,o),this.onUpdate()},e.prototype.removeListener=function(t,o){if(null!=t&&""!=t)for(var e=0;e<this._eventList.length;e++){var n=this._eventList[e];if(n.eventName===t){for(var i=0;i<n.listeners.length;i++){var r=n.listeners[i];if(r.target===o){at.remove(n.listeners,r);break}}0==n.listeners.length&&at.remove(this._eventList,n);break}}else console.error("eventName:"+t+"\u4e0d\u5408\u6cd5\uff01")},e.prototype.removeAllListener=function(){this._eventList.length=0,this._eventList=[],this._waitingForSendList.length=0,this._waitingForSendList=[]},e.prototype._addListener=function(t,o,e,n){if(null!=t&&""!=t){var i=new ct;n instanceof Function?i.callback=n:console.error("callback\u4e0d\u662f\u4e00\u4e2a\u65b9\u6cd5"),o?i.target=o:console.error("target\u4e3a\u7a7a"),i.once=e;var r=!1;if(this._eventList.length>0){for(var a=0;a<this._eventList.length;a++){var s=this._eventList[a];if(t===s.eventName)return s.listeners.push(i),void(r=!0)}if(!r){var c=new lt;c.eventName=t,c.listeners.push(i),this._eventList.push(c)}}else{var l=new lt;l.eventName=t,l.listeners.push(i),this._eventList.push(l)}}else console.error("eventName:"+t+"\u4e0d\u5408\u6cd5\uff01")},e.prototype._addToSendList=function(t,o){if(null!=t&&""!=t){var e={eventName:t,data:o};this._waitingForSendList.push(e)}else console.error("eventName:"+t+"\u4e0d\u5408\u6cd5\uff01")},e.prototype._sendEvent=function(t,o){for(var e=this._eventList,n=0;n<e.length;n++){var i=e[n];if(i.eventName===t)for(var r=i.listeners,a=r.length-1;a>=0;a--){var s=r[a],c=s.callback,l=s.target;l?(c.call(l,o),s.once&&this._eventList[n].listeners[a]&&(at.remove(this._eventList[n].listeners,s),n--)):(at.remove(this._eventList[n].listeners,s),a--)}}},e.prototype.onUpdate=function(){if(0!=this._waitingForSendList.length)for(var t=0;t<this._waitingForSendList.length;t++){var o=this._waitingForSendList[t];this._sendEvent(o.eventName,o.data),at.remove(this._waitingForSendList,o),t--}},e.prototype.onDisable=function(){},e}(h),ct=function(){return function(){this.callback=null,this.target=[],this.once=!1,this.callback=null,this.target=null,this.once=!1}}(),lt=function(){return function(){this.eventName="",this.listeners=[],this.eventName="",this.listeners=[]}}(),ht=function(t){function e(){var o=t.call(this)||this;return o.platformName="qg",o.appSid="",o.mBannerWidth=720,o.bannerHeight=114,o.interLoadedShow=!1,o.prevNavigate=Date.now(),o.mMinInterval=10,o.mMinHideInterval=5,o.mIsClickedNative=!1,o._regisiterWXCallback(),o.initAdService(),o}return o(e,t),e.prototype.initAdService=function(){this._prepareNative(),moosnow.event.addListener(m.ON_PLATFORM_SHOW,this,this.onAppShow)},e.prototype.navigate2Mini=function(t,o,e,n){var i=this;if(console.log(b,t),Date.now()-this.prevNavigate<300)console.log(y);else if(this.prevNavigate=Date.now(),window[this.platformName]){var r=t.appid,a=t.path,s=t.extraData,c=t.pkgName;s=s||{},this.supportVersion(1044)?window[this.platformName].navigateToMiniGame({appId:r,path:a,pkgName:c||r,extraData:s,success:function(){window[i.platformName]&&window[i.platformName].aldSendEvent&&window[i.platformName].aldSendEvent("\u8df3\u8f6c",{position:t.position,appid:r,img:t.atlas||t.img}),moosnow.http.exportUser(),o&&o()},fail:function(t){console.log("navigateToMiniProgram error ",t),e&&e()},complete:function(){n&&n()}}):console.log(D)}else o&&o()},e.prototype.supportVersion=function(t){return this.getSystemInfoSync().platformVersionCode>=t},e.prototype._onBannerError=function(t){console.warn("banner___error:",t.errCode," msg ",t.errMsg)},e.prototype.getSystemInfoSync=function(){return null==this.systemInfo&&(window[this.platformName]&&window[this.platformName].getSystemInfoSync?this.systemInfo=window[this.platformName].getSystemInfoSync():this.systemInfo={},console.log(C,this.systemInfo)),this.systemInfo},e.prototype._getBannerPosition=function(){var t=this.bannerHorizontal,o=this.bannerVertical,e=this.getSystemInfoSync(),n=e.screenWidth,i=e.screenHeight,r=e.statusBarHeight,a=e.notchHeight||0;this.banner&&this.banner.style&&(isNaN(this.bannerWidth)||(this.banner.style.width=this.bannerWidth),isNaN(this.bannerHeight)||(this.banner.style.height=this.bannerHeight));var s=0,c=0;return o==p.TOP?s=this.isLandscape(e.screenHeight,e.screenWidth)?0:r+a:o==p.CENTER?s=(i-this.bannerHeigth)/2:o==p.BOTTOM&&(s=i-this.bannerHeigth),t==d.LEFT?c=0:t==d.RIGHT?c=n-this.bannerWidth:t==d.CENTER&&(c=(n-this.bannerWidth)/2),console.log("VIVOModule -> _getBannerPosition -> top,left",s,c),{left:c,top:s}},e.prototype._createBannerAd=function(){if(window[this.platformName]&&window[this.platformName].createBannerAd){var t=Date.now();if(this.mShowTime){if(this.mShowTime&&t-this.mShowTime<=1e3*this.mMinInterval)return void console.log("banner\u521b\u5efa\u592a\u9891\u7e41\u4e86 "+this.mMinInterval+"\u79d2\u5185\u53ea\u80fd\u663e\u793a\u4e00\u6b21")}else this.mShowTime=t;if(this.mShowTime=Date.now(),!l.isEmpty(this.getBannerId())){var o=this._getBannerPosition();return window[this.platformName].createBannerAd({posId:this.getBannerId(),style:{left:o.left,top:o.top,width:this.bannerWidth,height:this.bannerHeight}})}console.warn(w)}},e.prototype.getNotchHeight=function(){var t=0;return window[this.platformName].getNotchHeightSync&&(t=window[this.platformName].getNotchHeightSync().height),t},e.prototype._onBannerResize=function(t){this.bannerHeight=t.realHeight,this.bannerWidth=t.realWidth,console.log("onSize callback  ",t)},e.prototype._onBannerClose=function(){console.log("banner \u5df2\u5173\u95ed ")},e.prototype._onBannerHide=function(){console.log("banner \u5df2\u9690\u85cf ")},e.prototype.showBanner=function(t,o,e,n,i,r){var a=this;void 0===t&&(t=!0),void 0===e&&(e=d.CENTER),void 0===n&&(n=p.BOTTOM),void 0===i&&(i=0),this.bannerCb=o,this.isBannerShow=!0,window[this.platformName]&&(this.bannerHorizontal=e,this.bannerVertical=n,this.bannerStyle=r,t?moosnow.http.getAllConfig(function(t){0!=t.mistouchNum?(console.log("\u540e\u53f0\u5f00\u542f\u4e86banner\uff0c\u6267\u884c\u663e\u793a"),a._showBanner()):console.log("\u540e\u53f0\u5173\u95ed\u4e86banner\uff0c\u4e0d\u6267\u884c\u663e\u793a")}):this._showBanner())},e.prototype._showBanner=function(){var t=this;if(this.banner&&this.banner.hide&&(this.banner.hide(),this.banner.destroy(),this.banner=null),this.banner=this._createBannerAd(),this.banner&&this.banner.show){var o=this.banner.show();o&&o.then(function(){console.log("banner\u5e7f\u544a\u5c55\u793a\u6210\u529f")}).catch(function(o){switch(moosnow.http.getAllConfig(function(o){1==o.bannerErrorShowInter&&(console.log("banner\u52a0\u8f7d\u51fa\u9519\uff0c\u7528\u63d2\u5c4f\u4ee3\u66ff"),t.showInter())}),o.code){case 30003:console.log("\u65b0\u7528\u62371\u5929\u5185\u4e0d\u80fd\u66dd\u5149Banner\uff0c\u8bf7\u5c06\u624b\u673a\u65f6\u95f4\u8c03\u6574\u4e3a1\u5929\u540e\uff0c\u9000\u51fa\u6e38\u620f\u91cd\u65b0\u8fdb\u5165");break;case 30009:console.log("10\u79d2\u5185\u8c03\u7528\u5e7f\u544a\u6b21\u6570\u8d85\u8fc71\u6b21\uff0c10\u79d2\u540e\u518d\u8c03\u7528");break;case 30002:console.log("\u52a0\u8f7d\u5e7f\u544a\u5931\u8d25\uff0c\u91cd\u65b0\u52a0\u8f7d\u5e7f\u544a");break;default:console.log("banner\u5e7f\u544a\u5c55\u793a\u5931\u8d25"),console.log(JSON.stringify(o))}})}},e.prototype.hideBanner=function(){if(console.log(f),window[this.platformName]){var t=Date.now();if(this.mHideTime){if(this.mHideTime&&t-this.mHideTime<=1e3*this.mMinHideInterval)return void console.log("banner\u9690\u85cf\u592a\u9891\u7e41\u4e86 "+this.mMinHideInterval+"\u79d2\u5185\u53ea\u9690\u85cf\u4e00\u6b21")}else this.mHideTime=t;this.mHideTime=t,this.banner&&this.banner.hide&&(console.log("\u9690\u85cf\u548c\u9500\u6bc1banner"),this.banner.hide(),this.banner.destroy(),this.banner=null)}},e.prototype.createRewardAD=function(t,o){if(void 0===o&&(o=0),!moosnow.platform.videoLoading)if(window[this.platformName]){if(window[this.platformName].createRewardedVideoAd)if(l.isEmpty(this.getVideoId()))console.warn(N);else{if(this.mVideoTime){if(Date.now()-this.mVideoTime<1e4)return void(moosnow.platform.videoCb&&moosnow.platform.videoCb(u.ERR));this.mVideoTime=Date.now()}else this.mVideoTime=Date.now();var e=this.getVideoId(o);this.video[e]?this.video[e].load():(moosnow.platform.videoLoading=!0,this.video=window[this.platformName].createRewardedVideoAd({posId:e}),this.video.onError(this._onVideoError.bind(this)),this.video.onClose(this._onVideoClose.bind(this)),this.video.onLoad(this._onVideoLoad.bind(this)))}}else moosnow.platform.videoCb(u.END)},e.prototype._onVideoLoad=function(){var t=this;console.log(A),moosnow.platform.videoLoading=!1,this.video&&this.video.show().then(function(){t.videoPlaying=!0,moosnow.event.sendEventImmediately(m.ON_PLATFORM_HIDE,{}),console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5c55\u793a\u5931\u8d25",JSON.stringify(t)),moosnow.platform.videoCb&&moosnow.platform.videoCb(u.ERR)})},e.prototype._onVideoClose=function(t){if(console.log(I,t.isEnded),moosnow.platform.videoLoading=!1,this.videoPlaying=!1,t.isEnded&&moosnow.http.clickVideo(),moosnow.event.sendEventImmediately(m.ON_PLATFORM_SHOW,{}),moosnow.platform.videoCb){var o=t.isEnded?u.END:u.NOTEND;moosnow.platform.videoCb(o)}},e.prototype.prepareInter=function(){l.isEmpty(this.interId)?console.warn(x):window[this.platformName]&&window[this.platformName].createInterstitialAd&&(this.inter&&(this.inter.offLoad(),this.inter.offClose(),this.inter.offError(),this.inter=null),console.log("\u521b\u5efa\u63d2\u5c4f\u5e7f\u544a"),this.inter=window[this.platformName].createInterstitialAd({posId:this.interId}),this.inter.onLoad(this._onInterLoad.bind(this)),this.inter.onClose(this._onInterClose.bind(this)),this.inter.onError(this._onInterError.bind(this)),this.inter.load())},e.prototype.showInter=function(){this.prepareInter()},e.prototype._onInterLoad=function(){if(this.inter){var t=this.inter.show();t&&t.then(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(t){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",t)})}},e.prototype._onInterOnShow=function(){this.inter&&this.inter.load()},e.prototype.showAutoBanner=function(){console.log(" vivo \u4e0d\u652f\u6301\u81ea\u52a8")},e.prototype.reportMonitor=function(t,o){window[this.platformName]&&window[this.platformName].reportMonitor&&window[this.platformName].reportMonitor("game_scene",0)},e.prototype._prepareNative=function(t){void 0===t&&(t=!1),window[this.platformName]&&window[this.platformName].createNativeAd&&(this._destroyNative(),this.native=window[this.platformName].createNativeAd({posId:this.nativeId}),this.native.onLoad(this._onNativeLoad.bind(this)),this.native.onError(this._onNativeError.bind(this)),this.nativeLoading=!0,t&&this.native.load())},e.prototype._onNativeLoad=function(t){var o=this;this.nativeLoading=!1,console.log(T,t),t&&t.adList&&t.adList.length>0?(this.nativeAdResult=t.adList[t.adList.length-1],l.isEmpty(this.nativeAdResult.adId)||(console.log(B),this.native.reportAdShow({adId:this.nativeAdResult.adId})),l.isFunction(this.nativeCb)&&this.nativeCb(l.deepCopy(this.nativeAdResult))):(console.log(L),l.isFunction(this.nativeCb)&&moosnow.http.getAllConfig(function(t){1==t.nativeErrorShowInter?(console.log("\u539f\u751f\u52a0\u8f7d\u51fa\u9519\uff0c\u7528\u63d2\u5c4f\u4ee3\u66ff"),o.showInter()):o.nativeCb(null)}))},e.prototype._onNativeError=function(t){var o=this;this.nativeLoading=!1,this.nativeAdResult=null,20003==t.code?this.nativeIdIndex<this.nativeId.length-1?(console.log(_,t),this.nativeIdIndex+=1,this._destroyNative()):(console.log(k),this.nativeIdIndex=0):console.log(E,t),moosnow.http.getAllConfig(function(t){1==t.nativeErrorShowInter?(console.log("\u539f\u751f\u52a0\u8f7d\u51fa\u9519\uff0c\u7528\u63d2\u5c4f\u4ee3\u66ff"),o.showInter()):o.nativeCb&&o.nativeCb(null)})},e.prototype._destroyNative=function(){this.nativeLoading=!1,this.native&&(this.native.offLoad(),this.native.offError(),this.native.destroy()),console.log(F)},e.prototype.showNativeAd=function(t){var o=this;if(this.nativeCb=t,this.native){var e=this.native.load();e&&e.then(function(){console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u5b8c\u6210")}).catch(function(t){console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"),moosnow.http.getAllConfig(function(t){1==t.nativeErrorShowInter?(console.log("\u539f\u751f\u52a0\u8f7d\u51fa\u9519\uff0c\u7528\u63d2\u5c4f\u4ee3\u66ff"),o.nativeCb(null),o.showInter()):o.nativeCb(null)})})}else this._prepareNative(!0)},e.prototype.clickNative=function(t){this.nativeAdResult&&!l.isEmpty(this.nativeAdResult.adId)&&(this.mClickedNativeCallback=t,this.mIsClickedNative=!0,console.log(O,this.nativeAdResult.adId),this.native.reportAdClick({adId:this.nativeAdResult.adId}))},e.prototype.onAppShow=function(){this.mIsClickedNative&&(this.mIsClickedNative=!1,l.isFunction(this.mClickedNativeCallback)&&this.mClickedNativeCallback())},e.prototype.hasShortcutInstalled=function(t,o){window[this.platformName]&&window[this.platformName].hasShortcutInstalled&&window[this.platformName].hasShortcutInstalled({success:function(o){t&&t(!!o),o?console.log("\u5df2\u521b\u5efa"):console.log("\u672a\u521b\u5efa")},fail:function(t){o&&o(t)}})},e.prototype.installShortcut=function(t,o,e){void 0===o&&(o="\u65b9\u4fbf\u4e0b\u6b21\u5feb\u901f\u542f\u52a8"),window[this.platformName]&&window[this.platformName].installShortcut&&window[this.platformName].installShortcut({message:o,success:function(o){t&&t(o),console.log("\u521b\u5efa\u6210\u529f")},fail:function(t){e&&e(t)}})},e.prototype.exitApplication=function(){window[this.platformName]&&window[this.platformName].exitApplication&&window[this.platformName].exitApplication()},e}(V),dt={NONE:0,BANNER:1,FLOAT:2,SIDE:4,CENTER:8,EXPORT:16,BACK:32,MASK:64,WAIT:128,LEFTRIGHT:256,EXPORT_FIXED:512,ROTATE:1024,EXTEND2:2048,EXTEND3:4096,EXTEND4:8192,TOP:32768,RECOVER:16384},pt=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onEnable=function(){},e.prototype.loadAsset=function(t,o,e){if(l.getEngine()==a)if(cc.resources)cc.resources.load(t,o,function(t,o){t?console.log(" cc.resources.load ",t):e&&e(t,o)});else var n=cc.loader.load(t,o,function(t,o){t?console.log(" cc.loader.load ",t):e&&e(null,n)});else if(l.getEngine()==s){var i=Laya.loader.getRes(t);if(i)return void(e&&e(null,i));Laya.loader.create(t,Laya.Handler.create(this,function(t){e(null,t)}),null,o)}},e.prototype.loadAssetDir=function(t,o,e,n){l.getEngine()==a?cc.loader.loadResDir(t,o,function(t,o,n){var i=t/o*100;i=Math.ceil(i),e&&e(i)},function(t,o){n&&n(t,o)}):console.warn("\u4e0d\u652f\u6301loadAssetDir")},e.prototype.onDisable=function(){},e}(h),ut=function(t){function e(){var o=t.call(this)||this;return o.mBtnSound=null,o.IS_MUTE="isMute",o.IS_MUTE_MUSIC="isMuteMusic",o.IS_MUTE_SOUND="isMuteSound",o.VOLUME_MUSIC="volumeMusic",o.VOLUME_SOUND="volumeSound",o._volumeMusic=1,o._volumeSound=1,o._isMuteMusic=!1,o._isMuteSound=!1,o._isMute=!1,o}return o(e,t),Object.defineProperty(e.prototype,"btnSound",{get:function(){return this.mBtnSound},set:function(t){this.mBtnSound=t},enumerable:!0,configurable:!0}),e.prototype.playClickEffect=function(){this.mBtnSound?this.playSound(this.mBtnSound):console.log("\u6ca1\u6709\u70b9\u51fb\u97f3\u6548")},Object.defineProperty(e.prototype,"isMuteSound",{get:function(){return this._isMuteSound},set:function(t){this._isMuteSound=t,this.save()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMute",{get:function(){return this._isMute},set:function(t){this._isMute=t,this.save()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMuteMusic",{get:function(){return this._isMuteMusic},set:function(t){this._isMuteMusic=t,this.save()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volumeSound",{get:function(){return this._volumeSound},set:function(t){this._volumeSound=t,this.save()},enumerable:!0,configurable:!0}),e.prototype.playSound=function(t,o,e,n,i){if(void 0===o&&(o=!1),void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=0),!this.isMute){var r=cc.audioEngine.playEffect(t,o);return cc.audioEngine.setFinishCallback(r,function(t){e&&e(t),o||cc.audioEngine.stop(r)}),r}},e.prototype._replayMusic=function(){this.playMusic(this._musicClip,this._musicLoops,this._musicComplete)},e.prototype.playMusic=function(t,o,e){if(void 0===o&&(o=!0),void 0===e&&(e=null),!this.isMute){if(this._musicClip=t,this._musicLoops=o,this._musicComplete=e,l.getEngine()==a){if(!cc.audioEngine)return;if(!cc.audioEngine.playMusic)return;var n=cc.audioEngine.playMusic(t,o);return cc.audioEngine.setFinishCallback(n,function(t){e&&e(t)}),n}l.getEngine()==s&&Laya.SoundManager.playMusic(""+t,1,new Laya.Handler(this,function(t){e&&e(t)}))}},e.prototype.stopMusic=function(){l.getEngine()==a?cc.audioEngine.stopMusic():l.getEngine()==s&&Laya.SoundManager.stopMusic()},e.prototype.save=function(){moosnow.setting.setValue(this.IS_MUTE,""+this.isMute),moosnow.setting.setValue(this.IS_MUTE_MUSIC,""+this.isMuteMusic),moosnow.setting.setValue(this.IS_MUTE_SOUND,""+this.isMuteSound)},e.prototype.getSave=function(){this.isMute="true"==moosnow.setting.getString(this.IS_MUTE,"false"),this.isMuteMusic="true"==moosnow.setting.getString(this.IS_MUTE_MUSIC,"false")},e}(h),mt=function(t){function e(){var o,e=t.call(this)||this;return e.platformName="uc",e.mGravity=((o={})[d.CENTER+"_"+p.TOP]=1,o[d.CENTER+"_"+p.CENTER]=4,o[d.CENTER+"_"+p.BOTTOM]=7,o[d.LEFT+"_"+p.BOTTOM]=6,o[d.RIGHT+"_"+p.BOTTOM]=8,o),window[e.platformName]&&window[e.platformName].setEnableDebug?(window[e.platformName].setEnableDebug({enableDebug:1==l.config.enableDebug,complete:function(t){console.log("uc.setEnableDebug openDebug. ")}}),window[e.platformName].requestScreenOrientation?(window[e.platformName].requestScreenOrientation({orientaiton:"portrait"==l.config.orientaiton?1:2,success:function(t){console.log(t)},fail:function(t){console.error(t)}}),e):e):e}return o(e,t),e.prototype._prepareBanner=function(){},e.prototype._createBannerAd=function(){if(window[this.platformName]&&window[this.platformName].createBannerAd){var t=this.getSystemInfoSync(),o=t.windowWidth;t.windowHeight,this.bannerWidth;this.bannerShowTime=Date.now();var e=this.mGravity[this.bannerHorizontal+"_"+this.bannerVertical];return isNaN(e)&&(e=7),window[this.platformName].createBannerAd({style:{gravity:e,width:this.bannerWidth}})}},e.prototype.showBanner=function(t,o,e,n,i,r){var a=this;void 0===t&&(t=!0),void 0===e&&(e=d.CENTER),void 0===n&&(n=p.BOTTOM),void 0===i&&(i=0),console.log(g),this.bannerCb=o,this.isBannerShow=!0,window[this.platformName]&&(this.bannerHorizontal=e,this.bannerVertical=n,this.bannerStyle=r,this.mTimeoutId&&(clearTimeout(this.mTimeoutId),this.mTimeoutId=null),t?moosnow.http.getAllConfig(function(t){0!=t.mistouchNum?(console.log("\u540e\u53f0\u5f00\u542f\u4e86banner\uff0c\u6267\u884c\u663e\u793a"),a._showBanner()):console.log("\u540e\u53f0\u5173\u95ed\u4e86banner\uff0c\u4e0d\u6267\u884c\u663e\u793a")}):this._showBanner())},e.prototype._showBanner=function(){if(window[this.platformName].createBannerAd){var t=this.getSystemInfoSync(),o=t.windowWidth;t.windowHeight<t.windowWidth?o<this.bannerWidth&&(this.bannerWidth=o):this.bannerWidth=o,this.banner&&(this.banner.hide(),this.banner.destroy(),this.banner=null),this.banner=this._createBannerAd(),this.banner&&(this.banner.onError(this._onBannerError.bind(this)),this.banner.onLoad(this._onBannerLoad.bind(this)),this.banner.show())}},e.prototype.hideBanner=function(){this.banner&&(this.banner.hide(),this.banner.destroy(),this.banner=null)},e.prototype.createRewardAD=function(t){var o=this;if(!this.videoLoading)if(window[this.platformName])if(window[this.platformName].createRewardedVideoAd){var e=this.getVideoId();if(l.isEmpty(e))return console.warn(N),void(moosnow.platform.videoCb&&moosnow.platform.videoCb(u.END));if(!this.video){if(this.video=window[this.platformName].createRewardVideoAd(),!this.video)return void console.warn("\u521b\u5efa\u89c6\u9891\u5e7f\u544a\u5931\u8d25");this.video.onError(this._onVideoError),this.video.onClose(this._onVideoClose),this.video.onLoad(this._onVideoLoad)}moosnow.platform.videoLoading=!0,moosnow.platform.videoPlaying=!1,this.video.load().then(function(){t&&(moosnow.platform.videoPlaying=!0,o.video.show().then(function(){}).catch(function(t){o._onVideoError(t.errMsg,t.errCode),console.log(t.errMsg)}))}).catch(function(t){o._onVideoError(t.errMsg,t.errCode),console.log(t.errMsg)})}else moosnow.platform.videoCb&&moosnow.platform.videoCb(u.END);else moosnow.platform.videoCb&&moosnow.platform.videoCb(u.END)},e}(V),ft=function(){function t(){this.x=0,this.y=0,this.width="canvasWidth",this.height="canvasHeight",this.url="",this.isMask=!1,this.maskUrl="",this.child=null,this.event=[],this.type="",this.active=!0,this.widget=null,this.grid=null,this.zIndex=0,this.stopPropagation=!1}return t.parse=function(o){return e(e({},new t),o)},t.convertStr2Enum=function(t,o,e){return t.hasOwnProperty(o)?t[o]:e},t}(),wt=function(){return function(){this.formNode=null,this.formLogic=null}}(),gt=function(){function t(){this.formName="",this.mQuene=[]}return Object.defineProperty(t.prototype,"quene",{get:function(){return this.mQuene},set:function(t){this.mQuene=t},enumerable:!0,configurable:!0}),t}(),vt=function(){function t(){this.layoutUrl=W.HTTP_ROOT+"/layout/"+l.config.moosnowAppId+"/layout.json",this.templatesUrl=W.HTTP_ROOT+"/layout/"+l.config.moosnowAppId+"/templates.json",this.maskUrl=W.HTTP_ROOT+"/layout/"+l.config.moosnowAppId+"/img_mask.png",this.mFormQuene=[],this.mCachedLayoutQuene=[],this.mLayoutQuene=[],this.mTemplatesQuene=[]}return Object.defineProperty(t.prototype,"layoutQuene",{get:function(){return this.mFormQuene},set:function(t){this.mFormQuene=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cachedLayoutQuene",{get:function(){return this.mCachedLayoutQuene},set:function(t){this.mCachedLayoutQuene=t},enumerable:!0,configurable:!0}),t.prototype.destory=function(){this.cachedLayoutQuene=[],this.layoutQuene=[]},t.prototype.addFrom2Cached=function(t,o){for(var e=-1,n=0;n<this.cachedLayoutQuene.length;n++){var i;if((i=this.cachedLayoutQuene[n]).formName==t){e=n;break}}-1!=e?this.cachedLayoutQuene[e].quene.push(o):((i=new gt).formName=t,i.quene.push(o),this.cachedLayoutQuene.push(i))},t.prototype.getFormFromCached=function(t){for(var o=0;o<this.cachedLayoutQuene.length;o++){var e=this.cachedLayoutQuene[o];if(e.formName==t){for(var n=0;n<e.quene.length;n++){e.quene.splice(n,1);return 0==e.quene.length&&this.cachedLayoutQuene.splice(o,1),e.quene[n]}break}}return null},t.prototype.addForm2Quene=function(t,o,e){for(var n=-1,i=0;i<this.layoutQuene.length;i++){if(this.layoutQuene[i].formName==t){n=i;break}}if(-1!=n){(r=new wt).formNode=o,r.formLogic=e,this.layoutQuene[n].quene.push(r)}else{var r,a=new gt;a.formName=t,(r=new wt).formNode=o,r.formLogic=e,a.quene.push(r),this.layoutQuene.push(a)}},t.prototype.hasFormInQuene=function(t){for(var o=-1,e=0;e<this.layoutQuene.length;e++){if(this.layoutQuene[e].formName==t){o=e;break}}return-1!=o},t.prototype.recoverFormLogic=function(t,o,e,n){var i=this;void 0===n&&(n=1);var r=t.quene.splice(o,n);if(0==t.quene.length)for(var a=0;a<this.layoutQuene.length;a++)if(t==this.layoutQuene[a]){this.layoutQuene.splice(a,1);break}r.forEach(function(o){i.addFrom2Cached(t.formName,o)}),e&&(1==r.length?e(r[0]):e(r))},t.prototype.removeFormByLogic=function(t,o){for(var e=0;e<this.layoutQuene.length;e++)for(var n=this.layoutQuene[e],i=0;i<n.quene.length;i++)if(n.quene[i].formLogic==t){this.recoverFormLogic(n,i,o);break}},t.prototype.removeFormFromQuene=function(t,o,e){for(var n=0;n<this.layoutQuene.length;n++){var i=this.layoutQuene[n];if(i.formName==t){for(var r=0;r<i.quene.length;r++)if(i.quene[r]==o){this.recoverFormLogic(i,r,e);break}break}}},t.prototype.removeAllFormFromQuene=function(t,o){for(var e=0;e<this.layoutQuene.length;e++){var n=this.layoutQuene[e];if(n.formName==t){for(var i=0;i<n.quene.length;i++)this.recoverFormLogic(n,i,o),i--;break}}},t.prototype.getKVByName=function(t,o){var e=this.getKVsByName(t);if(e)for(var n=0;n<e.length;n++)if(e[n].formNode==o)return e[n]},t.prototype.getKVsByName=function(t){for(var o=-1,e=0;e<this.layoutQuene.length;e++){if(this.layoutQuene[e].formName==t){o=e;break}}return-1!=o?this.layoutQuene[o].quene:[]},t.prototype.setLayout=function(t){this.mCachedLayout=t},t.prototype.getLayout=function(t){var o=this;this.mCachedLayout?t(this.mCachedLayout):(this.mLayoutQuene.push(t),1==this.mLayoutQuene.length&&moosnow.http.request(this.layoutUrl,{},"GET",function(t){o.mCachedLayout=t,console.log("getLayout call num ",o.mLayoutQuene.length),o.mLayoutQuene.forEach(function(o){o(t)}),o.mLayoutQuene=[]}))},t.prototype.setTemplates=function(t){this.mCachedTemplates=t},t.prototype.getTemplates=function(t){var o=this;this.mCachedTemplates?t(this.mCachedTemplates):(this.mTemplatesQuene.push(t),1==this.mTemplatesQuene.length&&moosnow.http.request(this.templatesUrl,{},"GET",function(t){o.mCachedTemplates=t,o.mTemplatesQuene.forEach(function(o){o(t)}),o.mTemplatesQuene=[]}))},t.prototype.getTemplate=function(t,o){this.getTemplates(function(e){var n=e[t];if(n){var i=ft.parse(n);o(i)}})},t.prototype.showForm=function(t){},t.prototype.hideFormByLogic=function(t,o){},t.prototype.hideForm=function(t,o,e){},t.prototype.createNodeByTemplate=function(t,o,e,n,i,r){void 0===i&&(i=!0),void 0===r&&(r=null)},t.prototype.hideNodeByTemplate=function(t,o,e){},t}(),yt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"canvasNode",{get:function(){return cc.Canvas.instance.node},enumerable:!0,configurable:!0}),e.getNodeName=function(){return this.nodeNum++,"createNode"+this.nodeNum},e.createNode=function(){},e.createImage=function(t,o){},e.createText=function(t,o){},e.changeSrc=function(t,o){},e.createMask=function(t){},e.nodeNum=0,e}(h),bt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.mOwner=null,o.formComponents=[],o.mNodeMap=[],o}return o(e,t),Object.defineProperty(e.prototype,"node",{get:function(){return this.mOwner?this.mOwner:{}},set:function(t){this.mOwner=t},enumerable:!0,configurable:!0}),e.prototype.start=function(){},Object.defineProperty(e.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),e.prototype.initForm=function(t){for(var o in this.node=t,this)if(!l.isFunction(this[o])){var e=this.findNodeByName(t,o);e&&(this[o]=e),this.mNodeMap.push(o)}for(var n=0;n<this.formComponents.length;n++)this.formComponents[n].initForm(t)},e.prototype.disable=function(){var t=this;this.node=null,this.mNodeMap.forEach(function(o){t[o]=null}),this.formComponents.forEach(function(t){t.disable()}),this.formComponents=[]},e.prototype.findNodeByName=function(t,o){return null},e.prototype.willShow=function(t){this.mFormData=t,t&&this.node&&(t.x&&(this.node.x=t.x),t.y&&(this.node.y=t.y),t.zIndex&&(this.node.zIndex=t.zIndex)),this.formComponents.forEach(function(o){o.willShow(t)})},e.prototype.onShow=function(t){this.formComponents.forEach(function(o){o.onShow(t)})},e.prototype.willHide=function(t){this.formComponents.forEach(function(o){o.willHide(t)})},e.prototype.onHide=function(t){this.formComponents.forEach(function(o){o.onHide(t)})},e.prototype.hideForm=function(){moosnow.form.formFactory.hideFormByLogic(this)},e}(h),Ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"TOUCH_START",{get:function(){return cc.Node.EventType.TOUCH_START},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TOUCH_END",{get:function(){return cc.Node.EventType.TOUCH_END},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TOUCH_CANCEL",{get:function(){return cc.Node.EventType.TOUCH_CANCEL},enumerable:!0,configurable:!0}),e}(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"TOUCH_START",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TOUCH_END",{get:function(){return""},enumerable:!0,configurable:!0}),e}(bt)),Nt=function(t){function n(){var o=null!==t&&t.apply(this,arguments)||this;return o.layoutType=cc.Layout.Type.GRID,o.resizeMode=cc.Layout.ResizeMode.CONTAINER,o.startAxis=cc.Layout.AxisDirection.HORIZONTAL,o.left=30,o.top=30,o.right=30,o.bottom=30,o.spacingX=30,o.spacingY=30,o}return o(n,t),n.parse=function(t){var o=e(e({},new n),t);return o.layoutType=ft.convertStr2Enum(cc.Layout.Type,t.layoutType,cc.Layout.Type.GRID),o.resizeMode=ft.convertStr2Enum(cc.Layout.ResizeMode,t.resizeMode,cc.Layout.ResizeMode.CONTAINER),o.startAxis=ft.convertStr2Enum(cc.Layout.AxisDirection,t.startAxis,cc.Layout.AxisDirection.HORIZONTAL),o},n}(ft),At=function(t){function n(o,e,n,i,r,a,s,c){void 0===o&&(o=!1),void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===c&&(c=0);var l=t.call(this)||this;return l.isAlignLeft=!1,l.isAlignTop=!1,l.isAlignRight=!1,l.isAlignBottom=!1,l.left=0,l.top=0,l.right=0,l.bottom=0,l.isAlignLeft=o,l.isAlignTop=e,l.isAlignRight=n,l.isAlignBottom=i,l.left=r,l.top=a,l.right=s,l.bottom=c,l}return o(n,t),n.parse=function(t){return e(e({},new n),t)},n}(ft),It=(function(){}(),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"canvasNode",{get:function(){return this.mRootNode||(this.mRootNode=cc.Canvas.instance.node),cc.Canvas.instance.node},set:function(t){this.mRootNode=t},enumerable:!0,configurable:!0}),e.createNode=function(t,o){t||(t=this.getNodeName());var e=new cc.Node;return e.name=t,o&&(e.active=o.active,e.zIndex=this.convertIndex(o.zIndex),o.stopPropagation&&this.addStopPropagation(e)),e},e.createImage=function(t,o){var e=this.createNode(o.name,o),n=e.addComponent(cc.Sprite);return n.type=cc.Sprite.Type.SIMPLE,n.sizeMode=cc.Sprite.SizeMode.TRIMMED,n.trim=!0,e.width=this.convertWidth(o.width),e.height=this.convertHeight(o.height),this.changeSrc(e,o,function(){}),e.x=o.x,e.y=o.y,t.addChild(e),e},e.colorHex2RGB=function(t){"#"==t.substr(0,1)&&(t=t.substring(1)),t=t.toLowerCase();for(var o=new Array,e=0;e<3;e++)o[0]=t.substr(2*e,2),o[3]="0123456789abcdef",o[1]=o[0].substr(0,1),o[2]=o[0].substr(1,1),o[20+e]=16*o[3].indexOf(o[1])+o[3].indexOf(o[2]);return new cc.Color(o[20],o[21],o[22])},e.createText=function(t,o){var e=this.createNode(o.name,o);e.color=this.colorHex2RGB(o.color);var n=e.addComponent(cc.Label);n.enableWrapText=!1,n.overflow=cc.Label.Overflow.SHRINK,n.fontSize=o.fontSize,n.lineHeight=o.lineHeight;var i=cc.Label.HorizontalAlign[o.horizontalAlign.toUpperCase()];return n.horizontalAlign=i||cc.Label.HorizontalAlign.CENTER,n.verticalAlign=cc.Label.VerticalAlign.CENTER,n.useSystemFont=!0,o.text&&(n.string=o.text),e.x=o.x,e.y=o.y,e.width=this.convertWidth(o.width),e.height=this.convertWidth(o.height),t.addChild(e),e},e.createLayout=function(t,o){var e=this.createNode(o.name,o),n=e.addComponent(cc.Layout);return n.paddingLeft=o.left,n.paddingTop=o.top,n.paddingRight=o.right,n.paddingBottom=o.bottom,n.spacingX=o.spacingX,n.spacingY=o.spacingY,n.startAxis=o.startAxis,e.x=o.x,e.y=o.y,e.width=this.convertWidth(o.width),e.height=this.convertWidth(o.height),t.addChild(e),e},e.createProgressBar=function(t,o){var e=this.createNode(o.name,o),n=e.addComponent(cc.ProgressBar);e.addComponent(cc.Sprite);if(this.changeSrc(e,o),n.mode=cc.ProgressBar.Mode.HORIZONTAL,n.totalLength=300,n.progress=.1,e.x=o.x,e.y=o.y,e.width=this.convertWidth(o.width),e.height=this.convertWidth(o.height),o.child&&o.child.length>0){var i=this.createImage(e,ft.parse(o.child[0]));n.barSprite=i.getComponent(cc.Sprite)}return t.addChild(e),e},e.createScroll=function(t,o){},e.createView=function(t,o){var e=this.createImage(t,o);e.width=this.convertWidth(o.scroll.width),e.height=this.convertHeight(o.scroll.height),o.widget&&this.createWidget(e,At.parse(o.widget));var n=this.createNode(o.name+"_scroll",o),i=n.addComponent(cc.ScrollView);i.horizontal=!!o.scroll.horizontal,i.vertical=!!o.scroll.vertical,i.horizontalScrollBar=null,i.verticalScrollBar=null,n.width=this.convertWidth(o.scroll.width),n.height=this.convertHeight(o.scroll.height),e.addChild(n),o.layout.widget&&this.createWidget(n,o.layout.widget);var r=this.createNode(o.name+"_view");r.addComponent(cc.Mask),this.createWidget(r,new At(!0,!0,!0,!0,0,0,0,0)),n.addChild(r),o.layout.name=o.name+"_layout";var a=this.createLayout(r,Nt.parse(o.layout));return a.width=this.convertWidth(o.layout.width),a.height=this.convertHeight(o.layout.height),i.content=a,{viewContainer:e,layoutNode:a}},e.createWidget=function(t,o){var e=t.addComponent(cc.Widget);return e.isAlignLeft=o.isAlignLeft,e.isAlignTop=o.isAlignTop,e.isAlignRight=o.isAlignRight,e.isAlignBottom=o.isAlignBottom,e.left=o.left,e.top=o.top,e.right=o.right,e.bottom=o.bottom,e.updateAlignment(),t},e.addToSrcQuene=function(t,o,e){for(var n=!1,i=0;i<this.srcQuene.length;i++)if(this.srcQuene[i].node==t){n=!0,this.srcQuene[i]={node:t,imgCfg:o,callback:e};break}n||this.srcQuene.push({node:t,imgCfg:o,callback:e})},e.getSrcQuene=function(t){for(var o=null,e=0;e<this.srcQuene.length;e++)if(this.srcQuene[e].node==t){o=this.srcQuene[e];break}return o},e.applySrcQuene=function(t,o,e){var n=this.getSrcQuene(t);n&&n.imgCfg==e&&(this.updateSprite(t,o),this.checkSize(t,this.convertWidth(n.imgCfg.width),this.convertHeight(n.imgCfg.height)),this.setSpriteGrid(n.imgCfg,t),this.clearSrcQuene(t))},e.clearSrcQuene=function(t){for(var o=0;o<this.srcQuene.length;o++)this.srcQuene[o].node==t&&(this.srcQuene.splice(o,1),o--)},e.changeSrc=function(t,o,e){var n,i=this;if(n=t instanceof cc.Node?t.getComponent(cc.Sprite):t,this.addToSrcQuene(n,o,e),o.url)if(-1!=o.url.indexOf("http"))cc.loader.load(o.url,function(t,e){t?console.log(" cc.loader.load ",t):i.applySrcQuene(n,e,o)});else{var r=cc.loader.getRes(o.url);if(r)return void this.applySrcQuene(n,r,o);cc.loader.loadRes(o.url,cc.Texture2D,function(t,e){i.applySrcQuene(n,e,o)})}},e.updateSprite=function(t,o){var e=new cc.SpriteFrame(o);t.spriteFrame=e},e.checkSize=function(t,o,e){t.node.width!=o||t.node.height!=e?(t.node.width=o,t.node.height=e):this.unschedule(this.checkSize)},e.setSpriteGrid=function(t,o){t.grid&&(o.type=cc.Sprite.Type.SLICED,o.spriteFrame.insetLeft=t.grid.left,o.spriteFrame.insetTop=t.grid.top,o.spriteFrame.insetRight=t.grid.right,o.spriteFrame.insetBottom=t.grid.bottom)},e.changeText=function(t,o){if(t){var e=t.getComponent(cc.Label);e&&(e.string=o)}},e.createMask=function(t,o){void 0===o&&(o=void 0);var e=moosnow.form.formFactory.maskUrl,n=this.createNode("img_mask");n.addComponent(cc.Sprite);this.changeSrc(n,{url:e},function(){}),t.addChild(n),n.zIndex=-1,this.addStopPropagation(n)},e.addStopPropagation=function(t){l.isOnlyUI&&l.isPC||t&&t.on(Ct.TOUCH_START,this.onMaskMouseDown,this)},e.removeStopPropagation=function(t){t&&t.on(Ct.TOUCH_START,this.onMaskMouseDown,this)},e.onMaskMouseDown=function(t){console.log("\u963b\u6b62\u4e8b\u4ef6\u4f20\u9012, node name ",t.getCurrentTarget().name),t.stopPropagation()},e.findNodeByName=function(t,o){for(var e=null,n=0;n<t.childrenCount;n++){var i=t.children[n];if(i.name==o){e=i;break}var r=this.findNodeByName(i,o);if(r){e=r;break}}return e},e.convertWidth=function(t){var o=this.canvasNode.width;return isNaN(t)?o:parseInt(""+t)},e.convertHeight=function(t){var o=this.canvasNode.height;return isNaN(t)?o:parseInt(""+t)},e.convertIndex=function(t){return isNaN(t)?0:parseInt(""+t)},e.srcQuene=[],e}(yt)),St=function(t){function n(){var o=null!==t&&t.apply(this,arguments)||this;return o.horizontalAlign="center",o.color="#ffffff",o.fontSize=32,o.lineHeight=32,o.text="",o}return o(n,t),n.parse=function(t){return e(e({},new n),t)},n}(ft),Tt=function(t){function n(){var o=null!==t&&t.apply(this,arguments)||this;return o.mode=cc.ProgressBar.Mode.HORIZONTAL,o}return o(n,t),n.parse=function(t){return e(e({},new n),t)},n}(ft),_t=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.horizontal=!0,o.vertical=!0,o}return o(e,t),e}(ft),Et=function(t){function n(){var o=null!==t&&t.apply(this,arguments)||this;return o.scroll=new _t,o.layout=new Nt,o}return o(n,t),n.parse=function(t){return e(e({},new n),t)},n}(ft),kt=function(){function t(){}return t.image="image",t.progressBar="progressBar",t.text="text",t.layout="layout",t.view="view",t.widget="widget",t}(),Ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._createChild=function(t,o){for(var e=0;e<o.length;e++){var n=o[e];this.createNode(t,n)}},e.prototype.createNode=function(t,o){var e=null,n=null;if(o.type==kt.progressBar)n=Tt.parse(o),e=It.createProgressBar(t,n),n.child&&n.child.length>1&&(n.child.splice(0,1),this._createChild(e,n.child));else if(o.type==kt.view){n=Et.parse(o),e=It.createView(t,n).viewContainer,n.child&&n.child.length>0&&this._createChild(e,n.child)}else o.type==kt.text?(n=St.parse(o),e=It.createText(t,n)):o.type==kt.layout?(n=Nt.parse(o),e=It.createLayout(t,n)):o.type==kt.widget?(n=At.parse(o),e=It.createWidget(t,n)):(n=ft.parse(o),e=It.createImage(t,n)),o.widget&&It.createWidget(e,At.parse(o.widget)),n.child&&n.child.length>0&&this._createChild(e,n.child);return e},e.prototype._createUINode=function(t,o,e,n){n||(n=It.canvasNode);var i=this.createNode(n,t);t.isMask&&It.createMask(i,t.maskUrl);var r=new o;return r.initForm(i),this.logicShow(r,i,e),this.addForm2Quene(t.name,i,r),i},e.prototype.hideFormByLogic=function(t,o){var e=this;this.removeFormByLogic(t,function(t){t instanceof Array?t.forEach(function(t){e.logicHide(t.formLogic,t.formNode,o)}):e.logicHide(t.formLogic,t.formNode,o)})},e.prototype.logicShow=function(t,o,e){l.isOnlyUI&&l.isPC?console.warn("UI\u7f16\u8f91\u6a21\u5f0f\uff0c\u53d6\u6d88\u4e1a\u52a1\u903b\u8f91"):(t.willShow(e),o.active=!0,t.onShow(e))},e.prototype.logicHide=function(t,o,e){l.isOnlyUI&&l.isPC?console.warn("UI\u7f16\u8f91\u6a21\u5f0f\uff0c\u53d6\u6d88\u4e1a\u52a1\u903b\u8f91"):(t.willHide(e),o.active=!0,t.onHide(e),o.x=0,o.y=0,o.removeFromParent())},e.prototype.hideForm=function(t,o,e){var n=this;o?this.removeFormFromQuene(t,o,function(t){n.logicHide(t.formLogic,t.formNode,e)}):this.removeAllFormFromQuene(t,function(t){n.logicHide(t.formLogic,t.formNode,e)})},e.prototype.showForm=function(t){var o=this;if(!t.showOnce||!this.hasFormInQuene(t.name)){t.parent||(t.parent=It.canvasNode);var e=this.getFormFromCached(t.name);if(e)t.parent.addChild(e.formNode),this.logicShow(e.formLogic,e.formNode,t.formData),this.addForm2Quene(t.name,e.formNode,e.formLogic);else if(t.remoteLayout)this.getLayout(function(e){if(e[t.name]){var n=e[t.name];n.name=t.name;var i=o._createUINode(n,t.formLogic,t.formData,t.parent);t.callback&&t.callback(i)}});else{var n=this._createUINode(t.layoutOptions,t.formLogic,t.formData);t.callback&&t.callback(n)}}},e.prototype.createNodeByTemplate=function(t,o,e,n,i,r){var a=this;void 0===i&&(i=!0),void 0===r&&(r=null),n||(n=It.canvasNode);var s=this.getFormFromCached(t);if(s)n.addChild(s.formNode),this.logicShow(s.formLogic,s.formNode,e),this.addForm2Quene(t,s.formNode,s.formLogic);else if(i)this.getTemplates(function(i){var r=i[t];if(r){var s=ft.parse(r);s.name=t;a._createUINode(s,o,e,n)}});else this._createUINode(r,o,e)},e.prototype.hideNodeByTemplate=function(t,o,e){var n=this;o?this.removeFormFromQuene(t,o,function(t){n.logicHide(t.formLogic,t.formNode,e)}):this.removeAllFormFromQuene(t,function(t){n.logicHide(t.formLogic,t.formNode,e)})},e.prototype.getTemplate=function(o,e){t.prototype.getTemplate.call(this,o,function(t){t.width=It.convertWidth(t.width),t.height=It.convertHeight(t.height),e&&e(t)})},e}(vt),Bt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.mDowning=!1,o.mClickQuene={},o}return o(e,t),e.prototype.downAnim=function(t){t.scale=1,t.runAction(cc.sequence(cc.scaleTo(.1,.7,.7),cc.callFunc(function(){},this)))},e.prototype.upAnim=function(t,o){var e=this;t.stopAllActions(),t.scale=.7,t.runAction(cc.sequence(cc.scaleTo(.1,1,1),cc.callFunc(function(){e.mDowning=!1,o&&o()},this)))},e.prototype.getClickQueneItem=function(t){var o=t.getCurrentTarget().uuid,e=this.mClickQuene[o];return e||null},e.prototype.setClickQueneItem=function(t,o){var e=t.getCurrentTarget().uuid;this.mClickQuene[e]&&(this.mClickQuene[e].clicking=o)},e.prototype.onTouchStart=function(t){var o=this.getClickQueneItem(t);o&&(o.once&&o.clicking||(moosnow.audio.playClickEffect(),this.downAnim(o.node),this.mDowning||(this.mDowning=!0)))},e.prototype.onTouchEnd=function(t){var o=this,e=this.getClickQueneItem(t);e&&(e.once&&e.clicking||(this.setClickQueneItem(t,!0),console.log("onTouchEnd"),this.upAnim(e.node,function(){e&&e.callback&&e.callback(),o.setClickQueneItem(t,!1)}),e&&e.stopPropagation&&t.stopPropagation()))},e.prototype.onTouchCancel=function(t){var o=this,e=this.getClickQueneItem(t);e&&(console.log("onTouchCancel"),this.upAnim(e.node,function(){o.setClickQueneItem(t,!1)}))},e.prototype.applyClickAnim=function(t,o,e,n){void 0===e&&(e=!1),void 0===n&&(n=!0),l.isOnlyUI&&l.isPC||(t&&t.uuid?(this.mClickQuene[t.uuid]={node:t,stopPropagation:e,callback:o,once:n,clicking:!1},t.on(Ct.TOUCH_START,this.onTouchStart,this),t.on(Ct.TOUCH_END,this.onTouchEnd,this),t.on(Ct.TOUCH_CANCEL,this.onTouchCancel,this)):console.log("\u7f3a\u5c11\u5bf9\u8c61\uff0c\u65e0\u6cd5\u7ed1\u5b9a\u4e8b\u4ef6"))},e.prototype.removeClickAnim=function(t){t&&t.uuid&&(this.mClickQuene[t.uuid]=null,delete this.mClickQuene[t.uuid],t.off(Ct.TOUCH_START,this.onTouchStart,this),t.off(Ct.TOUCH_END,this.onTouchEnd,this),t.off(Ct.TOUCH_CANCEL,this.onTouchCancel,this))},e.prototype.findNodeByName=function(t,o){return It.findNodeByName(t,o)},e}(bt),Lt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.btnBack=null,o.btnContinue=null,o}return o(e,t),Object.defineProperty(e.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),e.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnBack,function(){t.onBack()}),this.applyClickAnim(this.btnContinue,function(){t.onBack()})},e.prototype.removeListener=function(){this.removeClickAnim(this.btnBack)},e.prototype.willShow=function(o){t.prototype.willShow.call(this,o),moosnow.platform.stopRecord(function(){var t=moosnow.platform.getSystemInfoSync();moosnow.http.getAllConfig(function(o){moosnow.platform.showShareButton({left:t.windowWidth-o.shareBtnWidth,top:t.windowHeight-70})}),moosnow.platform.hideBanner(),moosnow.platform.hideShareButton()})},e.prototype.onShow=function(t){this.addListener()},e.prototype.willHide=function(){this.removeListener()},e.prototype.onBack=function(){this.hideForm(),this.FormData.callback&&this.FormData.callback()},e}(Bt),Ft=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.btnContinue=null,o.btnHome=null,o.btnReplay=null,o.isMask=!1,o}return o(e,t),Object.defineProperty(e.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),e.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnContinue,function(){t.onContinue()}),this.applyClickAnim(this.btnHome,function(){t.onToHome()}),this.applyClickAnim(this.btnReplay,function(){t.onReplay()})},e.prototype.removeListener=function(){this.removeClickAnim(this.btnContinue),this.removeClickAnim(this.btnHome),this.removeClickAnim(this.btnReplay)},e.prototype.willShow=function(o){t.prototype.willShow.call(this,o),this.addListener(),moosnow.platform.hideBanner()},e.prototype.willHide=function(o){t.prototype.willHide.call(this,o),this.removeListener()},e.prototype.onShow=function(o){t.prototype.onShow.call(this,o),moosnow.platform.pauseRecord()},e.prototype.onContinue=function(){this.hideForm(),this.FormData.callback&&this.FormData.callback()},e.prototype.onToHome=function(){this.hideForm(),moosnow.platform.stopRecord(),this.FormData.homeCallback&&this.FormData.homeCallback()},e.prototype.onReplay=function(){this.hideForm(),moosnow.platform.stopRecord(function(){moosnow.platform.startRecord()}),this.FormData.replayCallback&&this.FormData.replayCallback()},e}(Bt),xt=function(t){function e(o,e,n,i){void 0===o&&(o=!0);var r=t.call(this)||this;return r.checkedName="checked",r.uncheckedName="unchecked",r.mCheckedVideo=!0,r.mCanNum=0,r.mCheckBoxMistouch=!1,r.mClickNum=0,r.mCheckBoxVideoNum=3,r.toggleCallback=e,r.mCheckedVideo=o,n&&(r.checkedName=n),i&&(r.uncheckedName=i),r[r.checkedName]=null,r[r.uncheckedName]=null,r}return o(e,t),e.prototype.addListener=function(){var t=this;this[this.uncheckedName]&&this.applyClickAnim(this[this.uncheckedName],function(){t.checkToggle()}),this[this.checkedName]&&this.applyClickAnim(this[this.checkedName],function(){t.checkToggle()})},e.prototype.removeListener=function(){this[this.checkedName]&&this.removeClickAnim(this[this.checkedName]),this[this.uncheckedName]&&this.removeClickAnim(this[this.uncheckedName])},e.prototype.onReceive=function(){var t=this;this.mCheckedVideo?moosnow.platform.showVideo(function(o){o==u.END?t.FormData.videoCallback&&t.FormData.videoCallback():o==u.ERR?moosnow.form.showToast(rt.ERR):moosnow.form.showToast(rt.NOTEND)}):this.FormData.callback&&this.FormData.callback()},e.prototype.checkToggle=function(){if(this.mCheckBoxMistouch)return this.mClickNum++,this.mClickNum==this.mCheckBoxVideoNum&&moosnow.platform.showVideo(function(){}),this.mClickNum>=this.mCanNum&&(this.mCheckedVideo=!this.mCheckedVideo,this.updateCheckbox()),void this.checkCallback();this.mCheckedVideo=!this.mCheckedVideo,this.updateCheckbox(),this.checkCallback()},e.prototype.onShow=function(o){var e=this;t.prototype.onShow.call(this,o),moosnow.http.getAllConfig(function(t){e.mCanNum=r.probabilitys(t.checkBoxProbabilitys)+1,e.mCheckBoxVideoNum=t&&!isNaN(t.checkBoxVideoNum)?t.checkBoxVideoNum:3,e.mCheckBoxMistouch=1==t.checkBoxMistouch}),this.addListener(),this.updateCheckbox(),this.checkCallback()},e.prototype.updateCheckbox=function(){this[this.checkedName]&&(this[this.checkedName].active=this.mCheckedVideo),this[this.uncheckedName]&&(this[this.uncheckedName].active=!this.mCheckedVideo)},e.prototype.checkCallback=function(){this.toggleCallback&&this.toggleCallback(this.mCheckedVideo)},e.prototype.willHide=function(){this.removeListener()},e}(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(Bt)),Rt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.checked=null,o.unchecked=null,o.btnContinue=null,o.coinNum=null,o.videoText=null,o.mCheckedVideo=!1,o.formComponents=[new xt(o.mCheckedVideo,function(t){o.mCheckedVideo=t})],o.mLevelCoinNum=0,o.mLevelShareCoinNum=0,o}return o(e,t),Object.defineProperty(e.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),e.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnContinue,function(){t.onReceive()})},e.prototype.removeListener=function(){this.removeClickAnim(this.btnContinue)},e.prototype.onReceive=function(){var t=this;this.mCheckedVideo?moosnow.platform.showVideo(function(o){o==moosnow.VIDEO_STATUS.END?(t.hideForm(),t.FormData.videoCallback&&t.FormData.videoCallback()):o==moosnow.VIDEO_STATUS.ERR?moosnow.form.showToast(rt.ERR):moosnow.form.showToast(rt.NOTEND)}):this.FormData.callback&&this.FormData.callback()},e.prototype.onShow=function(o){t.prototype.onShow.call(this,o),this.mLevelCoinNum=this.FormData.coinNum,this.mLevelShareCoinNum=this.FormData.coinNum,this.videoText.getComponent(cc.Label).string=""+this.FormData.videoText,this.coinNum.getComponent(cc.Label).string=""+l.formatMoney(this.mLevelCoinNum),this.addListener(),moosnow.platform.stopRecord(),moosnow.platform.showBanner()},e.prototype.willHide=function(o){t.prototype.willHide.call(this,o),this.removeListener(),moosnow.platform.hideBanner()},e}(Bt),Dt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.msgText=null,o}return o(e,t),e.prototype.onMaskMouseDown=function(t){t.stopPropagation()},e.prototype.willShow=function(o){t.prototype.willShow.call(this),this.node.on(Ct.TOUCH_START,this.onMaskMouseDown,this),this.node.zIndex=cc.macro.MAX_ZINDEX,this.msgText.getComponent(cc.Label).string=o,this.node.active=!0,this.node.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1))),this.scheduleOnce(this.hide,1)},e.prototype.willHide=function(o){t.prototype.willHide.call(this,o),this.node.off(Ct.TOUCH_START,this.onMaskMouseDown,this)},e.prototype.hide=function(){this.hideForm()},e}(Bt),Pt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.logo=null,o.btnVideo=null,o.btnNext=null,o.btnTry=null,o.mCheckedVideo=!1,o.formComponents=[new xt(o.mCheckedVideo,function(t){o.mCheckedVideo=t,o.btnNext&&(o.btnNext.active=t),o.btnTry&&(o.btnTry.active=!t)})],o}return o(e,t),Object.defineProperty(e.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),e.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnVideo,function(){t.onVideoTry()}),this.applyClickAnim(this.btnNext,function(){t.onNext()}),this.applyClickAnim(this.btnTry,function(){t.onTextTry()})},e.prototype.removeListener=function(){this.removeClickAnim(this.btnVideo),this.removeClickAnim(this.btnNext),this.removeClickAnim(this.btnTry)},e.prototype.onShow=function(o){t.prototype.onShow.call(this,o),It.changeSrc(this.logo,{url:this.FormData.skinUrl,width:this.logo.width,height:this.logo.height}),this.addListener()},e.prototype.onHide=function(o){t.prototype.onHide.call(this,o),this.removeListener()},e.prototype.onVideoTry=function(){var t=this;moosnow.platform.showVideo(function(o){o==u.END?(t.hideForm(),t.FormData.videoCallback&&t.FormData.videoCallback()):o==u.ERR?moosnow.form.showToast(rt.ERR):o==u.NOTEND&&moosnow.form.showToast(rt.NOTEND)})},e.prototype.onNext=function(){this.hideForm(),this.FormData.callback&&this.FormData.callback()},e.prototype.onTextTry=function(){this.mCheckedVideo?this.onVideoTry():this.onNext()},e}(Bt),Mt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.bg=null,o.formComponents=[new xt(moosnow.data.getVibrateSetting(),function(t){o.vibrateSwitch(t)},"vibrateOn","vibrateOff"),new xt(moosnow.audio.isMute,function(t){o.musicSwitch(t)},"musicOn","musicOff")],o}return o(e,t),Object.defineProperty(e.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),e.prototype.addListener=function(){this.node.on(Ct.TOUCH_START,this.hideForm,this),It.addStopPropagation(this.bg)},e.prototype.removeListener=function(){this.node.off(Ct.TOUCH_START,this.hideForm,this),It.removeStopPropagation(this.bg)},e.prototype.willShow=function(o){t.prototype.willShow.call(this,o),this.addListener()},e.prototype.willHide=function(o){t.prototype.willShow.call(this,o),this.removeListener()},e.prototype.vibrateSwitch=function(t){moosnow.data.setVibrateSetting(t),this.FormData.vibrateCallback&&this.FormData.vibrateCallback(t)},e.prototype.musicSwitch=function(t){moosnow.audio.isMute=t,this.FormData.musicCallback&&this.FormData.musicCallback(t)},e}(Bt),Vt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.checkdBg=null,o.opend=null,o.lockd=null,o.video=null,o.coinNum=null,o._opening=!1,o}return o(e,t),Object.defineProperty(e.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),e.prototype.willShow=function(o){t.prototype.willShow.call(this,o),this.initItem(o),this.addListener()},e.prototype.willHide=function(o){t.prototype.willHide.call(this,o),this.removeListener()},e.prototype.addListener=function(){var t=this;this.applyClickAnim(this.node,function(){t.onCheck()}),moosnow.event.addListener(m.PRIZE_BOX_UNLOCAK,this,this.onCheckChange)},e.prototype.removeListener=function(){this.removeClickAnim(this.node),moosnow.event.removeListener(m.PRIZE_BOX_UNLOCAK,this)},e.prototype.initItem=function(t){this.coinNum.active=t.coinNum>0;var o=moosnow.data.getUserPrizeBoxById(t.idx);o?(this.coinNum.getComponent(cc.Label).string=""+l.formatMoney(o.coinNum),this.opend.active=!0,this.lockd.active=!1,this.video.active=!1):(this.opend.active=!1,this.lockd.active=!0,this.video.active=this.FormData.isVideo),this.checkdBg.active=!1},e.prototype.onCheckChange=function(t){var o=moosnow.data.getUserPrizeBoxById(this.FormData.idx);o?(this.coinNum.active=!0,this.coinNum.getComponent(cc.Label).string=""+l.formatMoney(o.coinNum),this.opend.active=!0,this.lockd.active=!1,this.video.active=!1):(this.coinNum.active=!1,this.video.active=this.FormData.isVideo,this.opend.active=!1,this.lockd.active=!0)},e.prototype.onCheck=function(){var t=this;this._opening||(this._opening=!0,this.FormData.videoNum?moosnow.platform.showVideo(function(o){switch(t._opening=!1,o){case u.NOTEND:moosnow.form.showToast(rt.NOTEND);break;case u.ERR:moosnow.form.showToast(rt.ERR);break;case u.END:moosnow.data.lockPrizeBox(t.FormData.idx,1,t.FormData.coinNum),moosnow.event.sendEventImmediately(m.PRIZE_BOX_UNLOCAK,t.FormData)}}):moosnow.data.getPrizeKey()>0?(moosnow.data.addPrizeKey(-1),moosnow.data.lockPrizeBox(this.FormData.idx,0,this.FormData.coinNum),moosnow.event.sendEventImmediately(m.PRIZE_BOX_UNLOCAK,this.FormData)):(this._opening=!1,moosnow.form.showToast("\u94a5\u5319\u4e0d\u8db3"),moosnow.event.sendEventImmediately(m.PRIZE_BOX_UNLOCAK,this.FormData)))},e}(Bt),Ht=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.boxLayout=null,o.btnReceive=null,o.btnNext=null,o.keyNum=null,o.mTryFromVideo=!0,o.formComponents=[new xt(o.mTryFromVideo,function(t){o.mTryFromVideo=t,o.btnNext.active=!t,o.btnReceive.active=t})],o._Receiveing=!1,o}return o(e,t),Object.defineProperty(e.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),e.prototype.onShow=function(o){console.log("this.mTryFromVideo 1 ",this.mTryFromVideo),t.prototype.onShow.call(this,o),this.boxLayout.getComponent(cc.Layout).type=cc.Layout.Type.GRID,console.log("this.mTryFromVideo 2 ",this.mTryFromVideo),this.btnNext.active=!this.mTryFromVideo,this.btnReceive.active=this.mTryFromVideo;for(var e=0,n=0;n<this.FormData.rowNum;n++)for(var i=0;i<this.FormData.colNum;i++){var r=l.randomNumBoth(this.FormData.coinNum[0],this.FormData.coinNum[1]),a=l.randomNumBoth(this.FormData.videoCoinNum[0],this.FormData.videoCoinNum[1]),s=this.FormData.videoNum&&-1!=this.FormData.videoNum.indexOf(e);moosnow.form.formFactory.createNodeByTemplate("boxItem",Vt,{coinNum:r,videoCoinNum:a,isVideo:s,idx:e},this.boxLayout),e++}this.addListener(),this.updateKeyNum()},e.prototype.onHide=function(o){t.prototype.onHide.call(this,o),moosnow.form.formFactory.hideNodeByTemplate("boxItem",null),this.removeListener()},e.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnNext,function(){t.nextForm()}),this.applyClickAnim(this.btnReceive,function(){t.onReceive()}),moosnow.event.addListener(m.PRIZE_BOX_UNLOCAK,this,this.onPrizeBoxUnLock)},e.prototype.removeListener=function(){this.removeClickAnim(this.btnNext),this.removeClickAnim(this.btnReceive),moosnow.event.removeListener(m.PRIZE_BOX_UNLOCAK,this)},e.prototype.onPrizeBoxUnLock=function(t){this.btnReceive.active=!0,this.updateKeyNum(),this.FormData.openCallback&&this.FormData.openCallback(t.coinNum)},e.prototype.onReceive=function(){var t=this;this._Receiveing||(this._Receiveing=!0,this.mTryFromVideo?(this._Receiveing=!1,moosnow.platform.showVideo(function(o){switch(o){case u.NOTEND:moosnow.form.showToast(rt.NOTEND);break;case u.ERR:moosnow.form.showToast(rt.ERR);break;case u.END:moosnow.data.addPrizeKey(3),t.updateKeyNum()}})):this.nextForm())},e.prototype.nextForm=function(){moosnow.data.clearPrizeBox(),moosnow.data.clearPrizeKey(),this._Receiveing=!1,this.hideForm(),this.FormData.callback&&this.FormData.callback()},e.prototype.updateKeyNum=function(){this.keyNum.getComponent(cc.Label).string=""+moosnow.data.getPrizeKey()},e}(Bt),Ut=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.btnShare=null,o.btnNext=null,o.coinNum=null,o}return o(e,t),Object.defineProperty(e.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),e.prototype.onShow=function(o){t.prototype.onShow.call(this,o),this.addListener(),this.coinNum.getComponent(cc.Label).string=""+l.formatMoney(this.FormData.shareCoinNum)},e.prototype.onHide=function(o){t.prototype.onHide.call(this,o),this.removeListener()},e.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnShare,function(){t.onShareVideo()}),this.applyClickAnim(this.btnNext,function(){t.onNext()})},e.prototype.removeListener=function(){this.removeClickAnim(this.btnShare),this.removeClickAnim(this.btnNext)},e.prototype.onNext=function(){this.hideForm(),this.FormData.callback&&this.FormData.callback()},e.prototype.onShareVideo=function(){var t=this;moosnow.http.getAllConfig(function(o){if(o)if(1==o.shareFormVideo)t.onVideo();else if(2==o.shareFormVideo)t.onShare();else{var e=o&&o.shareFormVideoPrecent?parseFloat(o.shareFormVideoPrecent):.5;l.randomNumBoth(0,100)/100<e?t.onVideo():t.onShare()}else t.onVideo()})},e.prototype.onVideo=function(){var t=this;moosnow.platform.showVideo(function(o){o==moosnow.VIDEO_STATUS.END?(t.hideForm(),t.FormData.shareCallback&&t.FormData.shareCallback(!0)):o==moosnow.VIDEO_STATUS.NOTEND?moosnow.form.showToast(moosnow.VIDEO_MSG.NOTEND):moosnow.form.showToast(moosnow.VIDEO_MSG.ERR)})},e.prototype.onShare=function(){var t=this;moosnow.platform.share({channel:moosnow.SHARE_CHANNEL.VIDEO},function(o){t.hideForm(),t.FormData.shareCallback&&t.FormData.shareCallback(o),console.log("\u5206\u4eab\u7ed3\u675f",o)},function(o){t.hideForm(),t.FormData.shareCallback&&t.FormData.shareCallback(o)})},e}(Bt),Wt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.clickProgress=null,o.btnReceive=null,o.logo=null,o.mMaxNum=10,o.mCurrentNum=0,o.mNavigateIndex=0,o.mBannerShow=!1,o.mShowTime=0,o.mBannerClickType=0,o}return o(e,t),e.prototype.addEvent=function(){this.btnReceive.on(Ct.TOUCH_START,this.onLogoUp,this),this.btnReceive.on(Ct.TOUCH_END,this.onBannerClick,this)},e.prototype.removeEvent=function(){this.btnReceive.off(Ct.TOUCH_START,this.onLogoUp,this),this.btnReceive.off(Ct.TOUCH_END,this.onBannerClick,this),moosnow.event.removeListener(m.ON_PLATFORM_SHOW,this)},e.prototype.onLogoUp=function(){this.logo.position=this.mEndPos},e.prototype.onLogoDown=function(){this.logo.position=this.mBeginPos},e.prototype.initPos=function(){this.mBeginPos=this.logo.position.clone(),this.mEndPos=this.mBeginPos.add(new cc.Vec2(0,50))},Object.defineProperty(e.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),e.prototype.willShow=function(o){var e=this;t.prototype.willShow.call(this,o),this.btnReceive.active=!0,this.initPos(),this.mCurrentNum=0,this.mNavigateIndex=l.randomNumBoth(3,this.mMaxNum-2),this.addEvent(),this.schedule(this.subProgress,.1),moosnow.form.showAd(dt.NONE,null),It.changeSrc(this.logo,{url:this.FormData.url,width:this.logo.width,height:this.logo.height}),this.mBannerShow=!1,moosnow.http.getAllConfig(function(t){e.mBannerClickType=t.bannerClickType}),this.schedule(this.onFwUpdate,.16)},e.prototype.willHide=function(){this.unschedule(this.subProgress),this.unschedule(this.resetProgress),this.removeEvent(),this.unschedule(this.onFwUpdate)},e.prototype.subProgress=function(){this.mCurrentNum-=.1,this.mCurrentNum<0&&(this.mCurrentNum=0)},e.prototype.bannerClickCallback=function(t){t&&(this.unschedule(this.onHideBanner),this.unschedule(this.resetProgress),moosnow.platform.hideBanner(),this.mBannerShow=!1,this.hideForm(),this.FormData&&this.FormData.callback&&this.FormData.callback())},e.prototype.onBannerClick=function(){var t=this;this.onLogoDown(),this.mCurrentNum+=1,this.mCurrentNum>=this.mNavigateIndex&&(this.mBannerShow||(this.mShowTime=Date.now(),this.mBannerShow=!0,moosnow.platform.showBanner(!0,function(o){console.log("banner click callback ",o),t.bannerClickCallback(o)}),1==this.mBannerClickType?(this.unschedule(this.onHideBanner),this.scheduleOnce(this.onHideBanner,2)):2==this.mBannerClickType&&(this.unschedule(this.resetProgress),this.scheduleOnce(this.resetProgress,2)))),this.mCurrentNum>=this.mMaxNum&&(moosnow.platform.hideBanner(),this.mBannerShow=!1,this.hideForm(),this.FormData&&this.FormData.callback&&this.FormData.callback(!0))},e.prototype.resetProgress=function(){this.mCurrentNum=0,moosnow.platform.hideBanner(),this.mBannerShow=!1},e.prototype.onHideBanner=function(){moosnow.platform.hideBanner()},e.prototype.onFwUpdate=function(){this.clickProgress.getComponent(cc.ProgressBar).progress=this.mCurrentNum/this.mMaxNum},e}(Bt),zt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.logo=null,o.title=null,o.animLogo=null,o.nameBg=null,o}return o(e,t),e.prototype.addListener=function(){this.logo.on(Ct.TOUCH_END,this.onClickAd,this)},e.prototype.removeListener=function(){this.logo.off(Ct.TOUCH_END,this.onClickAd,this)},e.prototype.initPosition=function(t){},e.prototype.willShow=function(o){t.prototype.willShow.call(this,o),this.mAdItem=o,this.addListener()},e.prototype.refreshImg=function(t){this.mAdItem=t,this.updateUI()},e.prototype.updateUI=function(){var t=this,o=this.logo,e=o.width,n=o.height;It.changeSrc(this.logo,{url:this.mAdItem.img,width:e,height:n},function(){t.logo.width=e,t.logo.height=n}),It.changeText(this.title,this.mAdItem.title)},e.prototype.onClickAd=function(){var t=this,o=this.mAdItem;if(this.FormData&&this.FormData.refresh){var e=this.findNextAd();e&&(e.refresh&&moosnow.event.sendEventImmediately(m.AD_VIEW_REFRESH,{current:o,next:e}),this.refreshImg(e))}moosnow.platform.navigate2Mini(o,function(){},function(){t.mAdItem&&t.mAdItem.onCancel&&t.mAdItem.onCancel(o)})},e.prototype.findNextAd=function(){if(!this.FormData.source)return null;if(!this.FormData.showIds)return null;for(var t=0;t<this.FormData.source.length;t++){for(var o=!1,e=0;e<this.FormData.showIds.length;e++)this.FormData.showIds[e].appid==this.FormData.source[t].appid&&this.FormData.showIds[e].position==this.FormData.source[t].position&&(o=!0);if(!o)return this.FormData.source[t]}return null},e.prototype.onAdViewChange=function(t){if(this.FormData.showIds&&this.FormData.source){for(var o=t.current,e=t.next,n=this.FormData.showIds,i=this.FormData.source,r=0;r<n.length;r++)o.appid==n[r].appid&&o.position==n[r].position&&(this.FormData.showIds[r]=e.appid);for(r=0;r<i.length;r++)if(e.appid==i[r].appid){this.FormData.source.splice(r,1),this.FormData.source.push(o);break}}},e.prototype.onShow=function(o){t.prototype.onShow.call(this,o),this.updateUI(),moosnow.event.addListener(m.AD_VIEW_REFRESH,this,this.onAdViewChange)},e.prototype.onHide=function(o){t.prototype.onHide.call(this,o),this.mAdItem&&(this.mAdItem.onCancel=null),this.removeListener(),moosnow.event.removeListener(m.AD_VIEW_REFRESH,this)},e}(Bt),Qt=function(t){function n(){var o=null!==t&&t.apply(this,arguments)||this;return o.endContainer=null,o.endContainer_layout=null,o.exportContainer=null,o.exportContainer_scroll=null,o.exportContainer_layout=null,o.exportClose=null,o.formMask=null,o.exportCloseTxt=null,o.btnBack=null,o.floatContainer=null,o.floatFull=null,o.bannerContainer=null,o.bannerContainer_scroll=null,o.bannerContainer_layout=null,o.topContainer=null,o.topContainer_scroll=null,o.topContainer_layout=null,o.leftContainer=null,o.leftContainer_scroll=null,o.leftContainer_layout=null,o.rightContainer=null,o.rightContainer_scroll=null,o.rightContainer_layout=null,o.rotateContainer=null,o.rotateContainer_layout=null,o.sideContainer=null,o.sideView=null,o.sideLayout=null,o.btnSideShow=null,o.btnSideHide=null,o.mShowAd=dt.NONE,o.mPrevShowAd=dt.NONE,o.mScrollVec=[],o.mEndLogic=[],o.mMoveSpeed=2,o.mFloatIndex=0,o.mFloatRefresh=3,o.mFloatCache={},o.loadNum=0,o.loadManNum=3,o.mSecond=3,o.mAdItemList=[],o.floatRuning=!1,o}return o(n,t),n.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnBack,function(){t.onBack()}),this.applyClickAnim(this.exportClose,function(){t.onNavigate()}),this.applyClickAnim(this.btnSideShow,function(){t.sideOut()}),this.applyClickAnim(this.btnSideHide,function(){t.sideIn()}),moosnow.event.addListener(m.AD_VIEW_CHANGE,this,this.onAdChange)},n.prototype.removeListener=function(){this.removeClickAnim(this.btnBack),this.removeClickAnim(this.exportClose),this.removeClickAnim(this.btnSideShow),this.removeClickAnim(this.btnSideHide),moosnow.event.removeListener(m.AD_VIEW_CHANGE,this)},n.prototype.onAdChange=function(t){this.displayAd(!1),this.mTempPoints=t&&t.points?t.points:null,this.mTempTempletes=t&&t.templetes?t.templetes:null,this.mShowAd||(this.mShowAd=t.showAd,this.mBackCall=t.callback),t.showAd!=dt.RECOVER&&(this.mPrevShowAd=this.mShowAd,this.mPrevBackCall=this.mBackCall),t.showAd==dt.RECOVER&&(t.showAd=this.mPrevShowAd,t.callback=this.mPrevBackCall),this.displayChange(t.showAd,t.callback),isNaN(t.zIndex)?this.node.zIndex=cc.macro.MAX_ZINDEX:this.node.zIndex=t.zIndex},n.prototype.onBack=function(){this.mBackCall&&this.mBackCall()},Object.defineProperty(n.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),n.prototype.loadAd=function(t){var o=this;this.mAdData?t(this.mAdData.indexLeft):(this.loadNum=0,moosnow.form.formFactory.getLayout(function(){o.checkLoad(t)}),moosnow.form.formFactory.getTemplates(function(){o.checkLoad(t)}),moosnow.ad.getAd(function(e){o.mAdData=e,o.checkLoad(t)}))},n.prototype.onAdCancel=function(){moosnow.form.showAd(dt.EXPORT|dt.MASK|dt.BACK,function(){moosnow.form.showAd(dt.RECOVER,function(){})})},n.prototype.checkLoad=function(t){this.loadNum++,this.loadNum==this.loadManNum&&t(this.mAdData.indexLeft)},n.prototype.onRandomNavigate=function(){var t=this.mAdData.indexLeft[l.randomNumBoth(0,this.mAdData.indexLeft.length-1)];moosnow.platform.navigate2Mini(t,function(){},function(){})},n.prototype.onNavigate=function(){var t=this;moosnow.http.getAllConfig(function(o){o&&1==o.exportBtnNavigate?t.onRandomNavigate():t.onBack()})},n.prototype.sideOut=function(){var t=this,o=moosnow.platform.getSystemInfoSync(),e=0,n=0;o&&(e=o.statusBarHeight||0,n=o.notchHeight||0),this.sideView.node.runAction(cc.sequence(cc.moveTo(1,e+n+this.sideView.node.width+20,0),cc.callFunc(function(){t.btnSideShow.active=!1,t.btnSideHide.active=!0})))},n.prototype.sideIn=function(){var t=this;this.sideView.node.runAction(cc.sequence(cc.moveTo(1,0,0),cc.callFunc(function(){t.btnSideShow.active=!0,t.btnSideHide.active=!1})))},n.prototype.pushScroll=function(t,o){o.type==cc.Layout.Type.GRID?t.vertical?this.mScrollVec.push({scrollView:t,move2Up:!1}):this.mScrollVec.push({scrollView:t,move2Left:!1}):o.type==cc.Layout.Type.HORIZONTAL?this.mScrollVec.push({scrollView:t,move2Left:!1}):o.type==cc.Layout.Type.VERTICAL&&this.mScrollVec.push({scrollView:t,move2Up:!1})},n.prototype.addAd=function(t){this.mShowAd|=t},n.prototype.removeAd=function(t){this.hasAd(t)&&(this.mShowAd^=t)},n.prototype.hasAd=function(t){return(this.mShowAd&t)==t},n.prototype.showClose=function(t){this.exportClose.active=!1,this.exportCloseTxt.active=!1,this.btnBack.active=!1,this.unschedule(this.onWaitShow),t&&this.hasAd(dt.BACK)?this.hasAd(dt.WAIT)?(this.mSecond=3,this.onWaitShow(),this.schedule(this.onWaitShow,1)):(this.exportClose.active=!0,this.btnBack.active=!0,this.exportCloseTxt.active=!1):(this.exportClose.active=!1,this.btnBack.active=!1,this.exportCloseTxt.active=!1)},n.prototype.onWaitShow=function(){if(this.mSecond-=1,this.exportCloseTxt.active=!0,this.mSecond<=0)return this.exportClose.active=!0,this.btnBack.active=!0,this.exportCloseTxt.active=!1,void this.unschedule(this.onWaitShow);It.changeText(this.exportCloseTxt,"\u5269\u4f59"+this.mSecond+"\u79d2\u53ef\u5173\u95ed")},n.prototype.setPosition=function(t,o,e,n){void 0===o&&(o=""),void 0===n&&(n=!1);var i=l.deepCopy(t);return i.forEach(function(t){t.position=o,t.onCancel=e,t.refresh=n}),i},n.prototype.initFloatAd=function(t){var o=this;if(0!=this.mAdData.indexLeft.length){var e=this.setPosition(this.mAdData.indexLeft,"\u6d6e\u52a8ICON",t,!0),n=[],i=this.mTempPoints||this.FormData.floatPositon,r=this.mTempTempletes||this.FormData.floatTempletes,a=l.randomNumBoth(0,e.length-1);i.forEach(function(t,i){var s=(a+i)%(e.length-1),c=e[s];n.push({appid:c.appid,position:c.position,index:s});var l=r.length-1>i?r[i]:r[0];console.log("initFloatAd",t.x,t.y),c.x=t.x,c.y=t.y,c.source=e,c.showIds=n,c.index=i,moosnow.form.formFactory.createNodeByTemplate(l,zt,c,o.floatContainer)}),this.updateFloat(e),this.schedule(this.updateFloat,this.mFloatRefresh,[e]),this.floatRuning=!1}},n.prototype.removeFloatAd=function(){this.floatContainer.children.forEach(function(t){t.stopAllActions()});var t=this.FormData.floatTempletes;this.mTempTempletes&&(t=t.concat(this.mTempTempletes)),t.forEach(function(t){moosnow.form.formFactory.hideNodeByTemplate(t,null)}),this.unschedule(this.updateFloat)},n.prototype.floatAnim=function(){if(!this.floatRuning){var t=this.mTempTempletes||this.FormData.floatTempletes;this.floatContainer.childrenCount>=t.length&&(this.floatRuning=!0),this.floatContainer.children.forEach(function(t){t.stopAllActions(),t.runAction(cc.sequence(cc.rotateTo(.3,10),cc.rotateTo(.6,-10),cc.rotateTo(.3,0),cc.scaleTo(.3,.8),cc.scaleTo(.3,1)).repeatForever())})}},n.prototype.updateFloat=function(t){var o=this,n=this.mTempTempletes||this.FormData.floatTempletes;this.floatContainer.children.forEach(function(t){n.forEach(function(n){moosnow.form.formFactory.getKVsByName(n).forEach(function(n){n.formNode==t&&(n.formLogic.FormData.index=(n.formLogic.FormData.index+o.floatContainer.childrenCount)%(o.mAdData.indexLeft.length-1),n.formLogic.refreshImg(e(e({},o.mAdData.indexLeft[n.formLogic.FormData.index]),{onCancel:n.formLogic.FormData.onCancel})))})})})},n.prototype.initFiexdView=function(t,o,n,i){if(this.mAdData){t.removeAllChildren();for(var r=this.setPosition(this.mAdData.indexLeft,o,i,!0),a=[],s=[],c=0;c<8;c++){var l=r.length>c?r[c]:r[0];s.push({appid:l.appid,position:l.position,index:c}),a.push(l)}a.forEach(function(o){var i=e(e({},o),{showIds:s,source:r});moosnow.form.formFactory.createNodeByTemplate(n,zt,i,t)})}},n.prototype.initView=function(t,o,e,n,i,r){this.hideAllAdNode(n,o),r||(r=this.setPosition(this.mAdData.indexLeft,e,i)),r.forEach(function(t,e){moosnow.form.formFactory.createNodeByTemplate(n,zt,t,o)}),this.pushScroll(t,o.getComponent(cc.Layout))},n.prototype.hideAllAdNode=function(t,o){if(o)for(var e=0;e<o.childrenCount;e++)moosnow.form.formFactory.hideNodeByTemplate(t,o.children[e]),e--},n.prototype.onFwUpdate=function(){this.floatAnim(),this.scrollMove()},n.prototype.scrollMove=function(){for(var t=0;t<this.mScrollVec.length;t++){var o=this.mScrollVec[t],e=o.scrollView;if(!e.isScrolling()){var n=e.getMaxScrollOffset(),i=n.y/2+20,r=n.x/2+20,a=e.getContentPosition();1==o.move2Up?(a.y>i&&(o.move2Up=!1),o.scrollView.setContentPosition(new cc.Vec2(a.x,a.y+this.mMoveSpeed))):0==o.move2Up&&(a.y<-i&&(o.move2Up=!0),o.scrollView.setContentPosition(new cc.Vec2(a.x,a.y-this.mMoveSpeed))),1==o.move2Left?(a.x>r&&(o.move2Left=!1),o.scrollView.setContentPosition(new cc.Vec2(a.x+this.mMoveSpeed,a.y))):0==o.move2Left&&(a.x<-r&&(o.move2Left=!0),o.scrollView.setContentPosition(new cc.Vec2(a.x-this.mMoveSpeed,a.y)))}}},n.prototype.willShow=function(o){t.prototype.willShow.call(this,o),this.floatRuning=!1,this.addListener(),this.mAdItemList=[],this.mScrollVec=[],this.displayChange(o.showAd,o.callback)},n.prototype.willHide=function(){t.prototype.willShow.call(this),this.removeListener(),this.unschedule(this.onFwUpdate)},n.prototype.displayChange=function(t,o){void 0===o&&(o=null),this.mShowAd=t,this.displayAd(!0),this.mBackCall=o},n.prototype.displayAd=function(t){var o=this;this.endContainer.active=t&&this.hasAd(dt.EXPORT_FIXED),this.endContainer.active&&this.initEnd(),this.bannerContainer.active=t&&this.hasAd(dt.BANNER),this.topContainer.active=t&&this.hasAd(dt.TOP),this.floatContainer.active=t&&this.hasAd(dt.FLOAT),this.floatContainer.active&&this.initFloatAd(this.onAdCancel),this.floatContainer.active||this.removeFloatAd(),this.leftContainer.active=this.rightContainer.active=t&&this.hasAd(dt.LEFTRIGHT),this.exportContainer.active=t&&this.hasAd(dt.EXPORT),this.rotateContainer.active=t&&this.hasAd(dt.ROTATE),this.rotateContainer.active&&this.initRotate(this.initRotate),!this.rotateContainer.active&&this.disableRotate(),this.formMask.active=t&&this.hasAd(dt.MASK),t&&this.hasAd(dt.EXPORT)&&moosnow.http.getAllConfig(function(t){1==t.exportAutoNavigate&&moosnow.platform.navigate2Mini(o.mAdData.indexLeft[l.randomNumBoth(0,o.mAdData.indexLeft.length-1)])}),this.showClose(t)},n.prototype.onShow=function(o){var e=this;t.prototype.onShow.call(this,o),moosnow.http.getAllConfig(function(t){t&&(isNaN(t.adScrollViewSpeed)||(e.mMoveSpeed=parseFloat(t.adScrollViewSpeed)))}),this.loadAd(function(){e.schedule(e.onFwUpdate,.016),e.initBanner(),e.initExport(),e.initTop(),e.initLeftRight(),e.FormData&&e.FormData.callback&&e.FormData.callback()})},n.prototype.initBanner=function(){var t=this.bannerContainer_layout.getComponent(cc.Layout),o=this.bannerContainer_scroll.getComponent(cc.ScrollView);t.type=cc.Layout.Type.HORIZONTAL,t.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.initView(o,this.bannerContainer_layout,"banner","bannerAdItem",this.onAdCancel)},n.prototype.initTop=function(){var t=this.topContainer_layout.getComponent(cc.Layout),o=this.topContainer_scroll.getComponent(cc.ScrollView);t.type=cc.Layout.Type.HORIZONTAL,t.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.initView(o,this.topContainer_layout,"top","bannerAdItem",this.onAdCancel)},n.prototype.initLeftRight=function(){var t=l.deepCopy(this.mAdData.indexLeft),o=t.length/2,e=t.slice(0,o),n=t.slice(o,t.length),i=this.leftContainer_layout.getComponent(cc.Layout);i.type=cc.Layout.Type.VERTICAL,i.resizeMode=cc.Layout.ResizeMode.CONTAINER;var r=this.rightContainer_layout.getComponent(cc.Layout);r.type=cc.Layout.Type.VERTICAL,r.resizeMode=cc.Layout.ResizeMode.CONTAINER;var a=this.leftContainer_scroll.getComponent(cc.ScrollView);a.horizontal=!1,a.vertical=!0;var s=this.rightContainer_scroll.getComponent(cc.ScrollView);s.horizontal=!1,s.vertical=!0;var c=this.setPosition(n,"left",this.onAdCancel),h=this.setPosition(e,"right",this.onAdCancel);this.initView(a,this.leftContainer_layout,"left","leftAdItem",this.onAdCancel,c),this.initView(s,this.rightContainer_layout,"right","leftAdItem",this.onAdCancel,h)},n.prototype.initEnd=function(){var t=this.endContainer_layout.getComponent(cc.Layout);t.type=cc.Layout.Type.GRID,t.resizeMode=cc.Layout.ResizeMode.NONE,this.initFiexdView(this.endContainer_layout,"8\u4e2a\u56fa\u5b9a\u5927\u5bfc\u51fa","fiexdAdItem",this.onAdCancel)},n.prototype.initExport=function(){var t=this.exportContainer_layout.getComponent(cc.Layout),o=this.exportContainer_scroll.getComponent(cc.ScrollView);t.type=cc.Layout.Type.GRID,t.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.initView(o,this.exportContainer_layout,"\u5927\u5bfc\u51fa","exportAdItem")},n.prototype.disableRotate=function(){moosnow.form.formFactory.hideNodeByTemplate("rotateAdItem",null)},n.prototype.initRotate=function(t){var o=this;if(this.mAdData){var e=this.setPosition(this.mAdData.indexLeft,"\u65cb\u8f6c\u5bfc\u51fa",t,!0);l.randomNumBoth(0,e.length-1);moosnow.form.formFactory.getTemplate("rotateAdItem",function(t){for(var n=t.width/2,i=t.height/2,r=[{x:-n-15,y:i+15},{x:n+15,y:i+15},{x:-n-15,y:-i-15},{x:n+15,y:-i-15}],a=[],s=[],c=0;c<4&&0!=e.length;c++){var h=l.randomNumBoth(0,e.length-1),d=e.splice(h,1)[0];d.x=r[c].x,d.y=r[c].y,a.push({appid:d.appid,position:d.position,index:c}),s.push(d)}s.forEach(function(t){t.source=e,t.showIds=a,moosnow.form.formFactory.createNodeByTemplate("rotateAdItem",zt,t,o.rotateContainer_layout)});var p=It.canvasNode.width/2/800;o.rotateContainer_layout.children.forEach(function(t,o){t.x=r[o].x-It.canvasNode.width/2,t.stopAllActions(),t.runAction(cc.spawn(cc.moveTo(p,new cc.Vec2(r[o].x,r[o].y)),cc.rotateBy(p,360)))})})}},n.prototype.disableAd=function(){this.unschedule(this.onFwUpdate)},n}(Bt),jt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.floatPositon=[],o.floatTempletes=["floatAdItem1"],o}return o(e,t),e}(function(){function t(){this._hideForm=!0,this.extraData={},this.zIndex=0}return t.create=function(t){return new t},Object.defineProperty(t.prototype,"hideForm",{get:function(){return this._hideForm},set:function(t){this._hideForm=t},enumerable:!0,configurable:!0}),t}()),Gt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.floatPositon=[],o.floatTempletes=["floatAdItem1"],o.adType=dt.NONE,o.zIndex=cc.macro.MAX_ZINDEX,o.pointName="",o.formName="loadingForm",o}return o(e,t),e}(jt),qt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.btnCancel=null,o.txtCountdown=null,o.btnVideo=null,o.btnShare=null,o.btnReceive=null,o.logo=null,o.mChecked=!0,o.formComponents=[new xt(o.mChecked,function(t){o.mChecked=t})],o.mTotalSecond=10,o.mCurrentSecond=0,o}return o(e,t),Object.defineProperty(e.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),e.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnCancel,function(){t.hideForm()}),this.applyClickAnim(this.btnVideo,function(){t.onVideo()}),this.applyClickAnim(this.btnReceive,function(){t.onReceive()}),this.applyClickAnim(this.btnShare,function(){t.onShare()})},e.prototype.removeListener=function(){this.removeClickAnim(this.btnCancel),this.removeClickAnim(this.btnVideo),this.removeClickAnim(this.btnReceive),this.removeClickAnim(this.btnShare)},e.prototype.willShow=function(o){t.prototype.willShow.call(this,o),this.addListener(),this.mTotalSecond=10,this.mCurrentSecond=0,this.FormData&&this.FormData.logo&&It.changeSrc(this.logo,{url:this.FormData.logo,width:this.logo.width,height:this.logo.height}),this.resumeCountdown(),moosnow.platform.showBanner(!1)},e.prototype.willHide=function(o){t.prototype.willShow.call(this,o),this.removeListener()},e.prototype.onCountdown=function(){this.mCurrentSecond+=1;var t=this.mTotalSecond-this.mCurrentSecond;if(t<0)return this.unschedule(this.onCountdown),void this.hideForm();It.changeText(this.txtCountdown,t+"\u79d2")},e.prototype.stopCountdown=function(){this.unschedule(this.onCountdown)},e.prototype.resumeCountdown=function(){this.schedule(this.onCountdown,1)},e.prototype.onShare=function(){var t=this;this.stopCountdown(),moosnow.platform.share({channel:""},function(o){t.resumeCountdown()})},e.prototype.onVideo=function(){var t=this;this.stopCountdown(),moosnow.platform.showVideo(function(o){o!=u.END&&(o==moosnow.VIDEO_STATUS.ERR?moosnow.form.showToast(rt.ERR):moosnow.form.showToast(rt.NOTEND),t.resumeCountdown())})},e.prototype.onReceive=function(){this.mChecked&&this.onVideo()},e}(Bt),Kt=function(){function t(){}return t.ToastForm="toastForm",t.AdForm="adForm",t.MistouchForm="mistouchForm",t.PrizeForm="prizeForm",t.TotalForm="totalForm",t.EndForm="endForm",t.RespawnForm="respawnForm",t.FailForm="failForm",t.PauseForm="pauseForm",t.ShareForm="shareForm",t.TryForm="tryForm",t.SetForm="setForm",t.BoxForm="boxForm",t.NativeForm="nativeForm",t}(),Xt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.baseBox=null,o.logo=null,o.btnTopClose=null,o.btnClose=null,o.btnOpen=null,o.txtMemo=null,o}return o(e,t),Object.defineProperty(e.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),e.prototype.onShow=function(o){var e=this;t.prototype.onShow.call(this,o),this.node.zIndex=cc.macro.MAX_ZINDEX,this.addListener(),console.log("\u663e\u793a\u539f\u751f\u5e7f\u544a"),moosnow.platform.hideBanner(),moosnow.platform.showNativeAd(function(t){console.log("\u539f\u751f\u5e7f\u544a",t),t&&t.imgUrlList&&t.imgUrlList.length>0?(e.node.active=!0,6==t.creativeType?e.baseBox.height=e.baseBox.width/2:e.baseBox.height=.65625*e.baseBox.width,It.changeText(e.txtMemo,t.desc),It.changeSrc(e.logo,{url:t.imgUrlList[0],width:e.logo.width,height:e.logo.height})):(e.FormData&&e.FormData.nullCallback&&e.FormData.nullCallback(),moosnow.platform.showBanner(!1))}),moosnow.http.getAllConfig(function(t){t&&1==t.smallNativeAdClose&&(e.btnTopClose.scale=.7),t&&1==t.zs_native_click_switch?(e.btnOpen.active=!0,e.btnClose.active=!1):(e.btnOpen.active=!1,e.btnClose.active=!0)})},e.prototype.willHide=function(o){this.remoteListener(),t.prototype.willHide.call(this,o)},e.prototype.addListener=function(){var t=this;this.applyClickAnim(this.logo,function(){t.onOpenAd()}),this.applyClickAnim(this.btnOpen,function(){t.onOpenAd()}),this.applyClickAnim(this.btnTopClose,function(){t.onCloseAd()}),this.applyClickAnim(this.btnClose,function(){t.onCloseAd()})},e.prototype.remoteListener=function(){this.removeClickAnim(this.logo),this.removeClickAnim(this.btnOpen),this.removeClickAnim(this.btnTopClose),this.removeClickAnim(this.btnClose)},e.prototype.onCloseAd=function(){this.FormData&&this.FormData.callback&&this.FormData.callback(),this.hideForm()},e.prototype.onOpenAd=function(){var t=this;moosnow.platform.clickNative(function(){t.hideForm()})},e}(Bt),Zt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.btnVideo=null,o.btnHome=null,o}return o(e,t),Object.defineProperty(e.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),e.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnVideo,function(){t.onVideoTry()}),this.applyClickAnim(this.btnHome,function(){t.onHome()})},e.prototype.removeListener=function(){this.removeClickAnim(this.btnVideo),this.removeClickAnim(this.btnHome)},e.prototype.onShow=function(o){t.prototype.onShow.call(this,o),this.addListener()},e.prototype.onHide=function(o){t.prototype.onHide.call(this,o),this.removeListener()},e.prototype.onVideoTry=function(){var t=this;moosnow.platform.showVideo(function(o){o==u.END?(t.hideForm(),t.FormData.videoCallback&&t.FormData.videoCallback()):o==u.ERR?moosnow.form.showToast(rt.ERR):o==u.NOTEND&&moosnow.form.showToast(rt.NOTEND)})},e.prototype.onHome=function(){this.hideForm(),this.FormData.callback&&this.FormData.callback()},e}(Bt),Yt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.btnBack=null,o.btnVideo=null,o}return o(e,t),Object.defineProperty(e.prototype,"FormData",{get:function(){return this.mFormData},enumerable:!0,configurable:!0}),e.prototype.addListener=function(){var t=this;this.applyClickAnim(this.btnBack,function(){t.onBack()}),this.applyClickAnim(this.btnVideo,function(){t.onVideo()})},e.prototype.removeListener=function(){this.removeClickAnim(this.btnBack)},e.prototype.onVideo=function(){var t=this;moosnow.platform.showVideo(function(o){o==u.END?(t.hideForm(),t.FormData.videoCallback&&t.FormData.videoCallback()):o==u.ERR?moosnow.form.showToast(rt.ERR):o==u.NOTEND&&moosnow.form.showToast(rt.NOTEND)})},e.prototype.onShow=function(t){this.addListener()},e.prototype.willHide=function(){this.removeListener()},e.prototype.onBack=function(){this.hideForm(),this.FormData.callback&&this.FormData.callback()},e}(Bt),Jt=function(){return function(t,o,e){this.name="",this.formData=null,this.parent=null,this.remoteLayout=!0,this.layoutOptions=null,this.showOnce=!0,this.name=t,this.formLogic=o,this.formData=e}}(),$t=function(){function t(){this.mBaseForm=new Bt,this.formFactory=new Ot}return t.prototype.initCheckboxState=function(t,o){void 0===t&&(t=!0),this.mCheckbox=new xt(t,o),this.mCheckbox.onShow(null)},t.prototype.checkboxToggle=function(){this.mCheckbox.checkToggle()},t.prototype.applyClickAnim=function(t,o,e,n){void 0===e&&(e=!1),void 0===n&&(n=!0),this.mBaseForm.applyClickAnim(t,o,e,n)},t.prototype.removeClickAnim=function(t){this.mBaseForm.removeClickAnim(t)},t.prototype.showToast=function(t){this.formFactory.showForm(new Jt(Kt.ToastForm,Dt,t))},t.prototype.showNativeAd=function(t){this.formFactory.showForm(new Jt(Kt.NativeForm,Xt,t))},t.prototype.loadAd=function(t){var o=new Jt(Kt.AdForm,Qt,e(e({},new jt),t));o.callback=function(t){console.log("create ad form")},this.formFactory.showForm(o)},t.prototype.showAd=function(t,o,e,n,i,r,a){void 0===t&&(t=dt.NONE),void 0===i&&(i=cc.macro.MAX_ZINDEX),void 0===r&&(r=""),void 0===a&&(a="loadingForm");var s=new Gt;s.adType=t,s.zIndex=i,s.floatPositon=e,s.floatTempletes=n,s.pointName=r,s.formName=a,s.callback=o,this.showAd2(s)},t.prototype.showAd2=function(t){moosnow.event.sendEventImmediately(m.AD_VIEW_CHANGE,{showAd:t.adType,zIndex:t.zIndex,points:t.floatPositon,templetes:t.floatTempletes,pointName:t.pointName,formName:t.formName,callback:t.callback})},t.prototype.hideAd=function(t){moosnow.event.sendEventImmediately(m.AD_VIEW_CHANGE,{showAd:dt.NONE,callback:t})},t.prototype.showCoin=function(t){},t.prototype.showMistouch=function(t){this.formFactory.showForm(new Jt(Kt.MistouchForm,Wt,t))},t.prototype.showPrize=function(t){this.formFactory.showForm(new Jt(Kt.PrizeForm,qt,t))},t.prototype.showTotal=function(t){this.formFactory.showForm(new Jt(Kt.TotalForm,Rt,t))},t.prototype.showEnd=function(t){this.formFactory.showForm(new Jt(Kt.EndForm,Lt,t))},t.prototype.showRespawn=function(t){this.formFactory.showForm(new Jt(Kt.RespawnForm,Zt,t))},t.prototype.showFail=function(t){this.formFactory.showForm(new Jt(Kt.FailForm,Yt,t))},t.prototype.showPause=function(t){this.formFactory.showForm(new Jt(Kt.PauseForm,Ft,t))},t.prototype.showShare=function(t){this.formFactory.showForm(new Jt(Kt.ShareForm,Ut,t))},t.prototype.showTry=function(t){this.formFactory.showForm(new Jt(Kt.TryForm,Pt,t))},t.prototype.showSet=function(t){this.formFactory.showForm(new Jt(Kt.SetForm,Mt,t))},t.prototype.showBox=function(t){this.formFactory.showForm(new Jt(Kt.BoxForm,Ht,t))},t.prototype.createForm=function(t){this.formFactory.showForm(new Jt(t,Bt,{}))},t.prototype.hideForm=function(t){this.formFactory.hideForm(t,null)},t}(),to=function(t){function n(){var o=null!==t&&t.apply(this,arguments)||this;return o.platformName="hbs",o.mIsClickedNative=!1,o}return o(n,t),n.prototype.showBanner=function(t,o,e,n,i,r){void 0===t&&(t=!0),void 0===e&&(e=d.CENTER),void 0===n&&(n=p.BOTTOM),void 0===i&&(i=-1)},n.prototype.createRewardAD=function(t,o){var e=this;if(void 0===o&&(o=0),!this.videoLoading)if(window[this.platformName])if(window[this.platformName].createRewardedVideoAd){var n=this.getVideoId(o);if(l.isEmpty(n))return console.warn(N),void(moosnow.platform.videoCb&&moosnow.platform.videoCb(u.END));if(!this.video[n]){if(console.log(" HWModule ~ createRewardAD ~ videoId",n),this.video[n]=window[this.platformName].createRewardedVideoAd({adUnitId:n}),!this.video[n])return void console.warn("\u521b\u5efa\u89c6\u9891\u5e7f\u544a\u5931\u8d25");this.video[n].onError(this._onVideoError),this.video[n].onClose(this._onVideoClose),this.video[n].onLoad(function(){moosnow.platform.videoLoading=!1,e.video[n]&&e.video[n].show()})}moosnow.platform.videoLoading=!0,moosnow.platform.videoPlaying=!1,this.video[n].load()}else moosnow.platform.videoCb&&moosnow.platform.videoCb(u.END);else moosnow.platform.videoCb&&moosnow.platform.videoCb(u.END)},n.prototype._onVideoError=function(t){console.warn(S,JSON.stringify(t))},n.prototype.showNativeAd=function(t){var o=this;if(this.native||this._prepareNative(!0),this.nativeCb=t,this.native){var e=this.native.load();e&&e.then(function(){console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u5b8c\u6210")}).catch(function(t){console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"),moosnow.http.getAllConfig(function(t){1==t.nativeErrorShowInter?(console.log("\u539f\u751f\u52a0\u8f7d\u51fa\u9519\uff0c\u7528\u63d2\u5c4f\u4ee3\u66ff"),o.nativeCb(null),o.showInter()):o.nativeCb(null)})})}},n.prototype._prepareNative=function(t){var o=this;if(void 0===t&&(t=!1),window[this.platformName]&&window[this.platformName].createNativeAd&&!this.native){var e=this.nativeId;console.log(" HWModule ~ _prepareNative ~ adUnitId",e),this.native=window[this.platformName].createNativeAd({adUnitId:e,success:function(t){console.log("_prepareNative loadNativeAd : success",t)},fail:function(t,e){o.nativeCb&&o.nativeCb(null),console.log("_prepareNative loadNativeAd fail: "+t+","+e)}}),this.native.onLoad(this._onNativeLoad.bind(this)),this.native.onError(this._onNativeError.bind(this))}},n.prototype._onNativeLoad=function(t){var o=this;console.log(" HWModule ~ _onNativeLoad ~ res",JSON.stringify(t)),this.nativeLoading=!1,console.log(T,t),t&&t.adList&&t.adList.length>0?(this.nativeAdResult=t.adList[t.adList.length-1],l.isEmpty(this.nativeAdResult.adId)||(console.log(B),console.log("HWModule ~ _onNativeLoad ~ reportAdShow ",this.nativeAdResult.adId),this.native.reportAdShow({adId:this.nativeAdResult.adId})),l.isFunction(this.nativeCb)&&this.nativeCb(e(e({},l.deepCopy(this.nativeAdResult)),{desc:this.nativeAdResult&&this.nativeAdResult.desc?this.nativeAdResult.desc:"",title:this.nativeAdResult&&this.nativeAdResult.title?this.nativeAdResult.title:""}))):(console.log(L),l.isFunction(this.nativeCb)&&moosnow.http.getAllConfig(function(t){1==t.nativeErrorShowInter?(console.log("\u539f\u751f\u52a0\u8f7d\u51fa\u9519\uff0c\u7528\u63d2\u5c4f\u4ee3\u66ff"),o.showInter()):o.nativeCb(null)}))},n.prototype._onNativeError=function(t){var o=this;this.nativeLoading=!1,this.nativeAdResult=null,20003==t.code?this.nativeIdIndex<this.nativeId.length-1?(console.log(_,t),this.nativeIdIndex+=1,this._destroyNative()):(console.log(k),this.nativeIdIndex=0):(this.nativeCb&&this.nativeCb(null),console.log(E,t)),moosnow.http.getAllConfig(function(t){1==t.nativeErrorShowInter?(console.log("\u539f\u751f\u52a0\u8f7d\u51fa\u9519\uff0c\u7528\u63d2\u5c4f\u4ee3\u66ff"),o.showInter()):o.nativeCb&&o.nativeCb(null)})},n.prototype.clickNative=function(t){this.nativeAdResult&&!l.isEmpty(this.nativeAdResult.adId)&&(this.mClickedNativeCallback=t,this.mIsClickedNative=!0,console.log(O,this.nativeAdResult.adId),this.native.reportAdClick({adId:this.nativeAdResult.adId}))},n}(V),oo=function(){function t(){}return t.getAppPlatform=function(){return l.platform},t.appConfig=function(){return l.config},Object.defineProperty(t,"platform",{get:function(){return this.mPlatform||(l.platform==i.WX?this.mPlatform=new H:l.platform==i.OPPO?this.mPlatform=new Q:l.platform==i.VIVO?this.mPlatform=new ht:l.platform==i.OPPO_ZS?this.mPlatform=new ot:l.platform==i.BYTEDANCE?this.mPlatform=new Y:l.platform==i.QQ?this.mPlatform=new J:l.platform==i.BAIDU?this.mPlatform=new et:l.platform==i.UC?this.mPlatform=new mt:l.platform==i.HW?this.mPlatform=new to:this.mPlatform=new V),this.mPlatform},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ad",{get:function(){return t.mAd||(l.platform==i.WX||l.platform==i.PC||l.platform==i.BYTEDANCE?t.mAd=new K:l.platform==i.OPPO?t.mAd=new q:l.platform==i.OPPO_ZS?t.mAd=new tt:t.mAd=new U),t.mAd},enumerable:!0,configurable:!0}),Object.defineProperty(t,"http",{get:function(){return this.mHttp||(l.platform==i.WX?this.mHttp=new z:l.platform==i.OPPO_ZS?this.mHttp=new nt:this.mHttp=new z),this.mHttp},enumerable:!0,configurable:!0}),t.VIDEO_STATUS=u,t.VIDEO_MSG=rt,t.SHARE_MSG=it,t.BANNER_HORIZONTAL=d,t.BANNER_VERTICAL=p,t.BLOCK_HORIZONTAL=P,t.BLOCK_VERTICAL=M,t.SHARE_CHANNEL=X,t.APP_PLATFORM=i,t.PLATFORM_EVENT=m,t.Common=l,t.AD_POSITION=dt,t.data=new j,t.resource=new pt,t.setting=new G,t.event=new st,t.audio=new ut,t.form=new $t,t.nodeHelper=It,t}();return window.moosnow=oo,oo}();